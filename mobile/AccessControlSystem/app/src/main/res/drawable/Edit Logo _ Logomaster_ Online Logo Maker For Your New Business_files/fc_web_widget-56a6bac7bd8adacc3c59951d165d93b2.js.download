"use strict"
define("hotline-web/adapters/agent",["exports","ember-data-url-templates","hotline-web/adapters/application","hotline-web/mixins/url-mixin","hotline-web/utils/constants"],function(e,t,s,n,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var i=s.default.extend(t.default,n.default,{shouldBackgroundReloadRecord:function(){return!1},URL:{default:a.default.EmberModelUrl.agent.url},urlTemplate:Ember.computed("token",{get:function(){return this.URL.default.replace("{token}",Ember.get(this,"token"))}})})
e.default=i}),define("hotline-web/adapters/application",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.RESTAdapter.extend({headers:{Accept:"application/json"}})
e.default=s}),define("hotline-web/adapters/conversation",["exports","hotline-web/adapters/datastore"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.extend({})
e.default=s}),define("hotline-web/adapters/csat",["exports","hotline-web/adapters/datastore"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.extend({})
e.default=s}),define("hotline-web/adapters/datastore",["exports","ember-localforage-adapter/adapters/localforage"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.extend({session:Ember.inject.service("session"),namespace:Ember.computed("session.appId","session.siteId",{get:function(){var e=this.get("session.appId").toString(),t=this.get("session.siteId")
return t?"".concat(e,"_").concat(t):e}}),createRecord:n,updateRecord:n,caching:"all",_setNamespaceData:function(e,t){var s=this,n=this._modelNamespace(e)
return new Ember.RSVP.Promise(function(e,a){s._loadData().then(function(a){"none"!==s.caching&&s.cache.set(n,t),a[n]=t,e(window.localforage.setItem(s._adapterNamespace(),a))},function(e){a(e)})})},_getNamespaceData:function(e){var t=this,s=this._modelNamespace(e)
if("none"!==this.caching){var n=this.cache.get(s)
if(n)return Ember.RSVP.resolve(n)}return new Ember.RSVP.Promise(function(e,n){t._loadData().then(function(n){var a=n&&n[s]||{records:{}}
"model"===t.caching?t.cache.set(s,a):"all"===t.caching&&n&&t.cache.replace(n),e(a)},function(e){n(e)})})},_loadData:function(){var e=this
return new Ember.RSVP.Promise(function(t,s){window.localforage.getItem(e._adapterNamespace()).then(function(e){t(e||{})},function(e){s(e)})})}})
function n(e,t,s){var n=this
return this.queue.attach(function(a,i){n._getNamespaceData(t).then(function(o){var r=e.serializerFor(t.modelName).serialize(s,{includeId:!0}),l=s.id||r.id
o.records[l]=r,n._setNamespaceData(t,o).then(function(){a()},function(e){i(e)})},function(e){i(e)})})}e.default=s}),define("hotline-web/adapters/ds-article",["exports","hotline-web/adapters/datastore"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.extend({})
e.default=s}),define("hotline-web/adapters/ds-category",["exports","hotline-web/adapters/datastore"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.extend({})
e.default=s}),define("hotline-web/adapters/ds-faq",["exports","hotline-web/adapters/datastore"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.extend({})
e.default=s}),define("hotline-web/adapters/event-condition",["exports","hotline-web/adapters/datastore"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.extend({})
e.default=s}),define("hotline-web/adapters/event-property",["exports","hotline-web/adapters/datastore"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.extend({})
e.default=s}),define("hotline-web/adapters/event",["exports","hotline-web/adapters/datastore"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.extend({})
e.default=s}),define("hotline-web/adapters/executed-rule",["exports","hotline-web/adapters/datastore"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.extend({})
e.default=s}),define("hotline-web/adapters/faq",["exports","ember-data-url-templates","hotline-web/adapters/application","hotline-web/utils/constants","hotline-web/mixins/datastore","hotline-web/mixins/locale"],function(e,t,s,n,a,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var o=s.default.extend(t.default,a.default,i.default,{urlTemplate:n.default.EmberModelUrl.faqCategories.url+"?platform=web&locales={locale}&since={lastModifiedAt}&lastLocaleId={lastLocaleId}",urlSegments:{token:function(){return this.get("session.token")},locale:function(){return this.get("currentLocaleString")},lastModifiedAt:function(){return this.get("hotline.ui.lastModifiedFaqsAt")},lastLocaleId:function(){return this.get("hotline.ui.lastLocaleId")}},handleResponse:function(e,t,s,n){return 304===e||204===e?(s={categories:[],contentLocale:null,lastModifiedAt:null,status:e},this._super(e,t,s,n)):(s=s&&s.categories&&s.categories.length>0?{categories:s.categories,contentLocale:s.contentLocale,lastModifiedAt:s.lastModifiedAt,status:200}:{categories:[],contentLocale:s.contentLocale,lastModifiedAt:s.lastModifiedAt,status:200},this._super(e,t,s,n))}})
e.default=o}),define("hotline-web/adapters/identifier",["exports","hotline-web/adapters/datastore"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.extend({})
e.default=s}),define("hotline-web/adapters/message",["exports","hotline-web/adapters/datastore"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.extend({})
e.default=s}),define("hotline-web/adapters/participant",["exports","hotline-web/adapters/datastore"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.extend({})
e.default=s}),define("hotline-web/adapters/properties",["exports","hotline-web/adapters/datastore"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.extend({})
e.default=s}),define("hotline-web/adapters/user-behaviour",["exports","hotline-web/adapters/datastore"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.extend({})
e.default=s}),define("hotline-web/adapters/user-location",["exports","hotline-web/adapters/datastore"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.extend({})
e.default=s}),define("hotline-web/app",["exports","hotline-web/resolver","ember-load-initializers","hotline-web/config/environment"],function(e,t,s,n){var a
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a=Ember.Application.extend({modulePrefix:n.default.modulePrefix,podModulePrefix:n.default.podModulePrefix,Resolver:t.default}),(0,s.default)(a,n.default.modulePrefix)
var i=a
e.default=i}),define("hotline-web/cldrs/en",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=[{locale:"en-US",parentLocale:"en"},{locale:"en",pluralRuleFunction:function(e,t){var s=String(e).split("."),n=!s[1],a=Number(s[0])==e,i=a&&s[0].slice(-1),o=a&&s[0].slice(-2)
return t?1==i&&11!=o?"one":2==i&&12!=o?"two":3==i&&13!=o?"few":"other":1==e&&n?"one":"other"},fields:{year:{displayName:"year",relative:{0:"this year",1:"next year","-1":"last year"},relativeTime:{future:{one:"in {0} year",other:"in {0} years"},past:{one:"{0} year ago",other:"{0} years ago"}}},month:{displayName:"month",relative:{0:"this month",1:"next month","-1":"last month"},relativeTime:{future:{one:"in {0} month",other:"in {0} months"},past:{one:"{0} month ago",other:"{0} months ago"}}},day:{displayName:"day",relative:{0:"today",1:"tomorrow","-1":"yesterday"},relativeTime:{future:{one:"in {0} day",other:"in {0} days"},past:{one:"{0} day ago",other:"{0} days ago"}}},hour:{displayName:"hour",relativeTime:{future:{one:"in {0} hour",other:"in {0} hours"},past:{one:"{0} hour ago",other:"{0} hours ago"}}},minute:{displayName:"minute",relativeTime:{future:{one:"in {0} minute",other:"in {0} minutes"},past:{one:"{0} minute ago",other:"{0} minutes ago"}}},second:{displayName:"second",relative:{0:"now"},relativeTime:{future:{one:"in {0} second",other:"in {0} seconds"},past:{one:"{0} second ago",other:"{0} seconds ago"}}}}}]
e.default=t}),define("hotline-web/cldrs/fr",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default=[{locale:"fr",pluralRuleFunction:function(e,t){return t?1==e?"one":"other":e>=0&&e<2?"one":"other"},fields:{year:{displayName:"année",relative:{0:"cette année",1:"l’année prochaine","-1":"l’année dernière"},relativeTime:{future:{one:"dans {0} an",other:"dans {0} ans"},past:{one:"il y a {0} an",other:"il y a {0} ans"}}},month:{displayName:"mois",relative:{0:"ce mois-ci",1:"le mois prochain","-1":"le mois dernier"},relativeTime:{future:{one:"dans {0} mois",other:"dans {0} mois"},past:{one:"il y a {0} mois",other:"il y a {0} mois"}}},day:{displayName:"jour",relative:{0:"aujourd’hui",1:"demain",2:"après-demain","-2":"avant-hier","-1":"hier"},relativeTime:{future:{one:"dans {0} jour",other:"dans {0} jours"},past:{one:"il y a {0} jour",other:"il y a {0} jours"}}},hour:{displayName:"heure",relativeTime:{future:{one:"dans {0} heure",other:"dans {0} heures"},past:{one:"il y a {0} heure",other:"il y a {0} heures"}}},minute:{displayName:"minute",relativeTime:{future:{one:"dans {0} minute",other:"dans {0} minutes"},past:{one:"il y a {0} minute",other:"il y a {0} minutes"}}},second:{displayName:"seconde",relative:{0:"maintenant"},relativeTime:{future:{one:"dans {0} seconde",other:"dans {0} secondes"},past:{one:"il y a {0} seconde",other:"il y a {0} secondes"}}}}}]}),define("hotline-web/cldrs/pt",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=[{locale:"pt-br",parentLocale:"pt"},{locale:"pt",pluralRuleFunction:function(e,t){var s=String(e).split("."),n=Number(s[0])==e
return t?"other":n&&e>=0&&e<=2&&2!=e?"one":"other"},fields:{year:{displayName:"ano",relative:{0:"este ano",1:"próximo ano","-1":"ano passado"},relativeTime:{future:{one:"em {0} ano",other:"em {0} anos"},past:{one:"há {0} ano",other:"há {0} anos"}}},month:{displayName:"mês",relative:{0:"este mês",1:"próximo mês","-1":"mês passado"},relativeTime:{future:{one:"em {0} mês",other:"em {0} meses"},past:{one:"há {0} mês",other:"há {0} meses"}}},day:{displayName:"dia",relative:{0:"hoje",1:"amanhã",2:"depois de amanhã","-2":"anteontem","-1":"ontem"},relativeTime:{future:{one:"em {0} dia",other:"em {0} dias"},past:{one:"há {0} dia",other:"há {0} dias"}}},hour:{displayName:"hora",relativeTime:{future:{one:"em {0} hora",other:"em {0} horas"},past:{one:"há {0} hora",other:"há {0} horas"}}},minute:{displayName:"minuto",relativeTime:{future:{one:"em {0} minuto",other:"em {0} minutos"},past:{one:"há {0} minuto",other:"há {0} minutos"}}},second:{displayName:"segundo",relative:{0:"agora"},relativeTime:{future:{one:"em {0} segundo",other:"em {0} segundos"},past:{one:"há {0} segundo",other:"há {0} segundos"}}}}}]
e.default=t}),define("hotline-web/components/app-categories-list/component",["exports","hotline-web/mixins/direction","hotline-web/mixins/actions","hotline-web/mixins/message","hotline-web/mixins/datastore","hotline-web/mixins/faq","hotline-web/mixins/brand-check-mixin"],function(e,t,s,n,a,i,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var r=Ember.Component.extend(t.default,s.default,n.default,a.default,i.default,o.default,{fetchData:function(){var e=this,t=this.get("model")
this.fetchFaqData().then(function(s){s&&200===s.get("status")&&(e.set("model.categories",s.get("categories")),e.regularDataObject(t))})},didInsertElement:function(){this._super.apply(this,arguments),Ember.run.scheduleOnce("afterRender",this,this.fetchData)},transitionDelays:100,classNames:["h-conv"],count:1,origin:Ember.computed("session.referrer",{get:function(){return atob(this.get("session.referrer"))}}),isFaqPopupView:Ember.computed("session.config.faqPopupView",{get:function(){return this.get("session.config.faqPopupView")||!1}}),subsetOfArray:function(e,t){for(var s=!1,n=0,a=t.length;n<a;n++)for(var i=0,o=e.length;i<o;i++)if(t[n]===e[i]){s=!0
break}return s},categories:Ember.computed("model.categories",{get:function(){var e,t=this.get("model.categories").toArray(),s=this.get("session.faqTags"),n=[]
if(t)if(s&&"category"===s.filterType){for(var a=0,i=t.length;a<i;a++){var o=t[a]
this.subsetOfArray(o.get("tags"),s.tags)&&n.push(o)}e=n.sortBy("position")}else e=t.sortBy("position")
return e}}),lunrCategories:Ember.computed("model.categories",{get:function(){var e,t=this.get("categories"),s=this.get("model.contentLocale.displayCode"),n=this.get("session.faqTags"),a=this,i=!1
return e=lunr(function(){lunr[s]&&(i=!0,this.use(lunr[s])),this.field("title"),this.field("content"),this.ref("articleId")
for(var e=0,o=t.length;e<o;e++){var r=t[e],l=r&&r.get("articles").toArray()
if(n&&"article"===n.filterType){if(a.subsetOfArray(r.get("tags"),n.tags)){if(l)for(var u=0,c=l.length;u<c;u++){var d=l[u].toJSON()
this.add({title:d.title,articleId:d.articleId,content:d.content})}}else if(l)for(var m=0,h=l.length;m<h;m++)if(a.subsetOfArray(l[m].get("tags"),n.tags)){var f=l[m].toJSON()
this.add({title:f.title,articleId:f.articleId,content:f.content})}}else if(l)for(var g=0,p=l.length;g<p;g++){var b=l[g].toJSON()
this.add({title:b.title,articleId:b.articleId,content:b.content})}}}),!("en"!==s&&!i)&&e}}),articles:Ember.computed("model.query","categories","model.category",{get:function(){var e,t,s=this,n=this.get("model.query"),a=this.get("model.category"),i=this.get("categories"),o=this.get("session.faqTags")
return this.get("r2l")&&n?i&&i.reduce(function(e,t){var s=t&&t.get("articles"),a=s&&s.toArray()
return-1!==t.get("title").indexOf(n)?a&&a.forEach(function(t){e.push(t)}):a&&a.forEach(function(t){-1===t.get("title").indexOf(n)&&-1===t.get("content").indexOf(n)||e.push(t)}),e.sortBy("position")},[])||[]:n?(t=this.get("lunrCategories"))?(e=t.search(n),i&&i.reduce(function(t,s){var n=s&&s.get("articles"),a=n&&n.toArray()
return a&&a.forEach(function(s){var n=e.findBy("ref",s.get("articleId").toString())
n&&(Ember.set(s,"score",n.score),t.push(s))}),t.sortBy("score").reverse()},[])||[]):i&&i.reduce(function(e,t){var s=t&&t.get("articles"),a=s&&s.toArray()
return a&&a.forEach(function(t){-1===t.get("title").indexOf(n)&&-1===t.get("content").indexOf(n)||e.push(t)}),e},[])||[]:o&&"article"===o.filterType?i&&i.reduce(function(e,t){var n=t&&t.get("articles"),a=n&&n.toArray()
return s.subsetOfArray(t.get("tags"),o.tags)?a&&a.forEach(function(t){e.push(t)}):a&&a.forEach(function(t){s.subsetOfArray(t.get("tags"),o.tags)&&e.push(t)}),e.sortBy("position")},[])||[]:a&&a.get("articles").sortBy("position")}}),articlesSearchOnCategory:Ember.computed("articles",{get:function(){var e=this.get("model.query"),t=this.get("model.category"),s=this.get("articles"),n=[]
return e&&t&&(n=s.filter(function(e){return e.get("categoryId")===t.get("categoryId")})),n}}),articlesSearchNotOnCategory:Ember.computed("articles",{get:function(){var e=this.get("model.query"),t=this.get("model.category"),s=this.get("articles"),n=[]
return e&&t&&(n=s.filter(function(e){return e.get("categoryId")!==t.get("categoryId")})),n}}),query:Ember.computed("model.query","session.config.content",{get:function(){var e=this.get("model.query"),t=Ember.get(this,"session.config.content.headers.faq_search_not_available")
return t?t.replace("{{query}}",e):this.get("intl").t("faqs.no_search_results",{query:e})}}),searchPH:Ember.computed("session.config.content",{get:function(){return Ember.get(this,"session.config.content.placeholders.search_field")||this.get("intl").t("faqs.faq_search")}}),actions:{selectCategory:function(e){Ember.set(this.get("hotline.ui"),"modalOpen",!1),Ember.set(this.get("model"),"category",e),this.send("toggleSearch",!1)},showCategories:function(){this.get("model.isDeepLinkFAQ")?(Ember.set(this.get("model"),"isDeepLinkFAQ",!1),this.send("gotoHome")):this.get("hotline.ui.modal")?(Ember.set(this.get("hotline.ui"),"modal",void 0),this.send("toggleSearch",!1)):(Ember.set(this.get("model"),"category",void 0),this.send("toggleSearch",!1))},onOpen:function(){},toggleChat:function(){var e=this.parentView
e&&e.send("toggleChat",this)},showArticle:function(e){Ember.set(this.get("hotline.ui"),"modal",e.toJSON()),this.get("isFaqPopupView")&&(Ember.$("html").addClass("expanded-modal"),Ember.set(this.get("hotline.ui"),"modalOpen",!0),this.postMessage({action:"expand_all"}))},toggleSearch:function(e){var t=this.get("model")
e?Ember.set(t,"openSearch",e):Ember.setProperties(t,{query:void 0,openSearch:e})},gotoHome:function(){this.get("router").send("gotoChannel")}}})
e.default=r}),define("hotline-web/components/app-categories-list/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"eZUFfWwt",block:'{"symbols":["obj","index","article","article","article"],"statements":[[7,"div"],[11,"class","h-header"],[9],[0,"\\n"],[4,"if",[[23,["model","category"]]],null,{"statements":[[0,"    "],[7,"div"],[11,"class","title fadeIn"],[9],[0,"\\n      "],[7,"div"],[11,"class","ic-back animated fadeInRight"],[3,"action",[[22,0,[]],"showCategories"]],[9],[7,"i"],[11,"class","icon icon-ic_back"],[9],[10],[0," "],[10],[0,"\\n"],[4,"if",[[23,["hotline","ui","modal"]]],null,{"statements":[[0,"        "],[7,"h1"],[11,"class","faq list-title animated fadeInLeft"],[9],[0,"\\n          "],[2," {{hotline.ui.modal.title}} "],[0,"\\n          "],[1,[27,"sanitize-html",[[23,["hotline","ui","modal","title"]],"strict"],null],false],[0,"\\n        "],[10],[0,"\\n          "],[2," <div class=\\"ic-back animated fadeInRight\\" {{action \'showArticle\'}}><i class=\\"icon icon-ic_back\\"></i> </div> "],[0,"\\n          "],[2," <div class=\\"search-wrap\\">\\n            <i class=\\"icon-ic_search\\" {{action \'showArticle\'}}></i>\\n          </div> "],[0,"\\n"]],"parameters":[]},{"statements":[[4,"unless",[[23,["model","openSearch"]]],null,{"statements":[[0,"\\n        "],[7,"h1"],[11,"class","faq list-title animated fadeInLeft"],[9],[0,"\\n          "],[2," {{model.category.title}} "],[0,"\\n          "],[1,[27,"sanitize-html",[[23,["model","category","title"]],"strict"],null],false],[0,"\\n        "],[10],[0,"\\n\\n"]],"parameters":[]},null]],"parameters":[]}],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"    "],[7,"div"],[11,"class","title fadeIn"],[9],[0,"\\n"],[4,"if",[[23,["hotline","ui","modal"]]],null,{"statements":[[0,"        "],[7,"div"],[11,"class","ic-back animated fadeInRight"],[3,"action",[[22,0,[]],"showCategories"]],[9],[7,"i"],[11,"class","icon icon-ic_back"],[9],[10],[0," "],[10],[0,"\\n        "],[7,"h1"],[11,"class","faq list-title animated fadeInLeft"],[9],[1,[23,["hotline","ui","modal","title"]],false],[10],[0,"\\n        "],[2," <div class=\\"search-wrap\\">\\n          <i class=\\"icon-ic_search\\" {{action \'showArticle\'}}></i>\\n        </div> "],[0,"\\n          "],[2," <div class=\\"ic-back animated fadeInRight\\" {{action \'showArticle\'}}><i class=\\"icon icon-ic_back\\"></i> </div> "],[0,"\\n"]],"parameters":[]},{"statements":[[0,"\\n      "],[7,"span"],[11,"class","ic-chat"],[9],[0,"\\n      "],[7,"i"],[11,"class","icon icon-ic_message"],[9],[10],[10],[0,"\\n        "],[2," <div class=\\"search-results animated fadeInRight\\">\\n          <i class=\\"search_inside_icon icon icon-ic_search\\"></i>\\n          <i class=\\"close_search_input icon icon-ic_close_small mild\\" {{action \'toggleSearch\' false}}></i>\\n          {{ui-input type=\\"text\\" value=model.query class=\\"search-input-text\\" placeholder=searchPH autofocus=true}}\\n        </div> "],[0,"\\n\\n"],[4,"unless",[[23,["model","openSearch"]]],null,{"statements":[[0,"        "],[7,"h1"],[11,"class","faq list-title animated fadeInLeft"],[9],[0,"\\n"],[4,"if",[[23,["session","config","content","headers","faq"]]],null,{"statements":[[0,"            "],[2," {{session.config.content.headers.faq}} "],[0,"\\n            "],[1,[27,"sanitize-html",[[23,["session","config","content","headers","faq"]],"strict"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"            "],[1,[27,"t",["faqs.faq_link_text"],null],false],[0,"\\n"]],"parameters":[]}],[0,"        "],[10],[0,"\\n        "],[7,"p"],[11,"class","list-desc animated fadeInRight"],[9],[0,"\\n"],[4,"if",[[23,["session","config","content","headers","faq_help"]]],null,{"statements":[[0,"            "],[2," {{session.config.content.headers.faq_help}} "],[0,"\\n            "],[1,[27,"sanitize-html",[[23,["session","config","content","headers","faq_help"]],"strict"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"            "],[1,[27,"t",["faqs.faq_help_text"],null],false],[0,"\\n"]],"parameters":[]}],[0,"        "],[10],[0,"\\n"]],"parameters":[]},null],[0,"\\n"]],"parameters":[]}],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]}],[4,"if",[[27,"not",[[23,["hotline","ui","modal"]]],null]],null,{"statements":[[0,"        "],[7,"div"],[12,"class",[28,["search-wrap ",[27,"if",[[23,["model","openSearch"]],"search"],null]," "]]],[9],[0,"\\n          "],[7,"i"],[11,"class","icon-ic_search"],[3,"action",[[22,0,[]],"toggleSearch",true]],[9],[10],[0,"\\n"],[4,"if",[[23,["model","openSearch"]]],null,{"statements":[[0,"            "],[7,"i"],[11,"class","close_search_input icon-ic_close_small mild"],[3,"action",[[22,0,[]],"toggleSearch",false]],[9],[10],[0,"\\n            "],[1,[27,"ui-input",null,[["type","value","class","placeholder","autofocus"],["text",[23,["model","query"]],"search-input-text",[23,["searchPH"]],true]]],false],[0,"\\n"]],"parameters":[]},null],[0,"        "],[10],[0,"\\n"]],"parameters":[]},null],[0,"  "],[7,"div"],[11,"class","minimize"],[9],[0,"\\n    "],[7,"i"],[11,"class","icon icon-ic_close mild"],[3,"action",[[22,0,[]],"toggleChat"]],[9],[10],[0,"\\n\\n  "],[10],[0,"\\n"],[10],[0,"\\n\\n\\n"],[7,"div"],[12,"class",[28,["body faq-body-nobg ",[27,"if",[[27,"not",[[23,["showTabs"]]],null],"no-articles"],null]]]],[9],[0,"\\n"],[4,"if",[[27,"or",[[23,["model","category"]],[27,"gte",[[23,["articles","length"]],0],null],[23,["hotline","ui","modal"]]],null]],null,{"statements":[[0,"    "],[7,"div"],[12,"class",[28,["articles-list animated fadeInRight ",[27,"if",[[23,["hidePoweredBy"]],"hide-footer"],null]]]],[9],[0,"\\n      "],[7,"ul"],[9],[0,"\\n"],[4,"if",[[27,"and",[[23,["model","query"]],[23,["model","category"]],[27,"not",[[23,["hotline","ui","modal"]]],null]],null]],null,{"statements":[[4,"if",[[23,["articlesSearchOnCategory"]]],null,{"statements":[[0,"              "],[7,"li"],[11,"class","search-result-heading"],[9],[0,"\\n                "],[7,"b"],[9],[1,[23,["articlesSearchOnCategory","length"]],false],[10],[0,"  "],[1,[27,"t",["faqSearchResults.resultsFrom"],null],false],[0,"\\n                "],[2," <b>\'{{model.category.title}}\'</b> "],[0,"\\n                "],[7,"b"],[9],[0,"\'"],[1,[27,"sanitize-html",[[23,["model","category","title"]],"strict"],null],false],[0,"\'"],[10],[0,"\\n              "],[10],[0,"\\n"],[4,"each",[[23,["articlesSearchOnCategory"]]],null,{"statements":[[0,"\\n                  "],[7,"li"],[11,"class","article"],[3,"action",[[22,0,[]],"showArticle",[22,5,[]]]],[9],[7,"img"],[11,"src","https://assetscdn-wchat.freshchat.com/static/assets/images/ic_article-3ff49d1516bf9547c1ae7591d6d41629.svg"],[9],[10],[0,"\\n                    "],[2," {{article.title}} "],[0,"\\n                    "],[1,[27,"sanitize-html",[[22,5,["title"]],"strict"],null],false],[0,"\\n                  "],[10],[0,"\\n\\n"]],"parameters":[5]},null]],"parameters":[]},null],[4,"if",[[23,["articlesSearchNotOnCategory"]]],null,{"statements":[[0,"              "],[7,"li"],[11,"class","search-result-heading"],[9],[7,"b"],[9],[1,[23,["articlesSearchNotOnCategory","length"]],false],[10],[0," "],[1,[27,"t",["faqSearchResults.resultsFromCategory"],null],false],[10],[0,"\\n"],[4,"each",[[23,["articlesSearchNotOnCategory"]]],null,{"statements":[[0,"\\n                  "],[7,"li"],[11,"class","article"],[3,"action",[[22,0,[]],"showArticle",[22,4,[]]]],[9],[7,"img"],[11,"src","https://assetscdn-wchat.freshchat.com/static/assets/images/ic_article-3ff49d1516bf9547c1ae7591d6d41629.svg"],[9],[10],[0,"\\n                  "],[2," {{article.title}} "],[0,"\\n                  "],[1,[27,"sanitize-html",[[22,4,["title"]],"strict"],null],false],[0,"\\n                "],[10],[0,"\\n\\n"]],"parameters":[4]},null]],"parameters":[]},null],[4,"if",[[27,"and",[[27,"not",[[23,["articlesSearchOnCategory"]]],null],[27,"not",[[23,["articlesSearchNotOnCategory"]]],null]],null]],null,{"statements":[[0,"              "],[7,"div"],[11,"class","empty-state"],[9],[0,"\\n                "],[7,"span"],[11,"class","empty-state-content"],[9],[0,"\\n                 "],[7,"img"],[11,"src","https://assetscdn-wchat.freshchat.com/static/assets/images/Empty_faqs-44308fb5a1b7fc4ee4672b8ae36b4394.svg"],[9],[10],[0,"\\n                 "],[1,[21,"query"],true],[0,"\\n                "],[10],[0,"\\n              "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},{"statements":[[4,"if",[[27,"or",[[27,"gt",[[23,["articles","length"]],0],null],[23,["hotline","ui","modal"]]],null]],null,{"statements":[[4,"if",[[23,["hotline","ui","modal"]]],null,{"statements":[[0,"              "],[7,"div"],[11,"class","article-content"],[9],[0,"\\n              "],[2," <p>{{{hotline.ui.modal.content}}}</p> "],[0,"\\n              "],[1,[27,"ui-modal",null,[["home"],[[27,"action",[[22,0,[]],"gotoHome"],null]]]],false],[0,"\\n            "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[4,"each",[[23,["articles"]]],null,{"statements":[[0,"\\n                "],[7,"li"],[11,"class","article"],[3,"action",[[22,0,[]],"showArticle",[22,3,[]]]],[9],[7,"img"],[11,"src","https://assetscdn-wchat.freshchat.com/static/assets/images/ic_article-3ff49d1516bf9547c1ae7591d6d41629.svg"],[9],[10],[0,"\\n                  "],[1,[27,"sanitize-html",[[22,3,["title"]],"strict"],null],false],[0,"\\n                  "],[2," {{article.title}} "],[0,"\\n                "],[10],[0,"\\n\\n"]],"parameters":[3]},null]],"parameters":[]}]],"parameters":[]},{"statements":[[4,"if",[[27,"and",[[27,"eq",[[23,["articles","length"]],0],null],[23,["model","query"]]],null]],null,{"statements":[[0,"            "],[7,"div"],[11,"class","empty-state"],[9],[0,"\\n              "],[7,"span"],[11,"class","empty-state-content"],[9],[0,"\\n               "],[7,"img"],[11,"src","https://assetscdn-wchat.freshchat.com/static/assets/images/Empty_faqs-44308fb5a1b7fc4ee4672b8ae36b4394.svg"],[9],[10],[0,"\\n               "],[1,[21,"query"],true],[0,"\\n              "],[10],[0,"\\n            "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"and",[[27,"eq",[[23,["articles","length"]],0],null],[27,"not",[[23,["model","query"]]],null]],null]],null,{"statements":[[0,"            "],[7,"div"],[11,"class","empty-state"],[9],[0,"\\n              "],[7,"span"],[11,"class","empty-state-content"],[9],[0,"\\n               "],[7,"img"],[11,"src","https://assetscdn-wchat.freshchat.com/static/assets/images/Empty_faqs-44308fb5a1b7fc4ee4672b8ae36b4394.svg"],[9],[10],[0,"\\n               "],[1,[27,"t",["faqs.no_faqs"],null],false],[0,"\\n              "],[10],[0,"\\n            "],[10],[0,"\\n        "]],"parameters":[]},null]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}],[0,"      "],[10],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"    "],[7,"div"],[12,"class",[28,["categories-list animated ",[21,"fadeInClz"]," ",[27,"if",[[23,["hidePoweredBy"]],"hide-footer"],null]]]],[9],[0,"\\n"],[4,"if",[[27,"eq",[[23,["categories","length"]],0],null]],null,{"statements":[[0,"\\n        "],[7,"span"],[11,"class","no-faqs"],[9],[0,"\\n          "],[7,"img"],[11,"src","https://assetscdn-wchat.freshchat.com/static/assets/images/Empty_faqs-44308fb5a1b7fc4ee4672b8ae36b4394.svg"],[9],[10],[0,"\\n"],[4,"if",[[23,["session","config","content","headers","faq_not_available"]]],null,{"statements":[[0,"            "],[2," {{session.config.content.headers.faq_not_available}} "],[0,"\\n            "],[1,[27,"sanitize-html",[[23,["session","config","content","headers","faq_not_available"]],"strict"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"            "],[1,[27,"t",["faqs.no_faqs"],null],false],[0,"\\n"]],"parameters":[]}],[0,"        "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["model","query"]]],null,{"statements":[[0,"          "],[7,"div"],[11,"class","empty-state"],[9],[0,"\\n                "],[7,"span"],[11,"class","empty-state-content"],[9],[0,"\\n                 "],[7,"img"],[11,"src","https://assetscdn-wchat.freshchat.com/static/assets/images/Empty_faqs-44308fb5a1b7fc4ee4672b8ae36b4394.svg"],[9],[10],[0,"\\n                 "],[1,[21,"query"],true],[0,"\\n                "],[10],[0,"\\n              "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"          "],[7,"ul"],[11,"class","clearfix"],[9],[0,"\\n"],[4,"each",[[23,["categories"]]],null,{"statements":[[4,"if",[[27,"gt",[[22,1,["articles","length"]],0],null]],null,{"statements":[[0,"                "],[7,"li"],[11,"class","category"],[3,"action",[[22,0,[]],"selectCategory",[22,1,[]]]],[9],[0,"\\n                  "],[7,"div"],[11,"class","category-inner"],[9],[0,"\\n"],[4,"if",[[22,1,["icon"]]],null,{"statements":[[0,"                      "],[7,"div"],[11,"class","category-icon"],[9],[0,"  "],[7,"img"],[12,"src",[22,1,["icon"]]],[11,"class","category-icon-img"],[9],[10],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                      "],[7,"div"],[11,"class","category-icon"],[9],[7,"span"],[12,"class",[28,["category-icon-inner ",[27,"choose-theme",[[22,1,["title"]]],null]]]],[9],[1,[27,"avatar-content",[[22,1,["title"]]],null],false],[10],[10],[0,"\\n"]],"parameters":[]}],[0,"                    "],[2," {{obj.title}} "],[0,"\\n                    "],[1,[27,"sanitize-html",[[22,1,["title"]],"strict"],null],false],[0,"\\n                  "],[10],[0,"\\n                "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[1,2]},null],[0,"          "],[10],[0,"\\n"]],"parameters":[]}]],"parameters":[]}],[0,"    "],[10],[0,"\\n"]],"parameters":[]}],[0,"  "],[1,[21,"ui-footer-note"],false],[0,"\\n"],[10],[0,"\\n"],[1,[27,"ui-tabs",null,[["active"],["faq"]]],false],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"hotline-web/components/app-categories-list/template.hbs"}})
e.default=t}),define("hotline-web/components/app-channel/component",["exports","hotline-web/mixins/direction","hotline-web/mixins/conversation","hotline-web/utils/constants","hotline-web/mixins/locale"],function(e,t,s,n,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var i=Ember.Component.extend(s.default,t.default,a.default,{classNames:["channel animated fadeInLeft"],USER:n.default.CONVERSATION.USER_TYPE.USER,channelId:Ember.computed("channel.channelId",{get:function(){return this.get("channel.channelId")}}),currentAgent:Ember.computed("lastAgentMessage.messageId",{get:function(){var e=this.get("lastAgentMessage"),t=e&&e.get("messageUserAlias")
return!!t&&this.get("agentService").getAgentInfo(t)}})})
e.default=i}),define("hotline-web/components/app-channel/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"OUf1LJVj",block:'{"symbols":[],"statements":[[4,"link-to",["channels.channel",[23,["channel","channelId"]]],[["replace","class"],[true,"channel-link"]],{"statements":[[0,"  "],[7,"div"],[12,"class",[28,["h-category-item animated ",[21,"fadeInClz"]]]],[9],[0,"\\n    "],[7,"div"],[11,"class","h-category-icon"],[9],[0,"\\n"],[4,"if",[[23,["channel","iconUrl"]]],null,{"statements":[[0,"        "],[7,"img"],[11,"class","img-circle avatar-image"],[12,"src",[23,["channel","iconUrl"]]],[9],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"        "],[7,"span"],[12,"class",[28,["category-content-wrap ",[27,"choose-theme",[[23,["channel","name"]]],null]]]],[9],[0,"\\n          "],[7,"span"],[11,"class","category-content"],[9],[1,[27,"avatar-content",[[23,["channel","name"]]],null],false],[10],[0,"\\n        "],[10],[0,"\\n"]],"parameters":[]}],[0,"    "],[10],[0,"\\n    "],[7,"div"],[12,"class",[28,["h-category-detail ",[27,"if",[[23,["lastMessage"]],"aw"],null]]]],[9],[0,"\\n      "],[7,"h1"],[11,"class","channel-name"],[9],[0,"\\n        "],[2," {{channel.name}} "],[0,"\\n        "],[1,[27,"sanitize-html",[[23,["channel","name"]],"strict"],null],false],[0,"\\n      "],[10],[0,"\\n      "],[7,"h2"],[11,"class","welcome-text"],[9],[0,"\\n"],[4,"if",[[23,["lastMessage","messageFragments"]]],null,{"statements":[[4,"if",[[23,["lastMessage","messageFragments","length"]]],null,{"statements":[[4,"if",[[27,"eq",[[23,["USER"]],[23,["lastMessage","messageUserType"]]],null]],null,{"statements":[[0,"              "],[7,"i"],[11,"class","icon-ic_reply"],[9],[10],[0,"\\n"]],"parameters":[]},null],[0,"            "],[7,"div"],[11,"class","last-msg-preview"],[9],[0,"\\n              "],[1,[27,"ui-unity-message-fragment",null,[["message","isListView"],[[23,["lastMessage"]],true]]],false],[0,"\\n            "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},{"statements":[[4,"if",[[23,["channel","welcomeMessage","messageFragments","length"]]],null,{"statements":[[0,"            "],[7,"div"],[11,"class","last-msg-preview"],[9],[0,"\\n              "],[1,[27,"ui-unity-message-fragment",null,[["message","isListView"],[[23,["channel","welcomeMessage"]],true]]],false],[0,"\\n            "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]}],[0,"      "],[10],[0,"\\n    "],[10],[0,"\\n\\n    "],[7,"div"],[11,"class","h-conv-user"],[9],[0,"\\n"],[4,"if",[[23,["lastMessage"]]],null,{"statements":[[0,"        "],[7,"div"],[11,"class","time-stamp"],[9],[1,[27,"format-date",[[23,["lastMessage","createdMillis"]],"LT"],null],false],[10],[0,"\\n        "],[7,"div"],[11,"class","h-user"],[9],[0,"\\n\\n"],[4,"if",[[27,"and",[[27,"or",[[23,["currentAgent","firstName"]],[23,["currentAgent","lastName"]]],null],[27,"not",[[23,["hideName"]]],null]],null]],null,{"statements":[[0,"            "],[7,"div"],[11,"class","u-agent-avatar"],[9],[0,"\\n"],[4,"if",[[27,"and",[[23,["currentAgent","profilePicUrl"]],[27,"not",[[23,["hidePic"]]],null]],null]],null,{"statements":[[0,"                "],[7,"span"],[11,"class","avatar-content-wrap agent-circle "],[9],[0,"\\n                  "],[7,"img"],[12,"src",[28,[[23,["currentAgent","profilePicThumbUrl"]]]]],[11,"height","20px"],[11,"width","20px"],[9],[10],[0,"\\n                "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["currentAgent","displayName"]]],null,{"statements":[[0,"                "],[7,"span"],[11,"class","avatar-content-wrap agent-circle"],[9],[0,"\\n                  "],[7,"span"],[12,"class",[28,["theme-bg ",[27,"choose-theme",[[23,["currentAgent","displayName"]]],null]]]],[9],[0,"\\n                    "],[7,"span"],[11,"class","avatar-content"],[9],[1,[27,"avatar-content",[[23,["currentAgent","displayName"]]],null],false],[10],[0,"\\n                  "],[10],[0,"\\n                "],[10],[0,"\\n              "]],"parameters":[]},null]],"parameters":[]}],[0,"            "],[10],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["unreadCount"]]],null,{"statements":[[0,"            "],[7,"div"],[11,"class","h-notify"],[9],[1,[21,"unreadCount"],false],[10],[0,"\\n"]],"parameters":[]},null],[0,"        "],[10],[0,"\\n"]],"parameters":[]},null],[0,"    "],[10],[0,"\\n  "],[10],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"hotline-web/components/app-channel/template.hbs"}})
e.default=t}),define("hotline-web/components/app-chat/component",["exports","hotline-web/mixins/validation","hotline-web/mixins/activity","hotline-web/mixins/datastore","hotline-web/mixins/sanitize","hotline-web/mixins/jwt"],function(e,t,s,n,a,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var o=Ember.Component.extend(t.default,s.default,n.default,a.default,i.default,{classNames:["h-channel"],resetFlag:!1,welcomeMessage:Ember.computed("hotline.ui.awayMessage","session.config.content.headers.channel_response.offline",{get:function(){var e=this.get("hotline.ui.awayMessage"),t=this.get("intl"),s=this.get("session.config.content.headers.channel_response.offline")
return e.length>1?e.filterBy("enabled",!0).filterBy("defaultBhr",!1).length?null:e.filterBy("defaultBhr",!0)[0].awayMessage?s?this.sanitizeHTML(s,"strict"):t.t("channel.away_message"):t.t("channel.welcome_message"):e&&e[0]&&e[0].awayMessage?s?this.sanitizeHTML(s,"strict"):t.t("channel.away_message"):t.t("channel.welcome_message")}}),headerTitle:Ember.computed("session.config.content.headers.chat",{get:function(){var e=this.get("intl"),t=this.get("session.config.content.headers.chat")
return t?this.sanitizeHTML(t,"strict"):e.t("channel.heading_title")}}),headerDescription:Ember.computed("session.config.content.headers.chat_help","welcomeMessage",{get:function(){var e=this.get("session.config.content.headers.chat_help")
return e?this.sanitizeHTML(e,"strict"):this.get("welcomeMessage")}}),didInsertElement:function(){this.get("isJWTStrictMode")&&(this.jwt.on("didAuthenticateUser",Ember.get(this,"didAuthUserCB")),this.jwt.auth.expired&&this.set("isUserAuthenticated",!1))},willDestroyElement:function(){this.get("isJWTStrictMode")&&this.jwt.off("didAuthenticateUser",Ember.get(this,"didAuthUserCB"))},isUserAuthenticated:!0,didAuthUserCB:Ember.computed({get:function(){return this.didAuthenticateUser.bind(this)}}),didAuthenticateUser:function(){this.set("isUserAuthenticated",!this.jwt.auth.expired)},actions:{toggleChat:function(){var e=this.parentView
e&&e.send("toggleChat")}}})
e.default=o}),define("hotline-web/components/app-chat/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"Fv1H4+jh",block:'{"symbols":["channel"],"statements":[[7,"div"],[11,"class","h-header"],[9],[0,"\\n     "],[7,"div"],[11,"class","title fadeIn"],[9],[0,"\\n        "],[7,"span"],[11,"class","ic-chat"],[9],[7,"i"],[11,"class","icon icon-ic_chat_icon"],[9],[10],[10],[0,"\\n        "],[7,"h1"],[11,"class","list-title"],[9],[1,[21,"headerTitle"],false],[10],[0,"\\n        "],[7,"p"],[11,"class","list-desc"],[9],[1,[21,"headerDescription"],false],[10],[0,"\\n    "],[10],[0,"\\n    "],[7,"div"],[11,"class","d_hotline minimize"],[3,"action",[[22,0,[]],"toggleChat"]],[9],[7,"i"],[11,"class","icon icon-ic_close mild"],[9],[10],[10],[0,"\\n"],[4,"unless",[[23,["isUserAuthenticated"]]],null,{"statements":[[0,"      "],[7,"div"],[11,"class","jwt-error-message"],[9],[1,[21,"jwtAuthErrorMsg"],false],[10],[0,"\\n"]],"parameters":[]},null],[10],[0,"\\n"],[7,"div"],[12,"class",[28,["body faq-body ",[27,"if",[[27,"not",[[23,["showTabs"]]],null],"no-articles"],null]]]],[9],[0,"\\n  "],[7,"div"],[12,"class",[28,["h-categories ",[27,"if",[[27,"not",[[23,["headerDescription"]]],null],"no-chat-help-text"],null]]]],[9],[0,"\\n    "],[7,"ul"],[9],[0,"\\n"],[4,"each",[[23,["displayChannels"]]],null,{"statements":[[0,"        "],[7,"li"],[9],[1,[27,"app-channel",null,[["channel","update"],[[22,1,[]],[23,["session","didMessage"]]]]],false],[10],[0,"\\n"]],"parameters":[1]},null],[0,"    "],[10],[0,"\\n    "],[1,[21,"ui-footer-note"],false],[0,"\\n  "],[10],[0,"\\n\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"hotline-web/components/app-chat/template.hbs"}})
e.default=t}),define("hotline-web/components/app-conversation-message/component",["exports","moment","hotline-web/mixins/channel","hotline-web/mixins/conversation","hotline-web/mixins/localstorage","hotline-web/utils/constants","hotline-web/mixins/actions"],function(e,t,s,n,a,i,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var r=Ember.Component.extend(o.default,n.default,s.default,a.default,{tagName:"",notification:Ember.inject.service(),pushPermissionOffered:!1,regUnicode:Ember.computed({get:function(){var e=Ember.$(this).emojiPicker
return e&&e.regUnicode}}),channelWrapedMessage:Ember.computed("channelMessage",function(){var e=[]
return e.push(this.get("channelMessage")),e}),currentAgent:Ember.computed("lastAgentMessage.messageId",{get:function(){var e=this.get("lastAgentMessage"),t=e&&e.get("messageUserAlias")
return!!t&&this.get("agentService").getAgentInfo(t)}}),messagesWithAppId:Ember.computed("messages.@each",{get:function(){var e=this.get("messages").filter(function(e){return e.get("appId")})
return e&&e.length},set:function(e,t){return t}}),messageAppIdObserver:function(){var e=this.get("messages")?this.get("messages").filter(function(e){return e.get("appId")}):null
e&&e.length>this.get("messagesWithAppId")&&(this.set("messagesWithAppId",e.length),this.messageObserver())}.observes("messages.@each.createdMillis"),messageObserver:function(){var e=this.get("lastMessage"),t=(e&&e.get("messageUserType"))===i.default.CONVERSATION.USER_TYPE.USER;(this.get("isOpen")||t)&&this.updateReadReceipt()}.observes("messagesCount").on("init"),displayMessages:Ember.computed("messages","messages.[]","messages.@each.messageUserId","messages.@each.createdMillis",{get:function(){var e=this.get("messages"),t=e&&e.toArray(),s=this.get("messagesCount"),n=s>200?s-200:0
return e?this.groupMessages(t.slice(n,s)):e}}),screenShare:Ember.computed.reads("session.fcCbstart"),groupMessages:function(e){var s=this,n=[],a=!1
return e.forEach(function(e){var o=e.get("messageFragments")&&e.get("messageFragments")[0],r=e.get("messageFragments")&&e.get("messageFragments").length
if(o&&1===r&&o.fragmentType!==i.default.CONVERSATION.FRAGMENT_TYPE.IMAGE&&e.set("emojisCount",s.getConsecutiveEmojisCount(o.content)),0===n.length){var l=[]
l.push(e),n.push(l)}else{var u=n[n.length-1],c=u[u.length-1],d=e.get("createdMillis"),m=c.get&&c.get("createdMillis"),h=m&&(0,t.default)(m).startOf("day").valueOf(),f=m&&(0,t.default)(m).endOf("day").valueOf(),g=s.get("readMillis"),p=!0
if(e.get("messageType")!==i.default.CONVERSATION.MESSAGE_TYPE.SCREEN_SHARE&&h&&f&&!(d>=h&&d<=f)){var b=[]
b.push({dayBreak:d,messageType:5e3}),n.push(b),p=!1}if(g&&!a&&g<d&&0!==e.get("messageUserType")&&e.get("messageType")!==i.default.CONVERSATION.MESSAGE_TYPE.SCREEN_SHARE){a=!0
var v=[]
v.push({messageType:5001}),n.push(v),p=!1}if(p&&c.get("messageUserType")===e.get("messageUserType")&&e.get("createdMillis")-c.get("createdMillis")<3e5&&e.get("messageType")===c.get("messageType")&&e.get("messageUserId")===c.get("messageUserId"))u.push(e)
else{var E=[]
E.push(e),n.push(E)}}}),n},getConsecutiveEmojisCount:function(e){var t,s,n=0,a=0,i=this.get("regUnicode")
return e&&(s=(t=e.replace(/\s/g,"")).match(i))&&s.length<=3&&s.length>0&&(s.forEach(function(e){n+=e.length}),n===t.length&&(a=s.length)),a},showPushOptions:Ember.computed("hotline.ui.push.subscription","hotline.ui.push.permission","pushPermissionOffered","messagesCount",{get:function(){var e=this.get("hotline.ui.push"),t=this.get("messages"),s=t&&t.findBy("messageUserType",0),n=this.get("messagesCount"),a=e&&e.subscription,i="denied"===(e&&e.permission),o=this.get("pushPermissionOffered"),r=(new Date).getTime(),l=this.getItemLS("lastPushActionMillis"),u=this.get("notification").isPushSupportedByBrowser(),c=!1
return l=parseInt(l),r-(l=isNaN(l)?0:l)>6048e5&&(c=!0),!i&&!a&&c&&!o&&n&&u&&s}}),setLastPushActionMillis:function(){!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])&&this.get("hotline.ui.isFirefoxMobile")||(this.setItemLS("lastPushActionMillis",(new Date).getTime()),this.set("pushPermissionOffered",!0))},actions:{askPermission:function(){this.get("notification").requestPermission(),this.setLastPushActionMillis()},clearPermission:function(){this.get("notification").clearPermission(),this.setLastPushActionMillis(!0)}}})
e.default=r})
define("hotline-web/components/app-conversation-message/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"IhORsMF0",block:'{"symbols":["wrapedMessage"],"statements":[[2," Welcome Message "],[0,"\\n"],[1,[27,"ui-message",null,[["model","wrapedMessage"],[[23,["channelMessage"]],[23,["channelWrapedMessage"]]]]],false],[0,"\\n\\n"],[2," Chat Messages "],[0,"\\n"],[4,"each",[[23,["displayMessages"]]],null,{"statements":[[0,"  "],[1,[27,"ui-message",null,[["wrapedMessage","model","cobrowsingAccepted","cobrowsingDenied"],[[22,1,[]],[22,1,["lastObject"]],"cobrowsingAccepted","cobrowsingDenied"]]],false],[0,"\\n"]],"parameters":[1]},null],[0,"\\n"],[2," Alert for push notification "],[0,"\\n"],[4,"if",[[27,"and",[[23,["showPushOptions"]],[27,"not",[[23,["session","config","disableNotifications"]]],null]],null]],null,{"statements":[[0,"  "],[7,"div"],[11,"class","notification-container animated fadeIn"],[9],[0,"\\n"],[4,"if",[[23,["session","config","content","headers","push_notification"]]],null,{"statements":[[0,"      "],[2," {{session.config.content.headers.push_notification}} "],[0,"\\n      "],[1,[27,"sanitize-html",[[23,["session","config","content","headers","push_notification"]],"strict"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"      "],[1,[27,"t",["conversation.push_notification.message"],null],false],[0,"\\n"]],"parameters":[]}],[0,"    "],[7,"div"],[11,"class","btn-container"],[9],[0,"\\n      "],[7,"span"],[11,"class","btn-left"],[3,"action",[[22,0,[]],"askPermission"]],[9],[0,"\\n"],[4,"if",[[23,["session","config","content","actions","push_notify_yes"]]],null,{"statements":[[0,"          "],[1,[23,["session","config","content","actions","push_notify_yes"]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"          "],[1,[27,"t",["conversation.push_notification.yes"],null],false],[0,"\\n"]],"parameters":[]}],[0,"      "],[10],[0,"\\n      "],[7,"span"],[11,"class","btn-right"],[3,"action",[[22,0,[]],"clearPermission"]],[9],[0,"\\n"],[4,"if",[[23,["session","config","content","actions","push_notify_no"]]],null,{"statements":[[0,"          "],[1,[23,["session","config","content","actions","push_notify_no"]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"          "],[1,[27,"t",["conversation.push_notification.no"],null],false],[0,"\\n"]],"parameters":[]}],[0,"      "],[10],[0,"\\n    "],[10],[0,"\\n  "],[10],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"hotline-web/components/app-conversation-message/template.hbs"}})
e.default=t}),define("hotline-web/components/app-conversation/component",["exports","hotline-web/utils/constants","hotline-web/mixins/actions","hotline-web/mixins/user","hotline-web/mixins/channel","hotline-web/mixins/conversation","hotline-web/mixins/jwt","hotline-web/mixins/sanitize","hotline-web/mixins/file-upload-helper-mixin"],function(e,t,s,n,a,i,o,r,l){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var u=Ember.Component.extend(s.default,i.default,a.default,n.default,r.default,o.default,l.default,{PLACEHOLDERS:t.default.CONVERSATION.PLACEHOLDERS,CONVERSATION:t.default.CONVERSATION,DOM_ID:t.default.DOM_ID,notification:Ember.inject.service(),hotline:Ember.inject.service(),responseTime30Mins:!1,responseTime7Days:!1,mediumEditorOptions:{toolbar:!1,imageDragging:!1,placeholder:{hideOnClick:!1},paste:{forcePlainText:!0,cleanPastedHTML:!1,cleanReplacements:[],cleanAttrs:["class","style","dir"],cleanTags:["meta"],unwrapTags:[]}},transitionDelays:100,hideHeader:Ember.computed.alias("session.config.headerProperty.hideHeader"),classNames:["h-conv"],classNameBindings:["hideHeader:hide-header"],allowRR:!0,fileId:"fileUploadInput",blockedFileTypes:t.default.ExcludedFileExtensions,isTextLimitExceeded:!1,pendingUploadTextFileObject:null,isUserAuthenticated:!0,doesUserExists:Ember.computed({get:function(){return!0},set:function(e,t){return t}}),validationMsg:Ember.computed("hotline.ui.validationMessage",{get:function(){return this.get("hotline.ui.validationMessage")}}),channelResponseTime:Ember.computed("channelId","hotline.ui.rspTime",{get:function(){var e,t,s=this.get("hotline.ui.rspTime.channelResponseTime"),n=this.get("hotline.ui.rspTime.channelResponseTimesFor7Days"),a=this.get("channelId"),i=[]
return s&&s.length&&(e=s.find(function(e){return e.channelId===a})),n&&n.length&&(t=n.find(function(e){return e.channelId===a})),e?(this.set("responseTime30Mins",!0),i=e):t&&(this.set("responseTime7Days",!0),i=t),i}}),customResponseTime:Ember.computed("channelId","hotline.ui.rspTime",{get:function(){var e,t=this.get("hotline.ui.rspTime.channelCustomResponse"),s=this.get("channelId")
return t&&t.length&&(e=t.findBy("channelId",s)),e}}),checkIfRtlIE:Ember.computed("hotline.ui.browser",{get:function(){var e=this.get("hotline.ui.browser.name")
if("rtl"===document.body.attributes.dir.value&&("Trident"===e||"Microsoft Internet Explorer"===e))return!0}}),willDestroyElement:function(){this._super.apply(this,arguments),this.$(".body .h-chat-window").unbind("scroll"),this.get("isJWTStrictMode")&&this.jwt.off("didAuthenticateUser",Ember.get(this,"didAuthUserCB"))},currentAgent:Ember.computed("lastAgentMessage.messageId",{get:function(){if(this.get("lastAgentMessage.messageType")===this.get("CONVERSATION.MESSAGE_TYPE.BOT"))return!1
var e=this.get("lastAgentMessage"),t=e&&e.get("messageUserAlias")
return!!t&&this.get("agentService").getAgentInfo(t)}}),getResponseMinutes:function(e){var t=this.get("session.config.content.headers.channel_response.online")
if(t&&t.minutes){if(t.minutes.one&&1===e)return this.replaceWithResponseTime(t.minutes.one,e)
if(t.minutes.more&&e>1)return this.replaceWithResponseTime(t.minutes.more,e)}return null},getResponseHours:function(e){var t=this.get("session.config.content.headers.channel_response.online")
if(t&&t.hours){if(t.hours.one&&1===e)return this.replaceWithResponseTime(t.hours.one,e)
if(t.hours.more&&e>1)return this.replaceWithResponseTime(t.hours.more,e)}return null},responseTime:Ember.computed("channelResponseTime",{get:function(){var e,t=this.get("channelResponseTime"),s=t&&t.responseTime,n=this.get("session.config.content.headers.channel_response.online"),a=this.get("responseTime30Mins"),i=this.get("customResponseTime")
if(i)return i.customRespMsg
if(s){if(s<3600){if((s=Math.ceil(s/60))>10){if((e=5*Math.ceil(s/5))<60){var o=this.getResponseMinutes(e)
return o||(a?this.get("intl").t("conversation.response_time.minutes",{count:e}):this.get("intl").t("conversation.response_time_7days.minutes",{count:e}))}return n&&n.hours&&n.hours.one?n.hours.one:a?this.get("intl").t("conversation.response_time.hours",{count:1}):this.get("intl").t("conversation.response_time_7days.hours",{count:1})}var r=this.getResponseMinutes(s)
return r||(a?this.get("intl").t("conversation.response_time.minutes",{count:s}):this.get("intl").t("conversation.response_time_7days.minutes",{count:s}))}if(s>=3600){if((s=Math.ceil(s/3600))<=2){var l=this.getResponseHours(s)
return l||(a?this.get("intl").t("conversation.response_time.hours",{count:s}):this.get("intl").t("conversation.response_time_7days.hours",{count:s}))}return n&&n.hours&&n.hours.more?this.replaceWithResponseTime(n.hours.more,s):a?this.get("intl").t("conversation.response_time.more"):this.get("intl").t("conversation.response_time_7days.more")}return s=Math.ceil(s),n&&n.minutes&&n.minutes.one?n.minutes.one:a?this.get("intl").t("conversation.response_time.minutes",{count:1}):this.get("intl").t("conversation.response_time_7days.minutes",{count:1})}return n&&n.default}}),conversationDescription:Ember.computed("hotline.ui.awayMessage","session.config.content.headers.channel_response.offline","responseTime",{get:function(){var e=this.get("hotline.ui.awayMessage"),t=this.get("channel.operatingHoursId"),s=e.findBy("operatingHoursId",t),n=this.get("responseTime"),a=this.get("intl"),i=this.get("session.config.content.headers.channel_response.offline")
return(!s||s&&!s.enabled)&&(s=e.findBy("defaultBhr",!0)),s&&s.awayMessage?i?this.sanitizeHTML(i,"strict"):a.t("channel.away_message"):n||null}}),createText:function(e){var t=document.createElement("p")
t.innerHTML="\r\n"===e||"\n"===e?"<br>":e,this.insertContentToEditor(t),this.set("height",this.$().height())},insertContentToEditor:function(e){var t=this.get("mediumEditor"),s=t.elements[0]
s&&(e&&s.appendChild(e),t.events.updateInput(s,{target:s,currentTarget:s}))},emptyContentEditor:function(){var e=this.get("mediumEditor"),t=e.elements[0]
t&&(t.innerHTML="",e.events.updateInput(t,{target:t,currentTarget:t})),this.set("height",this.$().height())},prepopulateText:function(){var e=this.get("hotline.ui.channelReplyText")
e&&(this.emptyContentEditor(),this.createText(e),this.set("hotline.ui.channelReplyText",null))}.observes("hotline.ui.channelReplyText"),didAuthUserCB:Ember.computed({get:function(){return this.didAuthenticateUser.bind(this)}}),didAuthenticateUser:function(){!this.hasUserToCreate||this.isJwtExpired()||this.get("session.user.alias")||this.getItemLS("isUserCreateSent")||this.send("createNewUser"),this.jwt.auth.expired?(this.disableReplyContainer(),this.send("updateMessageAsNotAuthenticated"),this.set("isUserAuthenticated",!1)):this.jwt.auth.expiredAt||this.jwt.auth.scheduled?this.enableReplyContainer():this.jwt.auth.user&&(this.enableReplyContainer(),this.send("updateMessageAsPending"),this.send("sendPendingMessagesAfterAuthenticated"),this.set("isUserAuthenticated",!0))},didInsertElement:function(){var e=this
this.get("isJWTStrictMode")&&this.jwt.on("didAuthenticateUser",Ember.get(this,"didAuthUserCB")),Ember.run.scheduleOnce("afterRender",this,function(){this.scrollToBottom(),this.send("toggleView",this),"phone"!==this.get("hotline").device()&&this.focusOnTextarea(),this.prepopulateText()}),this.$(".body .h-chat-window").bind("scroll",function(){e.set("showAgentProfile",!1)})},willMessageSent:function(){this.scrollToBottom()}.observes("session.didMessage"),didMessageSent:function(){var e=this
if(!this.get("doesUserExists")){var s=t.default.EmberModelUrl.conversations,n=this.get("session"),a=n&&n.user,i=n&&n.siteId,o=a&&a.alias,r=n&&n.token,l=this.get("notification"),u=this.get("lfds"),c=u&&u.get("messageAfter"),d={src:t.default.CONVERSATION.FETCH.USER_CREATED},m=s.url.replace("{token}",r).replace("{userAlias}",o)
c&&(d.messageAfter=c),i&&(m+="?siteId=".concat(i)),this.set("doesUserExists",!0),this.store.getRequest(s.model,m,d).then(function(t){if(!t||!t.errorCode){var s=t&&t.conversations,n=s&&s[0],a=n&&n.messages
if(a){l.playSound()
for(var i=0,o=a.length;i<o;i++)e.send("updateMessage",a[i])}}})}this.parentView&&!this.parentView.get("isOpen")&&this.parentView.send("toggleChat",this)},scrollToBottom:function(){var e=this.$(".body .h-chat-window")
e&&e.length&&e.animate({scrollTop:e[e.length-1].scrollHeight},1)},focusOnTextarea:function(){var e=this
this.$(".editable")?this.focusTextArea():Ember.run.later(this,function(){e.focusTextArea()},0)},focusTextArea:function(){var e=document.createRange(),t=window.getSelection(),s=this.$(".editable p:last-child")
s&&s[0]?(e.setStart(s[0],1),e.collapse(!0),t.removeAllRanges(),t.addRange(e)):this.get("isJWTStrictMode")&&this.jwt.auth.expired||this.$(".editable").focus()},disableReplyContainer:function(){var e=this.$(".editable")
window.getSelection().removeAllRanges(),this.$(".h-reply").css({"pointer-events":"none"}),e&&(e.blur(),e.css({"pointer-events":"none"}),e.css({"background-color":"grey"}))},enableReplyContainer:function(){var e=this.$(".editable")
this.$(".h-reply").css({"pointer-events":"auto"}),e&&(e.css({"background-color":""}),e.css({"pointer-events":"auto"}),e.focus())},replaceWithResponseTime:function(e,t){return e=(e=e.replace("{{time}}",t)).replace("{!time!}",t)},actions:{setIsTextLimitExceeded:function(e){this.set("isTextLimitExceeded",e)},onOpen:function(){var e=this
setTimeout(function(){e.scrollToBottom(),e.setFocus()},this.get("transitionDelays"))},toggleChat:function(){this.parentView&&this.parentView.send("toggleChat",this)},toggleView:function(e){this.parentView&&this.parentView.send("updateView",e)},toggleBack:function(){this.send("toggleView",void 0),this.gotoHome()},toggleAgentProfile:function(){this.set("showAgentProfile",!this.get("showAgentProfile"))},sendButtonMessage:function(e){this.send("beforeSendMessage",e)}}})
e.default=u}),define("hotline-web/components/app-conversation/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"/RqYIU+v",block:'{"symbols":[],"statements":[[7,"div"],[12,"class",[28,["h-header ",[27,"if",[[23,["showAgentProfile"]],"h-expand"],null]]]],[9],[0,"\\n  "],[7,"div"],[11,"class","title fadeIn"],[9],[0,"\\n"],[4,"if",[[27,"not-eq",[[23,["channelsCount"]],1],null]],null,{"statements":[[0,"      "],[7,"div"],[11,"class","ic-back animated fadeInRight"],[3,"action",[[22,0,[]],"toggleBack"]],[9],[7,"i"],[11,"class","icon icon-ic_back"],[9],[10],[0," "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"      "],[7,"span"],[11,"class","ic-chat"],[9],[7,"i"],[11,"class","icon icon-ic_chat_icon"],[9],[10],[10],[0,"\\n"]],"parameters":[]}],[0,"    "],[7,"h1"],[11,"class","list-title"],[9],[0,"\\n      "],[2," {{channel.name}} "],[0,"\\n      "],[1,[27,"sanitize-html",[[23,["channel","name"]],"strict"],null],false],[0,"\\n    "],[10],[0,"\\n"],[4,"if",[[27,"and",[[23,["showAgentProfile"]],[27,"not",[[23,["hideName"]]],null]],null]],null,{"statements":[[0,"      "],[7,"div"],[11,"class","fadeInUp animated"],[9],[0,"\\n        "],[7,"div"],[11,"class","u-profile-info"],[9],[0,"\\n          "],[7,"p"],[11,"class","u-agent-name"],[9],[0,"\\n            "],[2," {{currentAgent.firstName}} "],[0,"\\n            "],[1,[27,"sanitize-html",[[23,["currentAgent","firstName"]],"strict"],null],false],[0,"\\n          "],[10],[0,"\\n          "],[7,"p"],[11,"class","u-agent-designation"],[9],[0,"\\n            "],[2," {{currentAgent.title}} "],[0,"\\n            "],[4,"if",[[23,["currentAgent","title"]]],null,{"statements":[[0," "],[1,[27,"sanitize-html",[[23,["currentAgent","title"]],"strict"],null],false],[0," "]],"parameters":[]},null],[0,"\\n          "],[10],[0,"\\n"],[4,"unless",[[23,["hideBio"]]],null,{"statements":[[0,"            "],[7,"p"],[11,"class","u-agent-bio"],[9],[0,"\\n              "],[2," {{currentAgent.bio}} "],[0,"\\n              "],[4,"if",[[23,["currentAgent","bio"]]],null,{"statements":[[0," "],[1,[27,"sanitize-html",[[23,["currentAgent","bio"]],"strict"],null],false],[0," "]],"parameters":[]},null],[0,"\\n            "],[10],[0,"\\n"]],"parameters":[]},null],[0,"        "],[10],[0,"\\n"],[4,"unless",[[23,["hideBio"]]],null,{"statements":[[0,"          "],[7,"div"],[11,"class","u-social-network"],[9],[0,"\\n"],[4,"if",[[23,["currentAgent","socialInfo","twitter"]]],null,{"statements":[[0,"              "],[7,"a"],[12,"href",[28,["https://twitter.com/",[23,["currentAgent","socialInfo","twitter"]]]]],[11,"target","_blank"],[9],[0,"\\n                "],[7,"div"],[11,"class","u-twitter"],[9],[0,"\\n                "],[10],[0,"\\n              "],[10],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["currentAgent","socialInfo","facebook"]]],null,{"statements":[[0,"              "],[7,"a"],[12,"href",[28,["https://facebook.com/",[23,["currentAgent","socialInfo","facebook"]]]]],[11,"target","_blank"],[9],[0,"\\n                "],[7,"div"],[11,"class","u-fb"],[9],[0,"\\n                "],[10],[0,"\\n              "],[10],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["currentAgent","socialInfo","linkedIn"]]],null,{"statements":[[0,"              "],[7,"a"],[12,"href",[28,["https://linkedin.com/",[23,["currentAgent","socialInfo","linkedIn"]]]]],[11,"target","_blank"],[9],[0,"\\n                "],[7,"div"],[11,"class","u-linked-in"],[9],[0,"\\n                "],[10],[0,"\\n              "],[10],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["currentAgent","socialInfo","skype"]]],null,{"statements":[[0,"              "],[7,"a"],[12,"href",[28,["https://skype.com/",[23,["currentAgent","socialInfo","skype"]]]]],[11,"target","_blank"],[9],[0,"\\n                "],[7,"div"],[11,"class","u-skype"],[9],[0,"\\n                "],[10],[0,"\\n              "],[10],[0,"\\n"]],"parameters":[]},null],[0,"          "],[10],[0,"\\n"]],"parameters":[]},null],[0,"      "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["conversationDescription"]]],null,{"statements":[[0,"        "],[7,"p"],[11,"class","list-desc"],[9],[1,[21,"conversationDescription"],false],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]}],[0,"  "],[10],[0,"\\n  "],[7,"div"],[11,"class","clearboth"],[9],[10],[0,"\\n  "],[7,"div"],[11,"class","minimize"],[3,"action",[[22,0,[]],"toggleChat"]],[9],[7,"i"],[11,"class","icon icon-ic_close mild"],[9],[10],[10],[0,"\\n"],[4,"if",[[27,"and",[[27,"or",[[23,["currentAgent","firstName"]],[23,["currentAgent","lastName"]]],null],[27,"not",[[23,["hideName"]]],null]],null]],null,{"statements":[[0,"    "],[7,"div"],[11,"class","u-agent-avatar"],[3,"action",[[22,0,[]],"toggleAgentProfile"]],[9],[0,"\\n"],[4,"if",[[27,"and",[[23,["currentAgent","profilePicUrl"]],[27,"not",[[23,["hidePic"]]],null]],null]],null,{"statements":[[0,"        "],[7,"span"],[11,"class","avatar-content-wrap agent-circle "],[9],[0,"\\n          "],[7,"img"],[12,"src",[23,["currentAgent","profilePicUrl"]]],[9],[10],[0,"\\n        "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["currentAgent","displayName"]]],null,{"statements":[[0,"        "],[7,"span"],[11,"class","avatar-content-wrap agent-circle"],[9],[0,"\\n          "],[7,"span"],[12,"class",[28,["theme-bg ",[27,"choose-theme",[[23,["currentAgent","displayName"]]],null]]]],[9],[0,"\\n            "],[7,"span"],[11,"class","avatar-content"],[9],[1,[27,"avatar-content",[[23,["currentAgent","displayName"]]],null],false],[10],[0,"\\n          "],[10],[0,"\\n        "],[10],[0,"\\n      "]],"parameters":[]},null]],"parameters":[]}],[0,"    "],[10],[0,"\\n"]],"parameters":[]},null],[4,"unless",[[23,["isUserAuthenticated"]]],null,{"statements":[[0,"    "],[7,"div"],[11,"class","jwt-error-message"],[9],[1,[21,"jwtAuthErrorMsg"],false],[10],[0,"\\n"]],"parameters":[]},null],[10],[0,"\\n\\n"],[7,"div"],[12,"class",[28,["body ",[27,"if",[[27,"not",[[23,["showTabs"]]],null],"no-articles"],null]]]],[9],[0,"\\n  "],[7,"div"],[12,"class",[28,["h-chat-window ",[27,"unless",[[23,["defaultComposer"]],"button-composer"],null]," ",[27,"if",[[23,["conversation","resolvedConversation"]],"fixed-scroll"],null]]]],[12,"style",[21,"ceTextHeight"]],[9],[0,"\\n    "],[7,"div"],[12,"class",[28,["h-conv-chat animated fadeInRight ",[27,"if",[[23,["conversation","resolvedConversation"]],"csat-fix"],null]]]],[9],[0,"\\n      "],[1,[27,"app-conversation-message",null,[["model","updateReadReceipt","isOpen"],[[23,["model"]],[27,"action",[[22,0,[]],"updateReadReceipt"],null],[23,["parentView","isOpen"]]]]],false],[0,"\\n    "],[10],[0,"\\n  "],[10],[0,"\\n  "],[1,[27,"app-csat-form",null,[["model"],[[23,["model"]]]]],false],[0,"\\n"],[4,"unless",[[23,["conversation","hasPendingCsat"]]],null,{"statements":[[0,"    "],[7,"div"],[11,"class","h-reply-wrapper"],[9],[0,"\\n      "],[2," Regular Flow "],[0,"\\n      "],[7,"div"],[12,"class",[28,["h-reply ",[27,"unless",[[23,["defaultComposer"]],"hide-reply-composer"],null]," ",[27,"if",[[23,["hasFileAttachment"]],"has-file-attachment"],null]," ",[27,"if",[[23,["data","fileContent"]],"preview"],null]," ",[27,"unless",[[23,["hotline","ui","onLine"]],"is-disabled"],null]]]],[9],[0,"\\n"],[4,"if",[[27,"or",[[23,["validationMsg"]],[23,["exampletextMessage"]]],null]],null,{"statements":[[0,"          "],[7,"div"],[12,"class",[28,["h-reply-validation ",[27,"if",[[23,["validationMsg"]],"validation-error"],null]]]],[9],[0,"\\n"],[4,"if",[[23,["validationMsg"]]],null,{"statements":[[0,"                "],[7,"span"],[9],[1,[21,"validationMsg"],false],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"              "],[7,"span"],[9],[1,[21,"exampletextMessage"],false],[10],[0,"\\n"]],"parameters":[]}],[0,"          "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"          "],[1,[21,"ui-footer-note"],false],[0,"\\n"]],"parameters":[]}],[4,"if",[[23,["data","fileContent"]]],null,{"statements":[[0,"          "],[7,"div"],[12,"class",[28,["image animated zoomIn ",[27,"if",[[23,["isTextLimitExceeded"]],"text-preview-message"],null]]]],[9],[0,"\\n            "],[7,"div"],[11,"class","image-actions"],[9],[0,"\\n              "],[7,"i"],[11,"class","icon-ic_pencil edit icons"],[3,"action",[[22,0,[]],"imageSelect"]],[9],[10],[0,"\\n              "],[7,"i"],[11,"class","icon-ic_trash icons"],[3,"action",[[22,0,[]],"clearImage"]],[9],[10],[0,"\\n            "],[10],[0,"\\n            "],[7,"table"],[11,"align","center"],[11,"valign","center"],[9],[0,"\\n              "],[7,"tr"],[9],[0,"\\n                "],[7,"td"],[9],[7,"img"],[12,"src",[23,["content","data"]]],[9],[10],[10],[0,"\\n              "],[10],[0,"\\n            "],[10],[0,"\\n          "],[10],[0,"\\n"]],"parameters":[]},null],[4,"unless",[[23,["hideFileUpload"]]],null,{"statements":[[4,"if",[[23,["uploadFilesEnabled"]]],null,{"statements":[[0,"            "],[1,[27,"file-upload",null,[["value","id","blockedFileTypes"],[[23,["fileReset"]],[23,["fileId"]],[23,["blockedFileTypes"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"            "],[1,[27,"file-upload",null,[["value","id","allowedFileTypes"],[[23,["fileReset"]],[23,["fileId"]],".png,.jpg,.jpeg,.gif"]]],false],[0,"\\n"]],"parameters":[]}]],"parameters":[]},null],[4,"if",[[23,["hotline","ui","isDesktop"]]],null,{"statements":[[4,"unless",[[27,"eq",[[23,["lastAgentMessage","messageType"]],[23,["CONVERSATION","MESSAGE_TYPE","BOT"]]],null]],null,{"statements":[[4,"unless",[[23,["checkIfRtlIE"]]],null,{"statements":[[0,"              "],[7,"a"],[11,"href","#"],[3,"action",[[22,0,[]],"insertEmoji"]],[9],[0,"\\n                "],[7,"div"],[12,"class",[28,["h-reply-smiley ",[27,"if",[[23,["isTextLimitExceeded"]],"text-preview-message"],null]]]],[9],[7,"i"],[11,"class","icon-ic_smiley"],[9],[10],[10],[0,"\\n              "],[10],[0,"\\n"]],"parameters":[]},null],[4,"unless",[[23,["hideFileUpload"]]],null,{"statements":[[0,"              "],[7,"a"],[11,"href","#"],[3,"action",[[22,0,[]],"imageSelect"]],[9],[0,"\\n                "],[7,"div"],[12,"class",[28,[[27,"if",[[23,["checkIfRtlIE"]],"h-reply-attach no-emoji","h-reply-attach"],null]," ",[27,"if",[[23,["isTextLimitExceeded"]],"text-preview-message"],null]]]],[9],[7,"i"],[11,"class","icon-ic_attachment"],[9],[10],[10],[0,"\\n              "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null]],"parameters":[]},{"statements":[[0,"          "],[7,"a"],[11,"class","h-reply-container"],[11,"href","#"],[3,"action",[[22,0,[]],"beforeSendMessage"]],[9],[0,"\\n            "],[7,"div"],[11,"class","h-reply-send"],[9],[7,"i"],[11,"class","icon-ic_send"],[9],[10],[10],[0,"\\n          "],[10],[0,"\\n"],[4,"unless",[[23,["hideFileUpload"]]],null,{"statements":[[0,"            "],[7,"a"],[11,"href","#"],[3,"action",[[22,0,[]],"imageSelect"]],[9],[0,"\\n              "],[7,"div"],[11,"class","h-reply-attach"],[9],[7,"i"],[11,"class","icon-ic_attachment"],[9],[10],[10],[0,"\\n            "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]}],[4,"if",[[23,["isTextLimitExceeded"]]],null,{"statements":[[0,"        "],[7,"div"],[12,"class",[28,["size-exceed-msg position-message-over ",[27,"if",[[23,["disableHugeMessageSending"]],"disable-send"],null]]]],[9],[0,"\\n"],[4,"if",[[23,["disableHugeMessageSending"]]],null,{"statements":[[0,"            "],[1,[27,"t",["size_exceeded_msg.infoMsgSprout"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"            "],[1,[27,"t",["size_exceeded_msg.infoMsg"],null],true],[0,"\\n"]],"parameters":[]}],[0,"        "],[10],[0,"\\n"]],"parameters":[]},null],[0,"        "],[1,[27,"ui-unity-medium-editor",null,[["mediumEditor","options","onBlur","onFocus","emojiSupport","onKeyDown","content","isValidationError","exceedAction","id"],[[23,["mediumEditor"]],[23,["mediumEditorOptions"]],[27,"action",[[22,0,[]],"focusOut"],null],[27,"action",[[22,0,[]],"focusIn"],null],true,[27,"action",[[22,0,[]],"keyPressDown"],null],[23,["content"]],[23,["validationMsg"]],[27,"action",[[22,0,[]],"setIsTextLimitExceeded"],null],[23,["DOM_ID","appConversationEditor"]]]]],false],[0,"\\n"],[4,"if",[[27,"eq",[[23,["data","fileType"]],2],null]],null,{"statements":[[0,"          "],[7,"div"],[11,"class","file-meta"],[9],[0,"\\n            "],[7,"span"],[11,"class","file-name"],[9],[1,[27,"sanitize-html",[[23,["data","fileData","name"]],"strict"],null],false],[10],[0,"\\n            "],[7,"span"],[11,"class","close"],[3,"action",[[22,0,[]],"clearImage"]],[9],[7,"i"],[11,"class","icon-ic_close"],[9],[10],[10],[0,"\\n          "],[10],[0,"\\n"]],"parameters":[]},null],[0,"      "],[10],[0,"\\n      "],[2," Button Composer Flow "],[0,"\\n"],[4,"unless",[[23,["defaultComposer"]]],null,{"statements":[[0,"        "],[1,[27,"app-reply-composer",null,[["message","sendButtonMessage"],[[23,["lastMessage"]],[27,"action",[[22,0,[]],"sendButtonMessage"],null]]]],false],[0,"\\n"]],"parameters":[]},null],[0,"    "],[10],[0,"\\n"]],"parameters":[]},null],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"hotline-web/components/app-conversation/template.hbs"}})
e.default=t}),define("hotline-web/components/app-csat-form/component",["exports","hotline-web/utils/constants","hotline-web/mixins/conversation","hotline-web/mixins/channel","hotline-web/mixins/datastore","hotline-web/mixins/jwt","hotline-web/mixins/message"],function(e,t,s,n,a,i,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var r=Ember.Component.extend(s.default,n.default,a.default,i.default,o.default,{tagName:"",feedbackSubmitted:!1,showSubmitButton:!0,disableCsatVoting:!1,paramsOfPendingCsat:{flag:null,cross:null},isJwtAuthInProgressing:Ember.computed("paramsOfPendingCsat.flag","paramsOfPendingCsat.cross",function(){return null!=this.get("paramsOfPendingCsat.flag")&&null!=this.get("paramsOfPendingCsat.cross")}),enableSubmitButtonForResolvedConversationNo:Ember.computed("showSubmitButton","csatRatings.comment",function(){return this.get("showSubmitButton")&&!Ember.isBlank(this.get("csatRatings.comment"))}),enableSubmitButtonForResolvedConversationYes:Ember.computed("showSubmitButton","csatRatings.star",function(){return this.get("showSubmitButton")&&this.get("csatRatings.star")>0}),csatComments:Ember.computed("session.config.content.placeholders.csat_reply",{get:function(){return this.get("session.config.content.placeholders.csat_reply")||this.get("intl").t("csat.enter_comments")}}),csatRatings:Ember.computed({get:function(){return this.get("store").createRecord("csatValues",{star:0,comment:""})}}),ratingObserve:function(){var e=this.get("csatRatings"),t=this.get("rating_value")
Ember.set(e,"star",t)}.observes("rating_value"),showCsat:Ember.computed("conversation.hasPendingCsat",{get:function(){var e=this.get("conversation"),t=e&&e.get("hasPendingCsat"),s=this.get("hotline.ui.config"),n=s&&s.csatSettings,a=(new Date).getTime(),i=e&&e.get("csat"),o=n&&n.maximumUserSurveyViewHours
return n&&n.userCsatViewTimer?!!i&&(a-i.get("initiated")<60*o*60*1e3?t:(e&&(Ember.set(e,"hasPendingCsat",!1),Ember.set(e,"csat",null),this.send("save")),!1)):t}}),didInsertElement:function(){this.get("isJWTStrictMode")&&this.jwt.on("didAuthenticateUser",Ember.get(this,"didAuthUserCB"))},willDestroyElement:function(){this.get("isJWTStrictMode")&&this.jwt.off("didAuthenticateUser",Ember.get(this,"didAuthUserCB"))},didAuthUserCB:Ember.computed({get:function(){return this.didAuthenticateUser.bind(this)}}),didAuthenticateUser:function(){this.set("disableCsatVoting",!this.jwt.auth.user),this.get("isJwtAuthInProgressing")&&(this.jwt.auth.user&&this.send("submitCsatRating",this.get("paramsOfPendingCsat.flag"),this.get("paramsOfPendingCsat.cross")),this.resetParamsOfPendingCsat())},resetParamsOfPendingCsat:function(){this.set("paramsOfPendingCsat.flag",null),this.set("paramsOfPendingCsat.cross",null)},canVoteForCsat:function(){return this.jwt.auth.expiredAt||this.jwt.auth.scheduled||this.jwt.auth.expired?(this.set("disableCsatVoting",!0),!1):!this.isJwtExpired()||(this.initiateSendingMode(),this.set("disableCsatVoting",!0),!1)},actions:{setCsatStars:function(e){var t=this.get("csatRatings")
Ember.set(t,"star",e)},submitCsatRating:function(e){var s=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1]
if(this.get("isJWTStrictMode")&&!this.canVoteForCsat())return this.set("paramsOfPendingCsat.flag",e),void this.set("paramsOfPendingCsat.cross",n)
this.set("showSubmitButton",!1)
var a=this.get("conversation"),i=this.get("csatRatings"),o=a.get("csat"),r=this.get("session"),l=r&&r.siteId,u=this.get("lfds"),c=t.default.EmberModelUrl.csatRating.url.replace("{token}",r.token).replace("{conversationId}",a.get("conversationId")).replace("{csatId}",o.get("csatId")),d={csatResponse:{issueResolved:e}}
n||(Ember.set(d.csatResponse,"stars",i.get("star")),Ember.set(d.csatResponse,"response",i.get("comment"))),l&&(c+="?siteId=".concat(l)),Ember.$.ajax({type:"POST",url:c,data:JSON.stringify(d),dataType:"json",contentType:"application/json"}).then(function(e){s.set("showSubmitButton",!0),e&&e.errorCode||(n?(Ember.set(a,"hasPendingCsat",!1),Ember.set(a,"resolvedConversationYes",!1),Ember.set(a,"resolvedConversationNo",!1),Ember.set(i,"star",0),Ember.set(i,"comment",""),u.save(),Ember.set(a,"csat",null)):(s.set("feedbackSubmitted",!0),setTimeout(function(){s.set("feedbackSubmitted",!1),Ember.set(a,"hasPendingCsat",!1),Ember.set(a,"resolvedConversationYes",!1),Ember.set(a,"resolvedConversationNo",!1),Ember.set(i,"star",0),Ember.set(i,"comment",""),u.save(),Ember.set(a,"csat",null)},1e3)),s.resetParamsOfPendingCsat())},function(e){s.set("showSubmitButton",!0),s.logger.log(e),Ember.set(i,"star",0),Ember.set(i,"comment",""),s.set("feedbackSubmitted",!1),Ember.set(a,"hasPendingCsat",!1),Ember.set(a,"resolvedConversationYes",!1),Ember.set(a,"resolvedConversationNo",!1),Ember.set(a,"csat",null),s.resetParamsOfPendingCsat(),u.save()})},csatVotingNo:function(){this.get("isJWTStrictMode")&&this.canVoteForCsat(),this.get("conversation").set("resolvedConversationNo",!0)},csatVotingYes:function(){this.get("isJWTStrictMode")&&this.canVoteForCsat(),this.get("conversation").set("resolvedConversationYes",!0)}}})
e.default=r}),define("hotline-web/components/app-csat-form/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"rRSD/AAM",block:'{"symbols":[],"statements":[[4,"if",[[23,["conversation","resolvedConversationYes"]]],null,{"statements":[[0,"  "],[7,"div"],[11,"class","vote-yes-outer"],[9],[0,"\\n    "],[7,"div"],[11,"class","vote-yes-wrapper"],[9],[0,"\\n      "],[7,"div"],[11,"class","vote-yes"],[9],[0,"\\n      "],[7,"div"],[11,"class","minimize"],[3,"action",[[22,0,[]],"submitCsatRating",true,true]],[9],[1,[27,"t",["csat.skip"],null],false],[10],[0,"\\n      "],[7,"div"],[11,"class","comment-header"],[9],[0,"\\n        "],[7,"span"],[9],[0,"\\n"],[4,"if",[[23,["session","config","content","headers","csat_yes_question"]]],null,{"statements":[[0,"            "],[1,[27,"sanitize-html",[[23,["session","config","content","headers","csat_yes_question"]],"strict"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["conversation","csat","question"]]],null,{"statements":[[0,"              "],[1,[27,"sanitize-html",[[23,["conversation","csat","question"]],"strict"],null],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]}],[0,"        "],[10],[0,"\\n      "],[10],[0,"\\n      "],[7,"div"],[11,"class","rate"],[9],[0,"\\n        "],[7,"fieldset"],[11,"class","rating"],[9],[0,"\\n          "],[1,[27,"radio-button",null,[["id","name","value","group","onchange"],["star5","rating","5",[23,["csatRatings","star"]],[27,"action",[[22,0,[]],"setCsatStars"],null]]]],false],[7,"label"],[11,"for","star5"],[11,"title",""],[9],[10],[0,"\\n          "],[1,[27,"radio-button",null,[["id","name","value","group","onchange"],["star4","rating","4",[23,["csatRatings","star"]],[27,"action",[[22,0,[]],"setCsatStars"],null]]]],false],[7,"label"],[11,"for","star4"],[11,"title",""],[9],[10],[0,"\\n          "],[1,[27,"radio-button",null,[["id","name","value","group","onchange"],["star3","rating","3",[23,["csatRatings","star"]],[27,"action",[[22,0,[]],"setCsatStars"],null]]]],false],[7,"label"],[11,"for","star3"],[11,"title",""],[9],[10],[0,"\\n          "],[1,[27,"radio-button",null,[["id","name","value","group","onchange"],["star2","rating","2",[23,["csatRatings","star"]],[27,"action",[[22,0,[]],"setCsatStars"],null]]]],false],[7,"label"],[11,"for","star2"],[11,"title",""],[9],[10],[0,"\\n          "],[1,[27,"radio-button",null,[["id","name","value","group","onchange"],["star1","rating","1",[23,["csatRatings","star"]],[27,"action",[[22,0,[]],"setCsatStars"],null]]]],false],[7,"label"],[11,"for","star1"],[11,"title",""],[9],[10],[0,"\\n        "],[10],[0,"\\n      "],[10],[0,"\\n\\n      "],[7,"div"],[11,"class","comment"],[9],[0,"\\n        "],[7,"div"],[9],[0,"\\n"],[4,"if",[[23,["conversation","csat","mobileUserCommentsAllowed"]]],null,{"statements":[[0,"            "],[1,[27,"textarea",null,[["value","class","placeholder","rows","autofocus","maxlength"],[[23,["csatRatings","comment"]],"csat-comments",[23,["csatComments"]],"3",true,200]]],false],[0,"\\n"]],"parameters":[]},null],[0,"        "],[10],[0,"\\n      "],[10],[0,"\\n\\n      "],[7,"div"],[11,"class","submit-rating"],[9],[0,"\\n"],[4,"if",[[23,["feedbackSubmitted"]]],null,{"statements":[[0,"          "],[7,"span"],[11,"class","thank-you"],[9],[0,"\\n"],[4,"if",[[23,["session","config","content","headers","csat_thankyou"]]],null,{"statements":[[0,"              "],[1,[27,"sanitize-html",[[23,["session","config","content","headers","csat_thankyou"]],"strict"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"              "],[1,[27,"t",["csat.thank_you"],null],false],[0,"\\n"]],"parameters":[]}],[0,"          "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"and",[[23,["enableSubmitButtonForResolvedConversationYes"]],[27,"not",[[23,["disableCsatVoting"]]],null]],null]],null,{"statements":[[0,"            "],[7,"span"],[11,"class","btn submit"],[3,"action",[[22,0,[]],"submitCsatRating",true]],[9],[0,"\\n"],[4,"if",[[23,["session","config","content","actions","csat_submit"]]],null,{"statements":[[0,"                "],[1,[27,"sanitize-html",[[23,["session","config","content","actions","csat_submit"]],"strict"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                "],[1,[27,"t",["csat.submit"],null],false],[0,"\\n"]],"parameters":[]}],[0,"            "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"            "],[7,"span"],[11,"class","btn submit disabled"],[9],[0,"\\n"],[4,"if",[[23,["isJwtAuthInProgressing"]]],null,{"statements":[[0,"                "],[1,[27,"t",["common.button.submitting"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["session","config","content","actions","csat_submit"]]],null,{"statements":[[0,"                "],[1,[27,"sanitize-html",[[23,["session","config","content","actions","csat_submit"]],"strict"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                "],[1,[27,"t",["csat.submit"],null],false],[0,"\\n              "]],"parameters":[]}]],"parameters":[]}],[0,"            "],[10],[0,"\\n"]],"parameters":[]}]],"parameters":[]}],[0,"      "],[10],[0,"\\n    "],[10],[0,"\\n    "],[10],[0,"\\n    "],[7,"div"],[11,"class","dark-bg  animated fadeIn"],[9],[0,"\\n    "],[10],[0,"\\n  "],[10],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[4,"if",[[23,["conversation","resolvedConversationNo"]]],null,{"statements":[[0,"    "],[7,"div"],[11,"class","vote-yes-outer"],[9],[0,"\\n      "],[7,"div"],[11,"class","vote-yes-wrapper"],[9],[0,"\\n        "],[7,"div"],[11,"class","vote-yes"],[9],[0,"\\n        "],[7,"div"],[11,"class","minimize"],[3,"action",[[22,0,[]],"submitCsatRating",false,true]],[9],[1,[27,"t",["csat.skip"],null],false],[10],[0,"\\n        "],[7,"div"],[11,"class","comment-header"],[9],[0,"\\n          "],[7,"span"],[9],[0,"\\n"],[4,"if",[[23,["session","config","content","headers","csat_no_question"]]],null,{"statements":[[0,"              "],[1,[27,"sanitize-html",[[23,["session","config","content","headers","csat_no_question"]],"strict"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"              "],[1,[27,"t",["csat.csat_no_comment"],null],false],[0,"\\n"]],"parameters":[]}],[0,"          "],[10],[0,"\\n        "],[10],[0,"\\n        "],[7,"div"],[11,"class","comment"],[9],[0,"\\n          "],[7,"div"],[9],[0,"\\n            "],[1,[27,"textarea",null,[["value","class","placeholder","rows","autofocus","maxlength"],[[23,["csatRatings","comment"]],"csat-comments",[23,["csatComments"]],"3",true,200]]],false],[0,"\\n          "],[10],[0,"\\n        "],[10],[0,"\\n        "],[7,"div"],[11,"class","submit-rating"],[9],[0,"\\n"],[4,"if",[[23,["feedbackSubmitted"]]],null,{"statements":[[0,"            "],[7,"span"],[11,"class","thank-you"],[9],[0,"\\n"],[4,"if",[[23,["session","config","content","headers","csat_thankyou"]]],null,{"statements":[[0,"                "],[1,[27,"sanitize-html",[[23,["session","config","content","headers","csat_thankyou"]],"strict"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                "],[1,[27,"t",["csat.thank_you"],null],false],[0,"\\n"]],"parameters":[]}],[0,"            "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"and",[[23,["enableSubmitButtonForResolvedConversationNo"]],[27,"not",[[23,["disableCsatVoting"]]],null]],null]],null,{"statements":[[0,"              "],[7,"span"],[11,"class","btn submit"],[3,"action",[[22,0,[]],"submitCsatRating",false]],[9],[0,"\\n"],[4,"if",[[23,["session","config","content","actions","csat_submit"]]],null,{"statements":[[0,"                  "],[1,[27,"sanitize-html",[[23,["session","config","content","actions","csat_submit"]],"strict"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                  "],[1,[27,"t",["csat.submit"],null],false],[0,"\\n"]],"parameters":[]}],[0,"              "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                "],[7,"span"],[11,"class","btn submit disabled"],[9],[0,"\\n"],[4,"if",[[23,["isJwtAuthInProgressing"]]],null,{"statements":[[0,"                  "],[1,[27,"t",["common.button.submitting"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["session","config","content","actions","csat_submit"]]],null,{"statements":[[0,"                  "],[1,[27,"sanitize-html",[[23,["session","config","content","actions","csat_submit"]],"strict"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                  "],[1,[27,"t",["csat.submit"],null],false],[0,"\\n                "]],"parameters":[]}]],"parameters":[]}],[0,"              "],[10],[0,"\\n"]],"parameters":[]}]],"parameters":[]}],[0,"        "],[10],[0,"\\n      "],[10],[0,"\\n      "],[10],[0,"\\n      "],[7,"div"],[11,"class","dark-bg  animated fadeIn"],[9],[0,"\\n      "],[10],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["showCsat"]]],null,{"statements":[[0,"    "],[7,"div"],[11,"class","csat-rating"],[9],[0,"\\n      "],[7,"div"],[11,"class","csat-inner"],[9],[0,"\\n"],[4,"if",[[23,["feedbackSubmitted"]]],null,{"statements":[[0,"          "],[7,"span"],[11,"class","thank-you"],[9],[0,"\\n"],[4,"if",[[23,["session","config","content","headers","csat_thankyou"]]],null,{"statements":[[0,"              "],[1,[27,"sanitize-html",[[23,["session","config","content","headers","csat_thankyou"]],"strict"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"              "],[1,[27,"t",["csat.thank_you"],null],false],[0,"\\n"]],"parameters":[]}],[0,"          "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"          "],[7,"span"],[11,"class","text"],[9],[0,"\\n"],[4,"if",[[23,["session","config","content","headers","csat_question"]]],null,{"statements":[[0,"              "],[1,[27,"sanitize-html",[[23,["session","config","content","headers","csat_question"]],"strict"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"              "],[1,[27,"t",["csat.csat_question"],null],false],[0,"\\n"]],"parameters":[]}],[0,"          "],[10],[0,"\\n          "],[7,"div"],[11,"class","btn-csat-wrapper"],[9],[0,"\\n            "],[7,"span"],[11,"class","btn-csat"],[3,"action",[[22,0,[]],"csatVotingNo"]],[9],[0,"\\n"],[4,"if",[[23,["session","config","content","actions","csat_no"]]],null,{"statements":[[0,"                "],[1,[27,"sanitize-html",[[23,["session","config","content","actions","csat_no"]],"strict"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                "],[1,[27,"t",["conversation.push_notification.no"],null],false],[0,"\\n"]],"parameters":[]}],[0,"            "],[10],[0,"\\n            "],[7,"span"],[11,"class","btn-csat btn-csat-yes"],[3,"action",[[22,0,[]],"csatVotingYes"]],[9],[0,"\\n"],[4,"if",[[23,["session","config","content","actions","csat_yes"]]],null,{"statements":[[0,"                "],[1,[27,"sanitize-html",[[23,["session","config","content","actions","csat_yes"]],"strict"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                "],[1,[27,"t",["csat.yes"],null],false],[0,"\\n"]],"parameters":[]}],[0,"            "],[10],[0,"\\n          "],[10],[0,"\\n"]],"parameters":[]}],[0,"        "],[10],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"hotline-web/components/app-csat-form/template.hbs"}})
e.default=t}),define("hotline-web/components/app-loader/component",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.Component.extend({classNames:["app-loader"]})
e.default=t}),define("hotline-web/components/app-loader/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"JxY59Cos",block:'{"symbols":[],"statements":[[7,"div"],[11,"class","loader-frame"],[9],[0,"\\n  "],[7,"div"],[11,"class","loader-wrap"],[9],[0,"\\n    "],[7,"div"],[11,"class","lds-ring"],[9],[7,"div"],[9],[10],[7,"div"],[9],[10],[7,"div"],[9],[10],[7,"div"],[9],[10],[10],[0,"\\n    "],[7,"h4"],[11,"class","loader-text"],[9],[1,[27,"t",["help_text.loading"],null],false],[10],[0,"\\n  "],[10],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"hotline-web/components/app-loader/template.hbs"}})
e.default=t}),define("hotline-web/components/app-reply-composer/component",["exports","hotline-web/utils/constants","hotline-web/mixins/conversation","hotline-web/mixins/actions"],function(e,t,s,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var a=Ember.Component.extend(s.default,n.default,{PLACEHOLDERS:t.default.CONVERSATION.PLACEHOLDERS,CONVERSATION:t.default.CONVERSATION,DOM_ID:t.default.DOM_ID,classNames:["h-reply-button"],mediumEditorOptions:{toolbar:!1,imageDragging:!1,placeholder:{hideOnClick:!1},paste:{forcePlainText:!0,cleanPastedHTML:!1,cleanReplacements:[],cleanAttrs:["class","style","dir"],cleanTags:["meta"],unwrapTags:[]}},checkIfRtlIE:Ember.computed("hotline.ui.browser",{get:function(){var e=this.get("hotline.ui.browser.name")
if("rtl"===document.body.attributes.dir.value&&("Trident"===e||"Microsoft Internet Explorer"===e))return!0}}),customButtonComposer:Ember.computed({get:function(){var e=this,t=this.getReplyFragments()
return t&&t.filter(function(t){return t.fragmentType!==e.CONVERSATION.FRAGMENT_TYPE.TEXT?t:null})}}),customTextComposer:Ember.computed({get:function(){var e=this,t=this.getReplyFragments()
return t&&t.filter(function(t){return t.fragmentType===e.CONVERSATION.FRAGMENT_TYPE.TEXT?t:null})}}),getReplyFragments:function(){var e=this.get("message")
if(e&&e.get("replyFragments")&&e.get("replyFragments").length>0){var t=e.get("replyFragments")
return t.length>0?t[0].fragments:null}},didInsertElement:function(){var e=this
Ember.run.later(function(){e.setChatWindowHeight(!1)})},willDestroyElement:function(){this.setChatWindowHeight(!0)},actions:{sendButtonMessage:function(e){this.sendButtonMessage(e)},keyPressDownLocal:function(e,t){switch(t.which){case 13:t.preventDefault(),this.sendButtonMessage()}}}})
e.default=a}),define("hotline-web/components/app-reply-composer/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"CC3fzqP+",block:'{"symbols":["button"],"statements":[[1,[21,"ui-footer-note"],false],[0,"\\n"],[4,"if",[[23,["customButtonComposer"]]],null,{"statements":[[0,"  "],[7,"div"],[11,"class","button-region"],[9],[0,"\\n"],[4,"each",[[23,["customButtonComposer"]]],null,{"statements":[[0,"      "],[1,[27,"ui-button-composer",null,[["sendButtonMessage","model"],[[27,"action",[[22,0,[]],[23,["sendButtonMessage"]]],null],[22,1,[]]]]],false],[0,"\\n"]],"parameters":[1]},null],[0,"  "],[10],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["customTextComposer"]]],null,{"statements":[[0,"  "],[7,"div"],[12,"class",[28,["h-reply h-custom-composer ",[27,"unless",[[23,["hotline","ui","onLine"]],"is-disabled"],null]]]],[9],[0,"\\n"],[4,"if",[[23,["hotline","ui","isDesktop"]]],null,{"statements":[[4,"unless",[[23,["checkIfRtlIE"]]],null,{"statements":[[0,"    "],[7,"a"],[11,"href","#"],[3,"action",[[22,0,[]],"insertEmoji"]],[9],[0,"\\n      "],[7,"div"],[11,"class","h-reply-smiley"],[9],[7,"i"],[11,"class","ic-smiley"],[9],[10],[10],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},{"statements":[[0,"    "],[7,"a"],[12,"class",[28,["h-reply-container ",[27,"unless",[[23,["showPlaceholderText"]],"show-highlight"],null]]]],[11,"href","#"],[3,"action",[[22,0,[]],"beforeSendMessage"]],[9],[0,"\\n      "],[7,"div"],[11,"class","h-reply-send"],[9],[7,"i"],[11,"class","ic-send"],[9],[10],[10],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]}],[0,"    "],[1,[27,"ui-unity-medium-editor",null,[["mediumEditor","options","onBlur","onFocus","emojiSupport","onKeyDown","content","id"],[[23,["mediumEditor"]],[23,["mediumEditorOptions"]],"focusOut","focusIn",true,"keyPressDownLocal",[23,["content"]],[23,["DOM_ID","appReplyComposerEditor"]]]]],false],[0,"\\n  "],[10],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"hotline-web/components/app-reply-composer/template.hbs"}})
e.default=t}),define("hotline-web/components/app-reply-dialog/component",["exports","hotline-web/mixins/actions","hotline-web/utils/constants","hotline-web/mixins/user","hotline-web/mixins/conversation"],function(e,t,s,n,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var i=Ember.Component.extend(t.default,a.default,n.default,{PLACEHOLDERS:s.default.CONVERSATION.PLACEHOLDERS,CONVERSATION:s.default.CONVERSATION,DOM_ID:s.default.DOM_ID,transitionDelays:100,toggleDelays:500,mediumEditorOptions:{toolbar:!1,imageDragging:!1,placeholder:{hideOnClick:!1},paste:{forcePlainText:!0,cleanPastedHTML:!1,cleanReplacements:[],cleanAttrs:["class","style","dir"],cleanTags:["meta"],unwrapTags:[]}},fileId:"fileUploadInputDialog",classNames:["d_preview preview-container"],classNameBindings:["showNotify:appear","hideNotify:disappear","l2r:l2r","hideChatButton:hideChatButton"],hideChatButton:Ember.computed.alias("session.config.headerProperty.hideChatButton"),isTextLimitExceeded:!1,message:Ember.computed("hotline.ui.lastAgentMessage",{get:function(){return this.get("hotline.ui.lastAgentMessage")}}),channelId:Ember.computed("message.channelId",{get:function(){return this.get("message.channelId")}}),currentAgent:Ember.computed("message.channelId","message.messageUserAlias",{get:function(){var e=this.get("message.messageUserAlias")
return!!e&&this.get("agentService").getAgentInfo(e)}}),checkIfRtlIE:Ember.computed("hotline.ui.browser",{get:function(){var e=this.get("hotline.ui.browser.name")
if("rtl"===document.body.attributes.dir.value&&("Trident"===e||"Microsoft Internet Explorer"===e))return!0}}),didInsertElement:function(){var e=this
setTimeout(function(){e.set("showNotify",!0)},this.get("toggleDelays"))},willDestroyElements:function(){this.set("showNotify",!1),this.set("hideNotify",!1)},didReadReceiptSent:function(){this.set("hotline.ui.lockAgentMessage",!0)},didMessageSent:function(){this.send("closeNotification",!0)},willMessageSent:function(){var e=this
this.set("hideNotify",!0),setTimeout(function(){e.parentView.send("toggleNotification",s.default.DialogState.CLOSE)},1e3)},actions:{setIsTextLimitExceeded:function(e){this.set("isTextLimitExceeded",e)},closeNotification:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=Ember.get(this,"hotline.ui")
this.set("hideNotify",!0),setTimeout(function(){t?e.openChatWidget():(e.parentView.send("closeNotification"),e.parentView.send("toggleDialog",!1)),Ember.set(s,"lastAgentMessage",void 0)},this.get("toggleDelays"))},openChatWidget:function(e){var t=this
this.openChatWidget(),e&&Ember.run.later(function(){t.setChatWindowHeight(!1)},1)}}})
e.default=i}),define("hotline-web/components/app-reply-dialog/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"smkbykct",block:'{"symbols":[],"statements":[[7,"div"],[11,"class","preview-wrapper"],[9],[0,"\\n  "],[7,"div"],[12,"class",[28,["preview-bubble ",[27,"if",[[23,["hideName"]],"hide-pic"],null]]]],[9],[0,"\\n"],[4,"if",[[27,"and",[[23,["currentAgent","displayName"]],[27,"not",[[23,["hideName"]]],null]],null]],null,{"statements":[[0,"      "],[7,"div"],[11,"class","u-agent-avatar"],[3,"action",[[22,0,[]],"openChatWidget"]],[9],[0,"\\n"],[4,"if",[[27,"and",[[23,["currentAgent","profilePicUrl"]],[27,"not",[[23,["hidePic"]]],null]],null]],null,{"statements":[[0,"          "],[7,"span"],[11,"class","avatar-content-wrap agent-circle "],[9],[0,"\\n            "],[7,"img"],[12,"src",[23,["currentAgent","profilePicUrl"]]],[9],[10],[0,"\\n          "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"          "],[7,"span"],[11,"class","avatar-content-wrap agent-circle"],[9],[0,"\\n            "],[7,"span"],[12,"class",[28,["theme-bg ",[27,"choose-theme",[[23,["currentAgent","displayName"]]],null]]]],[9],[0,"\\n              "],[7,"span"],[11,"class","avatar-content"],[9],[1,[27,"avatar-content",[[23,["currentAgent","displayName"]]],null],false],[10],[0,"\\n            "],[10],[0,"\\n          "],[10],[0,"\\n"]],"parameters":[]}],[0,"      "],[10],[0,"\\n"]],"parameters":[]},null],[0,"    "],[7,"div"],[11,"class","d_hotline_blue minimize"],[3,"action",[[22,0,[]],"closeNotification"]],[9],[7,"i"],[11,"class","icon icon-ic_close mild"],[9],[10],[10],[0,"\\n    "],[7,"h3"],[11,"class","h_user_name"],[3,"action",[[22,0,[]],"openChatWidget"]],[9],[0,"\\n"],[4,"if",[[23,["hideName"]]],null,{"statements":[[0,"        "],[2," {{session.appDisplayName}} "],[0,"\\n"],[4,"if",[[23,["session","appDisplayName"]]],null,{"statements":[[0,"          "],[1,[27,"sanitize-html",[[23,["session","appDisplayName"]],"strict"],null],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},{"statements":[[0,"        "],[2," {{currentAgent.firstName}} "],[0,"\\n"],[4,"if",[[23,["currentAgent","displayName"]]],null,{"statements":[[0,"          "],[1,[27,"sanitize-html",[[23,["currentAgent","firstName"]],"strict"],null],false],[0,"\\n"]],"parameters":[]},null],[0,"        "],[2," {{currentAgent.displayName}} "],[0,"\\n"]],"parameters":[]}],[0,"    "],[10],[0,"\\n    "],[7,"div"],[11,"class","h_last_message"],[3,"action",[[22,0,[]],"openChatWidget"]],[9],[0,"\\n"],[4,"if",[[23,["message","messageFragments","length"]]],null,{"statements":[[4,"if",[[23,["isArticleListType"]]],null,{"statements":[[0,"          "],[1,[27,"ui-unity-message-fragment",null,[["message","isbubble","isListView"],[[23,["message"]],true,true]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"          "],[1,[27,"ui-unity-message-fragment",null,[["message","isbubble"],[[23,["message"]],true]]],false],[0,"\\n"]],"parameters":[]}]],"parameters":[]},null],[0,"    "],[10],[0,"\\n  "],[10],[0,"\\n  "],[7,"div"],[11,"class","h-reply-wrapper"],[9],[0,"\\n    "],[7,"div"],[12,"class",[28,["h-reply ",[27,"unless",[[23,["defaultComposer"]],"hide-reply-composer"],null]," ",[27,"unless",[[23,["hotline","ui","onLine"]],"is-disabled"],null]]]],[9],[0,"\\n"],[4,"unless",[[23,["hotline","ui","isDesktop"]]],null,{"statements":[[0,"        "],[7,"a"],[12,"class",[28,["h-reply-container ",[27,"unless",[[23,["showPlaceholderText"]],"show-highlight"],null]]]],[11,"href","#"],[3,"action",[[22,0,[]],"beforeSendMessage"]],[9],[0,"\\n          "],[7,"div"],[11,"class","h-reply-send"],[9],[7,"i"],[11,"class","ic-send"],[9],[10],[10],[0,"\\n        "],[10],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["isTextLimitExceeded"]]],null,{"statements":[[0,"        "],[7,"div"],[11,"class","size-exceed-msg closed-state-message"],[9],[0,"\\n          "],[1,[27,"t",["size_exceeded_msg.infoMsg"],null],false],[0,"\\n        "],[10],[0,"\\n"]],"parameters":[]},null],[0,"      "],[1,[27,"ui-unity-medium-editor",null,[["mediumEditor","options","onBlur","onFocus","emojiSupport","onKeyDown","content","exceedAction","id"],[[23,["mediumEditor"]],[23,["mediumEditorOptions"]],[27,"action",[[22,0,[]],"focusOut"],null],[27,"action",[[22,0,[]],"focusIn"],null],true,[27,"action",[[22,0,[]],"keyPressDown"],null],[23,["content"]],[27,"action",[[22,0,[]],"setIsTextLimitExceeded"],null],[23,["DOM_ID","appReplyEditor"]]]]],false],[0,"\\n    "],[10],[0,"\\n    "],[2," Button Composer Flow "],[0,"\\n      "],[7,"div"],[12,"class",[28,["h-reply-button ",[27,"if",[[23,["defaultComposer"]],"hide-reply-composer"],null]]]],[9],[0,"\\n       "],[7,"div"],[11,"class","h-button-area"],[9],[0,"\\n         "],[7,"button"],[3,"action",[[22,0,[]],"openChatWidget",true]],[9],[7,"span"],[9],[0,"..."],[10],[10],[0,"\\n       "],[10],[0,"\\n      "],[10],[0,"\\n  "],[10],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"hotline-web/components/app-reply-dialog/template.hbs"}})
e.default=t}),define("hotline-web/components/app-widget/component",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.Component.extend({classNames:["h-channel"],didInsertElement:function(){var e=this,t=this.get("delay")
t&&setTimeout(function(){e.parentView.send("loadWidget",e.get("session"))},t)}})
e.default=t}),define("hotline-web/components/app-widget/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"mLnxYqep",block:'{"symbols":[],"statements":[[2," <div class=\\"h-header\\">\\n     <div class=\\"title fadeIn\\">\\n        <span class=\\"ic-chat\\"><i class=\\"chat-double\\"></i></span>\\n        <h1 class=\\"list-title\\">Message Us</h1>\\n        <p class=\\"list-desc\\">Hi there! We\'d love to help you out!</p>\\n    </div>\\n    <div class=\\"d_hotline minimize\\" {{action \'toggleChat\'}}><i class=\\"btn-close\\"></i></div>\\n</div> "],[0,"\\n"],[7,"div"],[9],[0,"\\n  "],[1,[21,"app-loader"],false],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"hotline-web/components/app-widget/template.hbs"}})
e.default=t}),define("hotline-web/components/code-snippet",["exports","hotline-web/snippets"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=self.require("highlight.js"),n=Ember.Component.extend({tagName:"pre",classNameBindings:["language"],unindent:!0,_unindent:function(e){if(!this.get("unindent"))return e
for(var t,s,n=e.split("\n").filter(function(e){return""!==e}),a=0;a<n.length;a++)(t=/^[ \t]*/.exec(n[a]))&&(void 0===s||s>t[0].length)&&(s=t[0].length)
return void 0!==s&&s>0&&(e=e.replace(new RegExp("^[ \t]{"+s+"}","gm"),"")),e},source:Ember.computed("name",function(){var e=this.get("name").split("/").reduce(function(e,t){return e&&e[t]},t.default)
return this._unindent((e||"").replace(/^(\s*\n)*/,"").replace(/\s*$/,""))}),didInsertElement:function(){s.highlightBlock(this.get("element"))},language:Ember.computed("name",function(){var e=/\.(\w+)$/i.exec(this.get("name"))
if(e)switch(e[1].toLowerCase()){case"js":return"javascript"
case"coffee":return"coffeescript"
case"hbs":return"htmlbars"
case"css":return"css"
case"scss":return"scss"
case"less":return"less"
case"emblem":return"emblem"
case"ts":return"typescript"}})})
e.default=n}),define("hotline-web/components/content-viewport/component",["exports","hotline-web/snippets","hotline-web/config/environment","hotline-web/mixins/datastore","hotline-web/mixins/message","hotline-web/mixins/subscription","hotline-web/mixins/user-locate","hotline-web/mixins/widget-load","hotline-web/mixins/user","hotline-web/mixins/jwt","hotline-web/helpers/event-conditions","hotline-web/mixins/actions","hotline-web/mixins/conversation","hotline-web/mixins/handle-event","hotline-web/mixins/localstorage","hotline-web/utils/constants","hotline-web/mixins/sanitize","hotline-web/utils/utils"],function(e,t,s,n,a,i,o,r,l,u,c,d,m,h,f,g,p,b){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var v=Ember.Component.extend(d.default,m.default,n.default,a.default,i.default,l.default,u.default,o.default,r.default,h.default,f.default,p.default,{screenshare:Ember.inject.service(),ruleEngine:Ember.inject.service(),notification:Ember.inject.service(),tagName:"",cssProp:"chat-style.html",bgc:"#45A4EC",fgc:"white",jwtfgc:"#44412e",jwtbgc:"#ffac00",defaultFontName:"-apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Fira Sans', 'Droid Sans', 'Cantarell', 'Helvetica Neue', sans-serif",defaultFontUrl:"",isLocked:!1,replaceTags:Ember.computed("session.config.headerProperty.backgroundColor","session.config.headerProperty.foregroundColor","session.config.headerProperty.jwtInvalidBanner.foregroundColor","session.config.headerProperty.jwtInvalidBanner.backgroundColor","session.config.headerProperty.fontName","session.config.headerProperty.fontUrl","session.config.headerProperty",{get:function(){var e=[],t=this.get("config"),s=this.get("session.config.headerProperty"),n=this.get("session.config.headerProperty.jwtInvalidBanner"),a=t&&t.headerProperty,i=a&&a.jwtInvalidBanner,o=s&&s.backgroundColor||a&&a.backgroundColor||this.get("bgc"),r=s&&s.foregroundColor||a&&a.foregroundColor||this.get("fgc"),l=n&&n.backgroundColor||i&&i.backgroundColor||this.get("jwtbgc"),u=n&&n.foregroundColor||i&&i.foregroundColor||this.get("jwtfgc"),c=s&&s.backgroundImage||t&&t.backgroundImage||"1",d=this.get("fontProperties")
switch(s&&s.fontName?(d.name=s.fontName+", "+d.name,d.url=s&&s.fontUrl?s.fontUrl:d.url):a&&a.fontName&&(d.name=a.fontName+", "+d.name,d.url=a&&a.fontUrl?a.fontUrl:d.url),e.push({id:"{{HD_BG_COLOR}}",value:this.sanitizeHTML(o,"strict")}),e.push({id:"{{HD_FG_COLOR}}",value:this.sanitizeHTML(r,"strict")}),e.push({id:"{{JWT_BG_COLOR}}",value:this.sanitizeHTML(l,"strict")}),e.push({id:"{{JWT_FG_COLOR}}",value:this.sanitizeHTML(u,"strict")}),c){case"1":c=e.push({id:"{{ICON_URL}}",value:"https://assetscdn-wchat.freshchat.com/static/assets/images/texture_background_1-bdc7191884a15871ed640bcb0635e7e7.png"})
break
case"2":c=e.push({id:"{{ICON_URL}}",value:"https://assetscdn-wchat.freshchat.com/static/assets/images/texture_background_2-58a7e6338c15452b348a80b95e341b19.png"})
break
case"3":c=e.push({id:"{{ICON_URL}}",value:"https://assetscdn-wchat.freshchat.com/static/assets/images/texture_background_3-d8c3cb99c259911f299342995480e7b2.png"})
break
case"4":c=e.push({id:"{{ICON_URL}}",value:"https://assetscdn-wchat.freshchat.com/static/assets/images/texture_background_4-0e1c37997493f0c2d9eadae0994532ca.png"})
break
case"5":c=e.push({id:"{{ICON_URL}}",value:"https://assetscdn-wchat.freshchat.com/static/assets/images/texture_background_5-ddf715b7730e7f70361e7116178e22d9.png"})
break
case"6":c=e.push({id:"{{ICON_URL}}",value:"https://assetscdn-wchat.freshchat.com/static/assets/images/texture_background_6-e057b6e608bddaaf48502b10e816add6.png"})
break
case"7":c=e.push({id:"{{ICON_URL}}",value:"https://assetscdn-wchat.freshchat.com/static/assets/images/texture_background_7-4a0d9e176965fc6cef2c90903ab39544.png"})
break
case"8":c=e.push({id:"{{ICON_URL}}",value:"https://assetscdn-wchat.freshchat.com/static/assets/images/texture_background_8-6dbf413ce54610061f441738e7bcd624.png"})
break
case"9":c=e.push({id:"{{ICON_URL}}",value:"https://assetscdn-wchat.freshchat.com/static/assets/images/texture_background_9-e8a3a046057d16447f2c9c06eedca03e.png"})
break
case"10":c=e.push({id:"{{ICON_URL}}",value:"none"})
break
default:c=e.push({id:"{{ICON_URL}}",value:c})}return e.push({id:"{{FONT_URL}}",value:d.url}),e.push({id:"{{FONT_NAME}}",value:d.name}),e}}),cssTemplate:Ember.computed({get:function(){return t.default[this.get("cssProp")]}}),customCSS:Ember.computed("replaceTags",{get:function(){var e=this.get("cssTemplate"),t=this.get("replaceTags")
return e&&t?(t.forEach(function(t){e=e.replace(new RegExp(t.id,"g"),t.value)}),e):null}}),fontProperties:Ember.computed({get:function(){var e=this.get("defaultFontUrl")
return{name:this.get("defaultFontName"),url:e}}}),isOpen:Ember.computed({get:function(){return!1},set:function(e,t){return t}}),isDialogOpen:Ember.computed({get:function(){return!1},set:function(e,t){return t}}),isFullscreen:Ember.computed("session.config.fullscreen",{get:function(){return this.get("session.config.fullscreen")}}),didInsertElement:function(){var e=this.get("hotline.ui.config")
e&&e.appId?this.addMessagingEvents():this.postMessage({action:"push_subscribe_destroy_response"})},willDestroyElements:function(){this.removeMessagingEvents()},messageCB:Ember.computed({get:function(){return this.onMessage.bind(this)}}),lastAgentMessage:Ember.computed("hotline.ui.lastAgentMessage",{get:function(){return this.get("hotline.ui.lastAgentMessage")}}),displayNotification:Ember.computed("isOpen","lastAgentMessage",{get:function(){var e=this.get("isOpen"),t=this.get("lastAgentMessage"),s=!e&&t
return s&&(s=s&&-1===[g.default.CONVERSATION.MESSAGE_TYPE.SCREEN_SHARING.ACCEPTED,g.default.CONVERSATION.MESSAGE_TYPE.SCREEN_SHARING.ENDED,g.default.CONVERSATION.MESSAGE_TYPE.SCREEN_SHARING.CANCELLD].indexOf(t.messageType),this.send("toggleNotification")),s}}),addMessagingEvents:function(){window.addEventListener?window.addEventListener("message",this.get("messageCB"),!1):window.detachEvent&&window.attachEvent("onmessage",this.get("messageCB")),this.postMessage({action:"frame_state_change",settingsPayload:this.get("hotline.ui.config"),data:{frameState:g.default.FrameState.INITIALIZED}})},removeMessagingEvents:function(){window.removeEventListener?window.removeEventListener("message",this.get("messageCB")):window.detachEvent&&window.detachEvent("onmessage",this.get("messageCB"))},processFrame:function(){var e=this.get("hotline.ui.config.appSubDomain")||this.get("hotline.ui.config.appId"),t=this.get("hotline.ui.config.appLogoPath")||"",n=s.default.webpush,a=n.domain[s.default.hotlineEnv.type].replace("{appName}",e)+"/index.html"
this.getItemLS("subDomainName")!==e&&this.send("clearSubscription"),this.processPushNotifications(),a=n.protocol+a,this.postMessage({action:"widget_loaded",pushDomain:a,appLogoPath:t})},updateLocation:function(e){var t=this.get("lfds"),s=(new Date).getTime()
if(e.newValue){var n=t.get("userBehaviour"),a=n&&n.get("locations"),i=e.newValue&&e.newValue||"",o=a&&a.findBy("pageUrl",i),r={url:i,title:e.title,force:e.force}
this.reportVisit(),o?o.set("viewCount",o.get("viewCount")+1):(o=this.get("store").createRecord("userLocation",{pageUrl:i,viewCount:1}),a.pushObject(o)),this.send("save",!1),Ember.setProperties(this.get("hotline.ui.userBehaviour"),{currentUrl:i}),this.updateEvent("fc_page",r,s)}},processPushNotifications:function(e){var t,s=this,n=this.get("session.user"),a=n&&n.alias,i=this.get("notification"),o=this.get("hotline.ui.config.appSubDomain")||this.get("hotline.ui.config.appId")
this.setItemLS("subDomainName",o),e?(this.setItemLS("subscriptionInfo",e),t=e):t=this.getItemLS("subscriptionInfo"),null!==t&&t&&t.subscription||!a||this.logger.log("subscriptionInfo missing"),this.set("hotline.ui.push",t),i.bindPushEvents(),setTimeout(function(){s.get("hotline.ui.focussed")||s.get("hotline.ui.widgetFocussed")?i.sendUnsubscribeToServer():i.sendSubscriptionToServer()},1e3)},onMessage:function(e){var t=this,s=e.origin||e.originalEvent.origin,n=this.get("session.user"),a=n&&n.alias,i=this.get("origin"),o=this.get("notification"),r=this.get("lfds"),l=r&&r.get("userBehaviour"),u=this.get("session.token"),d=e.data
if(d){if(d.isWebViewMessage?b.default.isTrustedDomain(s,this.get("hotline.ui.whiteListedDomains")):s===i)switch(d.action?d.action:d.event_id){case"push_subscribe_destroy":o.sendSubscribeOnUnload(),this.postMessage({action:"push_subscribe_destroy_response"})
break
case"widget_blur":this.set("hotline.ui.widgetFocussed",!1),this.set("hotline.ui.parentTitle",d.payload.title),this.set("hotline.ui.parentLocation",d.payload.location),o.sendSubscriptionToServer()
break
case"widget_focus":this.set("hotline.ui.widgetFocussed",!0),o.sendUnsubscribeToServer()
break
case"widget_location":this.set("hotline.ui.parentTitle",d.payload.title),this.set("hotline.ui.parentLocation",d.payload.location)
break
case"load_widget":o.playEmptySound(),this.send("loadWidget",d.payload)
break
case"push_user_meta":this.processPushNotifications(d.data)
break
case"open_chat":this.send("triggerOpenClose",!0)
break
case"close_chat":this.send("triggerOpenClose",!1)
break
case"show_chat":this.send("triggerShowHide",!0)
break
case"hide_chat":this.send("triggerShowHide",!1)
break
case"set_tags":this.send("setTags",d.payload)
break
case"set_prop":this.send("setProp",d.payload)
break
case"set_faq_tags":this.send("setFaqTags",d.payload)
break
case"load_rules":c.default.create({scope:this}).populate(),this.send("save",!1)
var m=(new Date).getTime(),h=!0
l&&l.get("hasLocationRule")&&(!l.get("userGeolocation")||m-l.get("locationRuleFetchMillis")>g.default.GeolocationCacheDuration)&&(h=!1,Ember.$.ajax({type:"GET",url:g.default.EmberModelUrl.geolocation.url.replace("{token}",u)}).then(function(e){Ember.set(l,"locationRuleFetchMillis",(new Date).getTime()),Ember.set(l,"userGeolocation",e),t.send("save",!1),t.postMessage({action:"rules_loaded"})})),h&&this.postMessage({action:"rules_loaded"})
var f=this.cache.decache("track_events")
f&&f.forEach(function(e){t.updateEvent(e.eventName,e.eventProperties)})
break
case"set_external_id":this.send("setExternalId",d.payload,function(e,s,n){t.postMessage({action:d.action+"_ack",success:e,status:s,data:n})})
break
case"user_exists":this.send("isUserCreated",function(e,s,n){t.postMessage({action:d.action+"_ack",success:e,status:s,data:n})})
break
case"set_user_properties":this.send("setUserProperties",d.payload,function(e,s,n){t.postMessage({action:d.action+"_ack",success:e,status:s,data:n})})
break
case"set_custom_config":this.send("loadConfig",d.payload)
break
case"get_user":a?this.postMessage({action:d.action+"_ack",success:!0,status:200,data:n}):this.postMessage({action:d.action+"_ack",success:!1,status:401})
break
case"update_user":var p=d&&d.payload
a?p?this.send("updateUser",p):this.postMessage({action:d.action+"_ack",success:!1,status:400}):this.postMessage({action:d.action+"_ack",success:!1,status:401})
break
case"reset_user":this.send("resetSession",function(e,s){e&&t.send("userCleared"),t.postMessage({action:d.action+"_ack",success:e,status:s})})
break
case"create_user":this.send("createUser",d.payload,function(e,s,n){t.postMessage({action:d.action+"_ack",success:e,status:s,data:n})})
break
case"authenticate_user":if(this.jwt.isEnabled){var v=d&&d.payload,E=v&&this.getJWTMeta(v),y=E&&E.reference_id
a||this.jwt.auth.app?this.send("verifyJWT",{jwtAuthToken:d.payload},function(e){t.jwt.isStrict&&t.jwt.auth.user&&e&&e.success&&(t.cache.findBy("post_message","widget_loaded")||t.send("trackActivity"))}):null===this.jwt.auth.app||null===this.jwt.auth.user||(!1===this.jwt.auth.app||!1===this.jwt.auth.user)&&y?(this.jwt.auth.app=this.jwt.auth.user=!1,Ember.set(this,"session.jwtAuthToken",d.payload),this.send("getUser")):this.send("verifyJWT",{jwtAuthToken:d.payload},function(e){t.jwt.isStrict&&t.jwt.auth.app&&e&&e.success&&t.send("trackActivity"),t.postMessage(e)})}break
case"get_user_uuid":this.jwt.isEnabled?this.send("getUserUUID",function(e){t.postMessage({action:d.action+"_ack",success:!0,status:200,data:{uuid:e}})}):this.postMessage({action:d.action+"_ack",success:!1,status:401})
break
case"generate_user_uuid":this.jwt.isEnabled?this.send("generateUserUUID",function(e){t.postMessage({action:d.action+"_ack",success:!0,status:200,data:{uuid:e}})}):this.postMessage({action:d.action+"_ack",success:!1,status:401})
break
case"open_channel":this.send("triggerOpenClose",!0),this.get("gotoChannel")(d.payload)
break
case"track_location":this.updateLocation(d.payload.pageUrl)
break
case"track_event":this.updateEvent(d.payload.eventName,d.payload.data)
break
case"track_activity":this.send("triggerActivity",d.payload)
break
case"startScreenShare":var w=d.cb_data
w&&this.get("screenshare").startCoBrowsing(w)
break
case"endScreenShare":this.get("screenshare").endCoBrowsing(d)
break
case"collapse_all":var _=this.get("hotline.ui")
_.modal&&(Ember.set(_,"modalOpen",!1),Ember.set(_,"openArticleFromMessage",!1),Ember.$("html").removeClass("expanded-modal"),this.postMessage({action:"collapse_all"}))}}},unreadObserver:function(){var e=this.get("totalUnreadCount")
e!==this.get("lastUnreadCount")&&(this.send("notifyUnread"),this.set("lastUnreadCount",e))}.observes("totalUnreadCount"),actions:{setTags:function(e){var t=this.get("session"),s=e&&e.tags,n=e&&e.force
t&&s&&s.length?Ember.set(t,"tags",s):Ember.set(t,"tags",void 0),n&&this.get("home")()},setFaqTags:function(e){var t=this.get("session"),s=e&&e.faqTags,n=e&&e.force
t&&s?Ember.set(t,"faqTags",s):Ember.set(t,"faqTags",void 0),n&&this.reloadRoute()},setProp:function(e){var t=this.get("lfds"),s=e&&e.prop
t&&(s&&Object.keys(s).length>0?t.set("properties",this.get("store").createRecord("properties",s)):t.set("properties",void 0),this.send("save",!1))},loadChannels:function(){this.processFrame(),this.get("router").replaceWith("channels")},toggleChat:function(e){this.get("isOpen")&&this.set("currentView",e),this.send("triggerOpenClose",!this.get("isOpen"))},updateView:function(e){this.set("currentView",e),this.send("checkJWTExpiry")},toggleNotification:function(e){var t=e===g.default.DialogState.CLOSE
t||this.get("isDialogOpen")||this.send("toggleDialog",!0),this.set("isDialogOpen",!t),this.postMessage({action:"notify_frame",data:e})},toggleDialog:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0]
this.postMessage({action:"toggle_dialog",data:e})},closeNotification:function(){var e=this.get("hotline.ui")
e.lastAgentMessage&&(this.send("toggleNotification",g.default.DialogState.CLOSE),Ember.setProperties(e,{lastAgentMessage:void 0,lockAgentMessage:void 0}))},triggerActivity:function(e){var t=this,s=this.get("session"),n=s&&s.user,a=s&&s.siteId,i=n&&n.alias
if(i){var o=g.default.EmberModelUrl.heartbeat.url
o=o.replace("{token}",s.token).replace("{userAlias}",i),a&&(o+="?siteId=".concat(a)),Ember.$.ajax({type:"POST",url:o,data:JSON.stringify(e),contentType:"application/json; charset=UTF-8"}).then(function(){},function(e){t.logger.log(e)})}},triggerShowHide:function(e){this.postMessage({action:"toggle_frame",show:e})},triggerOpenClose:function(e){var t=this,s={action:"resize_frame",isOpen:e},n=this.get("currentView"),a=this.get("hotline.ui.lastAgentMessage.channelId")
this.send("closeNotification"),e?(this.send("checkJWTExpiry"),a&&Ember.run.later(function(){t.get("router").replaceWith("channels.channel",a)},0),this.set("isOpen",!0),n&&n.send("onOpen"),setTimeout(function(){t.set("startAnimate",!0)},1),this.postMessage(s)):(this.set("startAnimate",!1),setTimeout(function(){t.set("isOpen",!1),t.postMessage(s)},1))},notifyUnread:function(){this.postMessage({action:"unread_count_notify",data:{count:this.get("totalUnreadCount")}})},reloadWidget:function(){document.location.href=this.get("router").generate("widget",this.get("session.token"),this.get("session.referrer"))}}})
e.default=v}),define("hotline-web/components/content-viewport/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"jDOHejdd",block:'{"symbols":[],"statements":[[7,"div"],[12,"class",[28,["hotline-launcher ",[27,"if",[[23,["l2r"]],"l2r"],null]," ",[27,"if",[[23,["isOpen"]],"h-open"],null],"  ",[27,"if",[[23,["isFullscreen"]],"fc-fullscreen"],null]]]],[9],[0,"\\n\\t"],[7,"div"],[12,"class",[28,["viewport h-chat-custom ",[27,"if",[[23,["startAnimate"]],"h-open"],null]]]],[9],[0,"\\n\\t  "],[1,[27,"ui-help-note",null,[["showTabs","reloadRoute","gotoHome"],[[23,["showTabs"]],[27,"action",[[22,0,[]],[23,["reloadRoute"]]],null],[27,"action",[[22,0,[]],[23,["home"]]],null]]]],false],[0,"\\n\\t  "],[1,[21,"outlet"],false],[0,"\\n\\t  "],[1,[21,"ui-footer-note"],false],[0,"\\n\\t"],[10],[0,"\\n"],[10],[0,"\\n\\n"],[4,"if",[[23,["displayNotification"]]],null,{"statements":[[0,"\\t"],[1,[27,"app-reply-dialog",null,[["openChatWidget"],[[27,"action",[[22,0,[]],"toggleChat"],null]]]],false],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[7,"div"],[12,"class",[28,["d-hotline h-btn animated zoomIn ",[27,"if",[[23,["l2r"]],"l2r"],null]," ",[27,"if",[[27,"or",[[23,["hideChatButton"]],[23,["isOpen"]]],null],"dn"],null]," ",[27,"if",[[23,["isOpen"]],"h-open"],null]]]],[3,"action",[[22,0,[]],"toggleChat"]],[9],[0,"\\n\\t"],[7,"div"],[11,"class","chat-content"],[9],[0,"\\n\\t\\t"],[7,"i"],[11,"class","icon-ic_chat_icon"],[9],[10],[0,"\\n\\t"],[10],[0,"\\n\\t"],[7,"div"],[12,"class",[28,[[27,"if",[[23,["yet2BRead"]],"h-btn-notify animated zoomIn "],null]," ",[27,"if",[[27,"gt",[[23,["totalUnreadCount"]],9],null],"unread-greater-than-9"],null]]]],[9],[0,"\\n\\t\\t"],[1,[27,"if",[[23,["yet2BRead"]],[23,["displayUnreadCount"]]],null],false],[0,"\\n\\t"],[10],[0,"\\n"],[10],[0,"\\n\\n"],[1,[21,"customCSS"],true],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"hotline-web/components/content-viewport/template.hbs"}})
e.default=t}),define("hotline-web/components/file-upload/component",["exports","hotline-web/utils/constants"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=Ember.TextField.extend({type:"file",attributeBindings:["accept"],accept:"file",multiple:!1,initFileType:function(){var e=this.get("allowedFileTypes")
e&&Ember.set(this,"accept",e)}.on("init"),getFileType:function(e){var s,n=this.get("isAttachment"),a=this.get("allowedFileTypes"),i=this.get("blockedFileTypes"),o=a&&a.split(",")||[],r=i&&i.split(",")||[],l=e&&e.lastIndexOf("."),u=e&&l>=0&&e.substr(l)||""
return u=u.toLowerCase(),e&&u?(s=t.default.SupportedImageFileExtensions[u]?t.default.FILETYPE.IMAGE:t.default.FILETYPE.FILE,s=n?t.default.FILETYPE.FILE:s,a?o.indexOf(u)>=0?s:t.default.FILETYPE.INVALID:i&&r.indexOf(u)>=0?t.default.FILETYPE.INVALID:s):t.default.FILETYPE.INVALID},isSupportedFileSize:function(e,s){var n=this.get("attr")||{},a=n&&n.size||(s===t.default.FILETYPE.IMAGE?t.default.ImageAttr.size:t.default.FileAttr.size),i=e.size<=a
return i||this.set("parentView.content",{error:this.get("intl").t("fileAttachmentErrors.invalidFileSize",{attributeSize:a/1048576}),timestamp:(new Date).getTime()}),i},processFile:function(e,t){var s={fileType:t,fileData:e,timestamp:(new Date).getTime(),isShared:this.get("isShared"),markForQuickAccess:this.get("markForQuickAccess")}
this.set("parentView.content",s),this.set("imageData",s)},processImageFile:function(e,t){var s=this,n=this.get("attr")||{},a=new FileReader,i=new Image
a.onload=function(a){var o,r=a.target.result;(n.width||n.height)&&(i.src=r,i.onload=function(){(this.width>n.width||this.height>n.height)&&s.set("parentView.content",{error:s.get("intl").t("fileAttachmentErrors.invalidImageResolution",{width:n.width,height:n.height}),timestamp:(new Date).getTime()})}),o={fileType:t,fileData:e,timestamp:(new Date).getTime(),data:r,attr:{width:this.width,height:this.height}},s.set("parentView.content",o),s.set("imageData",o)},a.readAsDataURL(e)},change:function(e){for(var s=e&&e.target&&e.target.files||[],n=s.length||0,a=0;a<n;a++){var i=s[a],o=this.getFileType(i.name)
o!==t.default.FILETYPE.INVALID?this.isSupportedFileSize(i,o)&&(o===t.default.FILETYPE.FILE?this.processFile(i,o):o===t.default.FILETYPE.IMAGE&&this.processImageFile(i,o)):this.set("parentView.content",{error:this.get("intl").t("fileAttachmentErrors.invalidFileExtension"),timestamp:(new Date).getTime()})}e.target.value=""}})
e.default=s}),define("hotline-web/components/radio-button/component",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.Component.extend({tagName:"input",type:"radio",attributeBindings:["type","id","name","value","checked"],checked:Ember.computed("group","value",{get:function(){return this.get("group")===this.get("value")}}),change:function(){this.get("group")!==this.get("value")&&Ember.run.once(this,"changed")},changed:function(){this.onchange(this.get("value"))}})
e.default=t}),define("hotline-web/components/ui-button-composer/component",["exports","hotline-web/utils/utils","hotline-web/utils/constants","hotline-web/mixins/datastore"],function(e,t,s,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var a=s.default.CONVERSATION,i=Ember.Component.extend(t.default,s.default,n.default,{tagName:"button",classNames:["h-img-button"],generatedHTML:Ember.computed({get:function(){var e=this.get("model"),t=this.get("hotline.ui.isDesktop")?Ember.$(this).getTextHtml(e.label):e.label
return Ember.String.htmlSafe(t)}}),click:function(e){e.preventDefault()
var t=this.get("model")
switch(t.fragmentType){case a.FRAGMENT_TYPE.QUICKREPLY:this.send("sendReplyMessage",t.label)
break
case a.FRAGMENT_TYPE.BUTTON:"_blank"===t.target?this.send("openExternalTab",t.content):"_self"===t.target?this.send("openExternalLink",t.content):this.send("openInternalLink",t.content)}},actions:{openExternalTab:function(e){window.open(e,"_blank")},openInternalLink:function(e){var s,n=this.get("faqs.content").serialize()
n&&(s=t.default.getArticleToShow(n.dsCategories,e))&&this.get("router").send("gotoFAQ",s)},openExternalLink:function(e){var t=this.get("hotline.ui")
Ember.set(t,"modalOpen",!0),Ember.set(t,"modal",{thirdPartyURL:e,title:"Demo Page"}),Ember.set(t,"openArticleFromMessage",!0)},sendReplyMessage:function(e){var t=[{fragmentType:a.FRAGMENT_TYPE.TEXT,contentType:"text/html",content:e}]
this.sendButtonMessage(t)}}})
e.default=i}),define("hotline-web/components/ui-button-composer/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"aGrxvdss",block:'{"symbols":[],"statements":[[7,"span"],[9],[1,[21,"generatedHTML"],false],[10],[0,"  \\n"]],"hasEval":false}',meta:{moduleName:"hotline-web/components/ui-button-composer/template.hbs"}})
e.default=t}),define("hotline-web/components/ui-emoji-text/component",["exports","hotline-web/mixins/sanitize"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=Ember.Component.extend(t.default,{tagName:"",generatedHTML:Ember.computed("text",{get:function(){var e,t=this.get("text"),s=this.get("hotline.ui.isDesktop")
return t&&(e=this.linkify(t),e=s?Ember.$(this).getTextHtml(e):e),e}}),exactRegexMatch:function(e,t){var s=e.match(t)
return null!=s&&e===s[0]},linkify:function(e){for(var t,s=/(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;\[\]]*[-A-Z0-9+&@#\/%=~_|\[\],])/gim,n=/(^|[^\/])(www\.[\S]+(\b|$))/gim,a=/(([-a-zA-Z0-9.'’&_%+]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,10})+)/gim,i=e.split(" "),o=0,r=i.length;o<r;o++)this.exactRegexMatch(i[o],s)?i[o]='<a href="'.concat(i[o],'" target="_blank">').concat(i[o],"</a>"):this.exactRegexMatch(i[o],n)?i[o]='<a href="http://'.concat(i[o],'" target="_blank">').concat(i[o],"</a>"):this.exactRegexMatch(i[o],a)&&(i[o]='<a href="mailto:'.concat(i[o],'" target="_blank">').concat(i[o],"</a>"))
return t=(t=i.join(" ")).replace(/(\r\n|\n|\r)/g,"<br>"),t=this.addRelToHref(t)},addRelToHref:function(e){return e.replace(new RegExp("<a href","g"),'<a rel="noreferrer noopener" href')}})
s.reopenClass({positionalParams:["text"]})
var n=s
e.default=n}),define("hotline-web/components/ui-emoji-text/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"D/cwGwYb",block:'{"symbols":[],"statements":[[1,[21,"generatedHTML"],true],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"hotline-web/components/ui-emoji-text/template.hbs"}})
e.default=t}),define("hotline-web/components/ui-footer-note/component",["exports","hotline-web/mixins/brand-check-mixin"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=Ember.Component.extend(t.default,{classNames:"footer-note",classNameBindings:["hidePoweredBy:hide-footer"]})
e.default=s}),define("hotline-web/components/ui-footer-note/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"/1ubND+U",block:'{"symbols":[],"statements":[[4,"unless",[[23,["hidePoweredBy"]]],null,{"statements":[[0,"  "],[7,"span"],[9],[0,"⚡ "],[1,[27,"t",["by_in_powered_by"],null],false],[0," "],[10],[0,"\\n  "],[7,"a"],[12,"href",[28,["https://www.freshworks.com/live-chat-software/freshchat/?utm_source=messenger&utm_medium=referral&utm_campaign=chat&app_id=",[23,["session","appId"]],"&app_name=",[23,["session","appName"]]]]],[11,"class","product"],[11,"target","_blank"],[11,"rel","nofollow"],[9],[0,"Freshchat"],[10],[0,"\\n"]],"parameters":[]},{"statements":[[7,"img"],[11,"src","data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="],[11,"width","0"],[11,"height","0"],[11,"alt",""],[9],[10],[0,"\\n"]],"parameters":[]}]],"hasEval":false}',meta:{moduleName:"hotline-web/components/ui-footer-note/template.hbs"}})
e.default=t}),define("hotline-web/components/ui-help-note/component",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.Component.extend({classNames:["help-text fadeIn"],classNameBindings:["hidden:dn","hasFlashMessage:flash-message","showTabs:tabs-present"],hidden:Ember.computed("hotline.ui.onLine","hotline.ui.helpNote","isReconnecting","isConnecting","isDisconnected","hasFlashMessage",{get:function(){return this.get("hotline.ui.onLine")&&!(this.get("hotline.ui.helpNote")||this.get("isReconnecting")||this.get("isConnecting")||this.get("isDisconnected")||this.get("hasFlashMessage"))}}),hasFlashMessage:Ember.computed("flash.message",{get:function(){return!!this.get("flash.message")}}),isReconnecting:Ember.computed({get:function(){return!1},set:function(e,t){return t}}),willReconnectCB:Ember.computed({get:function(){return this.willReconnect.bind(this)}}),didReconnectCB:Ember.computed({get:function(){return this.didReconnect.bind(this)}}),isConnecting:Ember.computed({get:function(){return!1},set:function(e,t){return t}}),willConnectCB:Ember.computed({get:function(){return this.willConnect.bind(this)}}),didConnectCB:Ember.computed({get:function(){return this.didConnect.bind(this)}}),isDisconnected:Ember.computed({get:function(){return!1},set:function(e,t){return t}}),didDisconnectCB:Ember.computed({get:function(){return this.didDisconnect.bind(this)}}),didInsertElement:function(){this.rts.on("willConnect",Ember.get(this,"willConnectCB")),this.rts.on("didConnect",Ember.get(this,"didConnectCB")),this.rts.on("willReconnect",Ember.get(this,"willReconnectCB")),this.rts.on("didReconnect",Ember.get(this,"didReconnectCB")),this.rts.on("didDisconnect",Ember.get(this,"didDisconnectCB"))},willDestroyElement:function(){this.rts.off("willConnect",Ember.get(this,"willConnectCB")),this.rts.off("didConnect",Ember.get(this,"didConnectCB")),this.rts.off("willReconnect",Ember.get(this,"willReconnectCB")),this.rts.off("didReconnect",Ember.get(this,"didReconnectCB")),this.rts.off("didDisconnect",Ember.get(this,"didDisconnectCB"))},willConnect:function(){var e=this
this.connectTimer||(this.connectTimer=setInterval(function(){e.set("isConnecting",!0),e.clearTimer()},1e4))},clearTimer:function(){this.connectTimer&&(clearInterval(this.connectTimer),this.connectTimer=null)},didConnect:function(){this.clearTimer(),this.set("isConnecting",!1),this.set("isReconnecting",!1),this.set("isDisconnected",!1)},willReconnect:function(){this.set("isReconnecting",!0)},didReconnect:function(){this.set("isConnecting",!1),this.set("isReconnecting",!1),this.set("isDisconnected",!1)},didDisconnect:function(){this.set("isConnecting",!1),this.set("isReconnecting",!1),this.set("isDisconnected",!0)},actions:{refreshRoute:function(){var e=this.get("router").currentRouteName
e&&"faqs"===e?this.gotoHome():this.reloadRoute()}}})
e.default=t}),define("hotline-web/components/ui-help-note/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"xf/GcWqq",block:'{"symbols":[],"statements":[[4,"if",[[27,"not",[[23,["hotline","ui","onLine"]]],null]],null,{"statements":[[1,[27,"t",["help_text.offline"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["isDisconnected"]]],null,{"statements":[[1,[27,"t",["help_text.error"],null],false],[0," "],[7,"a"],[11,"href","#"],[3,"action",[[22,0,[]],"refreshRoute"]],[9],[1,[27,"t",["help_text.refresh"],null],false],[10],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["hotline","ui","helpNote"]]],null,{"statements":[[1,[23,["hotline","ui","helpNote"]],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["isReconnecting"]]],null,{"statements":[[1,[27,"t",["help_text.reconnect"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["isConnecting"]]],null,{"statements":[[1,[27,"t",["help_text.connect"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["hasFlashMessage"]]],null,{"statements":[[1,[23,["flash","message"]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"hasEval":false}',meta:{moduleName:"hotline-web/components/ui-help-note/template.hbs"}})
e.default=t}),define("hotline-web/components/ui-input/component",["exports","hotline-web/mixins/focus-field"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=Ember.TextField.extend(t.default,{init:function(){this._super(arguments)},classNames:["form-control"],attributeBindings:["autofocus"],autofocus:"autofocus"})
e.default=s}),define("hotline-web/components/ui-input/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"GoVKUS4W",block:'{"symbols":["&default"],"statements":[[14,1],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"hotline-web/components/ui-input/template.hbs"}})
e.default=t}),define("hotline-web/components/ui-message/component",["exports","moment","hotline-web/mixins/message","hotline-web/utils/constants","hotline-web/config/environment","hotline-web/mixins/datastore","hotline-web/mixins/actions"],function(e,t,s,n,a,i,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var r=Ember.Component.extend(s.default,i.default,o.default,{CONVERSATION:n.default.CONVERSATION,classNames:["message-container"],screenshare:Ember.inject.service(),isMuted:!1,classNameBindings:["userMessage:odd"],userMessage:Ember.computed("model","model.messageUserType",{get:function(){return 0===this.get("model.messageUserType")}}),isMessagePending:Ember.computed("model","model.status",{get:function(){var e=this.get("model.status")
return e===n.default.MESSAGE_STATUS.PENDING||e===n.default.MESSAGE_STATUS.READY_TO_SEND}}),isMessageUnauthenticated:Ember.computed("model","model.status",{get:function(){return this.get("model.status")===n.default.MESSAGE_STATUS.UNAUTHENTICATED}}),deliveredMillis:Ember.computed("wrapedMessage.[]",{get:function(){var e=this.get("wrapedMessage"),t=e&&e.objectAt(e.length-1)||void 0
return t&&t.get("createdMillis")}}),yesterdayMillis:Ember.computed({get:function(){return(0,t.default)().subtract(1,"day").startOf("day").valueOf()}}),hideName:Ember.computed.alias("session.config.agent.hideName"),hidePic:Ember.computed("session.config.agent.hideName","session.config.agent.hidePic",{get:function(){return Ember.get(this,"session.config.agent.hideName")||Ember.get(this,"session.config.agent.hidePic")}}),agentName:Ember.computed("model","model.messageUserType","hideName",{get:function(){var e=this.get("model.messageUserType"),t=this.get("session.appDisplayName"),s=this.get("model.messageUserFirstName"),a=e&&e===n.default.CONVERSATION.USER_TYPE.CHANNEL,i=e&&e!==n.default.CONVERSATION.USER_TYPE.USER,o=Ember.get(this,"hideName")
return a?t:i?o?t:s:null}}),agentPic:Ember.computed("model","model.messageUserId","model.messageUserAlias","hideName","hidePic","session.config.headerProperty.appLogo",{get:function(){var e=this.get("model.messageUserAlias"),t=this.get("hotline.ui.config.appId"),s=this.get("hotline.ui.config.appSubDomain")||t,n=this.get("hotline.ui.config.appLogoPath"),i=this.get("session.config.headerProperty.appLogo"),o=a.default.webpush.protocol+a.default.webpush.domain[a.default.hotlineEnv.type].replace("{appName}",s)+n,r=Ember.get(this,"hidePic")
return e&&!r?this.get("agentService").getAgentInfo(e):i?Ember.Object.create({profilePicThumbUrl:i}):n?Ember.Object.create({profilePicThumbUrl:o}):void 0}}),agentMessagePic:Ember.computed("model.messageUserProfilePic",{get:function(){var e=this.get("model.messageUserProfilePic")
return e||"https://assetscdn-wchat.freshchat.com/static/assets/images/ic_bot_dp-09695369acdeb98c1b9ba6e964fff631.svg"}}),screenshareControl:Ember.computed("model.messageFragments.[]",function(){var e=this.get("model")
return(e.get("messageFragments")&&e.get("messageFragments").length&&e.get("messageFragments")[0]&&e.get("messageFragments")[0].content)!==this.get("intl").t("screenShare.screenShareCompare").toString()}),isArticleView:Ember.computed("model.messageFragments",{get:function(){var e=this.get("model.messageFragments")
if(e&&e.length>0)for(var t=0;t<e.length;t++){var s=e[t]
if(s&&s.fragmentType===this.CONVERSATION.FRAGMENT_TYPE.COLLECTION)return!0}return!1}}),actions:{enlargeImage:function(e){var t=this.get("hotline.ui")
Ember.set(t,"modalOpen",!0),Ember.set(t,"modal",{imageUrl:e}),parent.focus(),this.postMessage({action:"expand_all",picUrl:e})},allowScreenShare:function(){var e=this.get("model.messageId"),t=this.get("model.cobrowsingId"),s=this.get("model.channelId"),n=this.get("session.user"),a=this.get("agentPic"),i=a&&a.get("profilePicThumbUrl"),o=n.appId,r=n.name,l=n.id,u=this.get("model.conversationId"),c=this.get("model.messageUserId"),d={messageId:e,app_alias:o,name:r,role:"visitor",viewerId:l,conversationId:u,sdata:n.cobrowsingSessionData,messageUserId:c,agentName:this.get("model.messageUserName"),isMuted:!1,cobrowsingId:t,channelId:s,pic:i}
this.postMessage({action:"startScreenShare",cbData:d})},denyScreensShare:function(){var e=this.get("model.conversationId"),t=this.get("session.token"),s=this.get("session.user").appId,n=this.get("model.messageId")
this.get("screenshare").deny({token:t,messageId:n,app_alias:s,conversationId:e})}}})
e.default=r}),define("hotline-web/components/ui-message/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"FOQ+d7aF",block:'{"symbols":["individualMessage"],"statements":[[4,"if",[[27,"and",[[27,"eq",[[23,["model","messageType"]],5000],null],[23,["model","dayBreak"]]],null]],null,{"statements":[[0,"  "],[7,"div"],[11,"class","h-divide"],[9],[0,"\\n    "],[7,"ul"],[9],[0,"\\n      "],[7,"li"],[9],[7,"div"],[11,"class","d-line-left"],[9],[10],[10],[0,"\\n      "],[7,"li"],[9],[0,"\\n        "],[7,"span"],[11,"class","date"],[9],[0,"\\n"],[4,"if",[[27,"is-same",[[23,["model","dayBreak"]],[27,"now",null,null]],[["precision"],["day"]]]],null,{"statements":[[0,"            "],[1,[27,"t",["conversation.chat_headers.today"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"is-same",[[23,["model","dayBreak"]],[23,["yesterdayMillis"]]],[["precision"],["day"]]]],null,{"statements":[[0,"            "],[1,[27,"t",["conversation.chat_headers.yesterday"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"            "],[1,[27,"moment-format",[[23,["model","dayBreak"]],"D MMM YYYY"],null],false],[0,"\\n          "]],"parameters":[]}]],"parameters":[]}],[0,"        "],[10],[0,"\\n      "],[10],[0,"\\n     "],[7,"li"],[9],[7,"div"],[11,"div",""],[11,"class","d-line-right"],[9],[10],[10],[0,"\\n    "],[10],[0,"\\n  "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"or",[[27,"eq",[[23,["model","messageType"]],[23,["CONVERSATION","MESSAGE_TYPE","SCREEN_SHARING","REQUESTED"]]],null],[27,"eq",[[23,["model","messageType"]],[23,["CONVERSATION","MESSAGE_TYPE","SCREEN_SHARING","ACCEPTED"]]],null],[27,"eq",[[23,["model","messageType"]],[23,["CONVERSATION","MESSAGE_TYPE","SCREEN_SHARING","DENIED"]]],null]],null]],null,{"statements":[[0,"    "],[7,"div"],[11,"class","h-chat h-fc-co-browse-pad"],[9],[0,"\\n      "],[7,"div"],[11,"class","agent-pic"],[9],[0,"\\n"],[4,"if",[[23,["agentPic","profilePicThumbUrl"]]],null,{"statements":[[0,"            "],[7,"img"],[12,"src",[28,[[23,["agentPic","profilePicThumbUrl"]]]]],[11,"height","30px"],[11,"width","30px"],[9],[10],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"and",[[23,["hideName"]],[23,["session","appDisplayName"]]],null]],null,{"statements":[[0,"            "],[7,"span"],[11,"class","avatar-content-wrap"],[9],[0,"\\n              "],[7,"span"],[12,"class",[28,["theme-bg ",[27,"choose-theme",[[23,["session","appDisplayName"]]],null]]]],[9],[0,"\\n                "],[7,"span"],[11,"class","avatar-content"],[9],[1,[27,"avatar-content",[[23,["session","appDisplayName"]]],null],false],[10],[0,"\\n              "],[10],[0,"\\n            "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["model","messageUserName"]]],null,{"statements":[[0,"            "],[7,"span"],[11,"class","avatar-content-wrap"],[9],[0,"\\n              "],[7,"span"],[12,"class",[28,["theme-bg ",[27,"choose-theme",[[23,["model","messageUserName"]]],null]]]],[9],[0,"\\n                "],[7,"span"],[11,"class","avatar-content"],[9],[1,[27,"avatar-content",[[23,["model","messageUserName"]]],null],false],[10],[0,"\\n              "],[10],[0,"\\n            "],[10],[0,"\\n          "]],"parameters":[]},null]],"parameters":[]}]],"parameters":[]}],[0,"        "],[10],[0,"\\n        "],[7,"div"],[11,"class","h-conv multiple"],[9],[0,"\\n           "],[7,"h3"],[11,"class","agent-name"],[9],[0,"\\n"],[4,"if",[[27,"eq",[[23,["model","messageUserType"]],[23,["CONVERSATION","USER_TYPE","CHANNEL"]]],null]],null,{"statements":[[0,"            "],[1,[23,["session","appDisplayName"]],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"not",[[27,"eq",[[23,["model","messageUserType"]],[23,["CONVERSATION","USER_TYPE","USER"]]],null]],null]],null,{"statements":[[4,"if",[[23,["hideName"]]],null,{"statements":[[0,"              "],[1,[23,["session","appDisplayName"]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"              "],[1,[23,["model","messageUserFirstName"]],false],[0,"\\n"]],"parameters":[]}],[0,"          "]],"parameters":[]},null]],"parameters":[]}],[0,"        "],[10],[0,"\\n        "],[7,"ul"],[9],[0,"\\n          "],[7,"li"],[9],[0,"\\n            "],[7,"div"],[11,"class","h-fc-cobrowse"],[9],[0,"\\n"],[4,"if",[[23,["screenshareControl"]]],null,{"statements":[[0,"              "],[7,"div"],[11,"class","sc-visitor-header"],[9],[1,[27,"t",["screenShare.header_vc"],[["agentName"],[[23,["model","messageUserFirstName"]]]]],false],[10],[0,"\\n              "],[7,"div"],[11,"class","sc-visitor-footer"],[9],[0,"\\n                "],[1,[27,"t",["screenShare.footer_vc"],[["agentName"],[[23,["model","messageUserFirstName"]]]]],false],[0,"\\n                  "],[7,"a"],[11,"href","https://support.freshchat.com/support/solutions/articles/236349-important-note-about-co-browsing-for-users"],[11,"target","_blank"],[9],[1,[27,"t",["screenShare.readmorelink"],null],false],[10],[0,"\\n              "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"              "],[7,"div"],[11,"class","sc-visitor-header"],[9],[1,[27,"t",["screenShare.header"],[["agentName"],[[23,["model","messageUserFirstName"]]]]],false],[10],[0,"\\n              "],[7,"div"],[11,"class","sc-visitor-footer"],[9],[0,"\\n                "],[1,[27,"t",["screenShare.footer"],[["agentName"],[[23,["model","messageUserFirstName"]]]]],false],[0,"\\n                  "],[7,"a"],[11,"href","https://support.freshchat.com/support/solutions/articles/236349-important-note-about-co-browsing-for-users"],[11,"target","_blank"],[9],[1,[27,"t",["screenShare.readmorelink"],null],false],[10],[0,"\\n              "],[10],[0,"\\n"]],"parameters":[]}],[0,"\\n"],[4,"if",[[27,"eq",[[23,["model","messageType"]],[23,["CONVERSATION","MESSAGE_TYPE","SCREEN_SHARING","DENIED"]]],null]],null,{"statements":[[0,"                   "],[7,"div"],[11,"class","sc-visitor-tailer-control"],[9],[0,"\\n                     "],[7,"span"],[11,"class","sc-btn-container"],[9],[0,"\\n                       "],[7,"a"],[11,"class","sc-deny-btn border"],[9],[1,[27,"t",["screenShare.denied"],null],false],[10],[0,"\\n                       "],[10],[0,"\\n                   "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"eq",[[23,["model","messageType"]],[23,["CONVERSATION","MESSAGE_TYPE","SCREEN_SHARING","ACCEPTED"]]],null]],null,{"statements":[[0,"                    "],[7,"div"],[11,"class","sc-visitor-tailer-control"],[9],[0,"\\n                     "],[7,"span"],[11,"class","sc-btn-container"],[9],[0,"\\n                       "],[7,"a"],[11,"class","sc-deny-btn border"],[9],[7,"img"],[11,"src","https://assetscdn-wchat.freshchat.com/static/assets/images/ic_tick-c2ebc9de4f9fc01166f9b4980012817a.svg"],[9],[10],[0,"\\n                       "],[1,[27,"t",["screenShare.approved"],null],false],[10],[0,"\\n                       "],[10],[0,"\\n                   "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                  "],[7,"div"],[11,"class","sc-visitor-tailer-control"],[9],[0,"\\n                      "],[7,"span"],[11,"class","sc-btn-container"],[9],[7,"a"],[11,"href","#"],[11,"class","sc-accept-btn"],[3,"action",[[22,0,[]],"allowScreenShare",true]],[9],[1,[27,"t",["screenShare.allow"],null],false],[10],[10],[0,"\\n                      "],[7,"span"],[11,"class","sc-btn-container"],[9],[7,"a"],[11,"href","#"],[11,"class","sc-deny-btn"],[3,"action",[[22,0,[]],"denyScreensShare"]],[9],[1,[27,"t",["screenShare.deny"],null],false],[10],[10],[0,"\\n                  "],[10],[0,"\\n                "]],"parameters":[]}]],"parameters":[]}],[0,"            "],[10],[0,"\\n          "],[10],[0,"\\n        "],[10],[0,"\\n      "],[10],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"or",[[27,"eq",[[23,["model","messageType"]],[23,["CONVERSATION","MESSAGE_TYPE","SCREEN_SHARING","CANCELLD"]]],null],[27,"eq",[[23,["model","messageType"]],[23,["CONVERSATION","MESSAGE_TYPE","SCREEN_SHARING","ENDED"]]],null]],null]],null,{"statements":[[0,"  "],[7,"div"],[11,"class","h-chat"],[9],[0,"\\n"],[4,"if",[[27,"eq",[[23,["model","messageType"]],[23,["CONVERSATION","MESSAGE_TYPE","SCREEN_SHARING","CANCELLD"]]],null]],null,{"statements":[[0,"      "],[7,"div"],[11,"class","h-fc-cb-status-messge"],[9],[0," "],[1,[27,"t",["screenShare.reqCancelled"],null],false],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"      "],[7,"div"],[11,"class","h-fc-cb-status-messge"],[9],[0," "],[1,[27,"t",["screenShare.sessionEnd"],null],false],[10],[0,"\\n"]],"parameters":[]}],[10],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"eq",[[23,["model","messageType"]],5001],null]],null,{"statements":[[0,"  "],[7,"div"],[11,"class","h-divide"],[9],[0,"\\n    "],[7,"ul"],[9],[0,"\\n       "],[7,"li"],[9],[7,"div"],[11,"class","line"],[9],[10],[10],[0,"\\n       "],[7,"li"],[9],[7,"span"],[11,"class","text"],[9],[1,[27,"t",["conversation.chat_headers.new"],null],false],[10],[10],[0,"\\n       "],[7,"li"],[9],[7,"div"],[11,"div",""],[11,"class","line"],[9],[10],[10],[0,"\\n    "],[10],[0,"\\n  "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"  "],[7,"div"],[12,"class",[28,["h-chat ",[27,"if",[[23,["isArticleView"]],"h-article-view"],null]]]],[9],[0,"\\n"],[4,"if",[[27,"not",[[27,"eq",[[23,["model","messageUserType"]],[23,["CONVERSATION","USER_TYPE","USER"]]],null]],null]],null,{"statements":[[4,"if",[[27,"eq",[[23,["model","messageType"]],[23,["CONVERSATION","MESSAGE_TYPE","BOT"]]],null]],null,{"statements":[[4,"if",[[23,["agentMessagePic"]]],null,{"statements":[[0,"          "],[7,"div"],[11,"class","agent-pic"],[9],[0,"\\n            "],[7,"img"],[12,"src",[21,"agentMessagePic"]],[11,"height","30px"],[11,"width","30px"],[9],[10],[0,"\\n          "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},{"statements":[[4,"if",[[27,"not",[[27,"eq",[[23,["model","messageType"]],[23,["CONVERSATION","MESSAGE_TYPE","BOT"]]],null]],null]],null,{"statements":[[0,"        "],[7,"div"],[11,"class","agent-pic"],[9],[0,"\\n"],[4,"if",[[23,["agentPic","profilePicThumbUrl"]]],null,{"statements":[[0,"            "],[7,"img"],[12,"src",[28,[[23,["agentPic","profilePicThumbUrl"]]]]],[11,"height","30px"],[11,"width","30px"],[9],[10],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["agentPic","firstName"]]],null,{"statements":[[0,"            "],[7,"span"],[11,"class","avatar-content-wrap"],[9],[0,"\\n              "],[7,"span"],[12,"class",[28,["theme-bg ",[27,"choose-theme",[[23,["agentPic","firstName"]]],null]]]],[9],[0,"\\n                "],[7,"span"],[11,"class","avatar-content"],[9],[1,[27,"avatar-content",[[23,["agentPic","firstName"]]],null],false],[10],[0,"\\n              "],[10],[0,"\\n            "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"and",[[23,["hideName"]],[23,["session","appDisplayName"]]],null]],null,{"statements":[[0,"            "],[7,"span"],[11,"class","avatar-content-wrap"],[9],[0,"\\n              "],[7,"span"],[12,"class",[28,["theme-bg ",[27,"choose-theme",[[23,["session","appDisplayName"]]],null]]]],[9],[0,"\\n                "],[7,"span"],[11,"class","avatar-content"],[9],[1,[27,"avatar-content",[[23,["session","appDisplayName"]]],null],false],[10],[0,"\\n              "],[10],[0,"\\n            "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["model","messageUserName"]]],null,{"statements":[[0,"            "],[7,"span"],[11,"class","avatar-content-wrap"],[9],[0,"\\n              "],[7,"span"],[12,"class",[28,["theme-bg ",[27,"choose-theme",[[23,["model","messageUserName"]]],null]]]],[9],[0,"\\n                "],[7,"span"],[11,"class","avatar-content"],[9],[1,[27,"avatar-content",[[23,["model","messageUserName"]]],null],false],[10],[0,"\\n              "],[10],[0,"\\n            "],[10],[0,"\\n          "]],"parameters":[]},null]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}],[0,"        "],[10],[0,"\\n        "],[7,"span"],[11,"class","time"],[9],[0,"\\n"],[4,"if",[[23,["deliveredMillis"]]],null,{"statements":[[4,"if",[[27,"is-same",[[23,["deliveredMillis"]],[27,"now",null,null]],[["precision"],["hour"]]]],null,{"statements":[[0,"              "],[1,[27,"moment-from-now",[[23,["deliveredMillis"]]],[["interval"],[60000]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"is-same",[[23,["deliveredMillis"]],[27,"now",null,null]],[["precision"],["day"]]]],null,{"statements":[[0,"              "],[1,[27,"moment-format",[[23,["deliveredMillis"]],"LT"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"is-same",[[23,["deliveredMillis"]],[27,"now",null,null]],[["precision"],["week"]]]],null,{"statements":[[0,"              "],[1,[27,"moment-format",[[23,["deliveredMillis"]],"ddd, LT"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"is-same",[[23,["deliveredMillis"]],[27,"now",null,null]],[["precision"],["year"]]]],null,{"statements":[[0,"              "],[1,[27,"moment-format",[[23,["deliveredMillis"]],"MMM D, LT"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"              "],[1,[27,"moment-format",[[23,["deliveredMillis"]],"ll, LT"],null],false],[0,"\\n            "]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]},null],[0,"        "],[10],[0,"\\n      "]],"parameters":[]},null]],"parameters":[]}]],"parameters":[]},null],[0,"     "],[7,"div"],[11,"class","h-conv multiple"],[9],[0,"\\n"],[4,"if",[[23,["agentName"]]],null,{"statements":[[0,"        "],[7,"h3"],[11,"class","agent-name"],[9],[1,[27,"sanitize-html",[[23,["agentName"]],"strict"],null],false],[10],[0,"\\n"]],"parameters":[]},null],[0,"      "],[7,"ul"],[9],[0,"\\n"],[4,"each",[[23,["wrapedMessage"]]],null,{"statements":[[0,"          "],[7,"li"],[9],[0,"\\n              "],[1,[27,"ui-unity-message-fragment",null,[["message","isMessageUnauthenticated"],[[22,1,[]],[23,["isMessageUnauthenticated"]]]]],false],[0,"\\n          "],[10],[0,"\\n"]],"parameters":[1]},null],[0,"      "],[10],[0,"\\n"],[4,"if",[[27,"eq",[[23,["model","messageUserType"]],[23,["CONVERSATION","USER_TYPE","USER"]]],null]],null,{"statements":[[0,"        "],[7,"div"],[11,"class","time"],[9],[0,"\\n"],[4,"if",[[23,["isMessagePending"]]],null,{"statements":[[0,"          "],[7,"div"],[9],[1,[27,"t",["message.pending"],null],false],[10],[0,"\\n          "],[2," <div class=\\"icon icon-ic_message_sending\\"></div> "],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"is-same",[[23,["deliveredMillis"]],[27,"now",null,null]],[["precision"],["hour"]]]],null,{"statements":[[0,"            "],[1,[27,"moment-from-now",[[23,["deliveredMillis"]]],[["interval"],[60000]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"is-same",[[23,["deliveredMillis"]],[27,"now",null,null]],[["precision"],["day"]]]],null,{"statements":[[0,"            "],[1,[27,"moment-format",[[23,["deliveredMillis"]],"LT"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"is-same",[[23,["deliveredMillis"]],[27,"now",null,null]],[["precision"],["week"]]]],null,{"statements":[[0,"            "],[1,[27,"moment-format",[[23,["deliveredMillis"]],"ddd, LT"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"is-same",[[23,["deliveredMillis"]],[27,"now",null,null]],[["precision"],["year"]]]],null,{"statements":[[0,"            "],[1,[27,"moment-format",[[23,["deliveredMillis"]],"MMM D, LT"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"            "],[1,[27,"moment-format",[[23,["deliveredMillis"]],"ll, LT"],null],false],[0,"\\n          "]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}],[0,"        "],[10],[0,"\\n"]],"parameters":[]},null],[0,"     "],[10],[0,"\\n  "],[10],[0,"\\n"]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"hasEval":false}',meta:{moduleName:"hotline-web/components/ui-message/template.hbs"}})
e.default=t})
define("hotline-web/components/ui-modal/component",["exports","hotline-web/mixins/message","hotline-web/utils/constants","hotline-web/utils/utils","hotline-web/mixins/handle-event","hotline-web/mixins/localstorage","hotline-web/utils/regex-utils"],function(e,t,s,n,a,i,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var r=Ember.Component.extend(t.default,n.default,a.default,i.default,{modalOpen:Ember.computed.bool("hotline.ui.modalOpen"),isIframeModal:Ember.computed.bool("hotline.ui.modal.thirdPartyURL"),classNameBindings:["modalOpen:fc_web_modal","isIframeModal:inside-widget"],classNames:["fc_web_modal_closed"],upvoted:!1,downvoted:!1,isFrameLoaded:!1,votedSuccessfully:!1,didInsertElement:function(){var e=this.get("hotline.ui.modal")
window.addEventListener?window.addEventListener("keydown",Ember.get(this,"keyDownCB"),!0):window.attachEvent("keydown",Ember.get(this,"keyDownCB"),!0),e&&this.updateEvent("fc_read_article",{articleId:e.articleId,categoryId:e.categoryId,title:e.title})},keyDownCB:Ember.computed({get:function(){return this.didKeyDown.bind(this)}}),iframeDomainURL:Ember.computed("hotline.ui.modal.thirdPartyURL",{get:function(){var e=this.get("hotline.ui.modal.thirdPartyURL")
return o.default.getDomainName(e)}}),iframeHTTPS:Ember.computed("hotline.ui.modal.thirdPartyURL",{get:function(){var e=this.get("hotline.ui.modal.thirdPartyURL")
return o.default.checkHTTPSurl(e)}}),iframeURL:Ember.computed("hotline.ui.modal.thirdPartyURL",{get:function(){var e=this.get("hotline.ui.modal.thirdPartyURL"),t=document.location.origin,s={fc_user_id:this.get("session.user.alias"),fc_origin_url:t}
return n.default.addQueryParams(e,s)}}),willDestroyElement:function(){window.removeEventListener?window.removeEventListener("keydown",Ember.get(this,"keyDownCB"),!0):window.detachEvent("keydown",Ember.get(this,"keyDownCB"))},didKeyDown:function(){27===event.keyCode&&this.send("closeModal")},votedAlready:Ember.computed({get:function(){var e,t=this.getItemLS("articles"),s=t&&JSON.parse(t),n=this.get("hotline.ui"),a=n&&n.modal
return s&&(e=s.indexOf(a.articleId)),-1!==e&&void 0!==e}}),actions:{closeModal:function(){var e=this.get("hotline.ui")
if(e.modal){if(Ember.set(e,"modalOpen",!1),Ember.set(e,"openArticleFromMessage",!1),this.get("session.config.faqPopupView")){var t=Ember.$(".search-input-text")
Ember.set(e,"modal",void 0),t&&t.focus()}Ember.$("html").removeClass("expanded-modal"),this.postMessage({action:"collapse_all"})}},gotoMessages:function(){this.get("home")(),this.send("closeModal")},upvoteDownvoteArticle:function(e){var t=this,n=this.get("hotline.ui"),a=n&&n.modal,i={},o=this.get("session.token"),r=this.get("session.siteId"),l=n&&n.lastLocaleId,u=s.default.EmberModelUrl.upvoteDownvote.url.replace("{token}",o).replace("{categoryId}",a.categoryId).replace("{articleId}",a.articleId).replace("{localeId}",l)
e?i.upvote=1:i.downvote=1,r&&(u+="&siteId=".concat(r))
var c=this.getItemLS("articles"),d=c&&JSON.parse(c)
c||(d=[]),Ember.$.ajax({type:"PUT",url:u,data:JSON.stringify(i),contentType:"application/json; charset=UTF-8"}).then(function(s){s&&s.errorCode||(d.push(a.articleId),t.setItemLS("articles",JSON.stringify(d)),e?t.set("upvoted",!0):t.set("downvoted",!0),t.set("votedSuccessfully",!0))},function(){})},expandArticle:function(){Ember.$("html").addClass("expanded-modal"),Ember.set(this.get("hotline.ui"),"modalOpen",!0),this.postMessage({action:"expand_all"})},frameLoaded:function(){this.set("isFrameLoaded",!0)}}})
e.default=r}),define("hotline-web/components/ui-modal/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"Gyrgyt+S",block:'{"symbols":[],"statements":[[4,"if",[[23,["hotline","ui","modal","imageUrl"]]],null,{"statements":[[0,"\\t"],[7,"div"],[11,"class","image-wrapper"],[3,"action",[[22,0,[]],"closeModal"]],[9],[0,"\\n\\t\\t"],[7,"div"],[11,"class","image-cell"],[9],[0,"\\n\\t\\t\\t"],[7,"img"],[12,"src",[23,["hotline","ui","modal","imageUrl"]]],[9],[10],[0,"\\n\\t\\t"],[10],[0,"\\n\\t"],[10],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["hotline","ui","modal","thirdPartyURL"]]],null,{"statements":[[0,"\\t"],[7,"div"],[11,"class","animated fadeIn iframe-modal"],[9],[0,"\\n\\t\\t"],[7,"div"],[11,"class","h-modal-notes "],[9],[0,"\\n\\t\\t\\t"],[7,"div"],[11,"class","modal-header"],[9],[0,"\\n\\t\\t\\t\\t"],[7,"span"],[11,"class","h-close"],[3,"action",[[22,0,[]],"closeModal"]],[9],[7,"i"],[11,"class","icon icon-ic_close mild"],[9],[10],[0," "],[10],[0,"\\n\\t\\t\\t\\t"],[7,"span"],[11,"class","frame-title"],[9],[0,"\\n"],[4,"if",[[23,["iframeHTTPS"]]],null,{"statements":[[0,"\\t\\t\\t\\t\\t\\t"],[7,"img"],[11,"src","https://assetscdn-wchat.freshchat.com/static/assets/images/lock-bd52a80b078ad5b587519266491c726d.png"],[9],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"\\t\\t\\t\\t\\t\\t"],[7,"img"],[11,"src","https://assetscdn-wchat.freshchat.com/static/assets/images/info-circle-12d00979977edcba64dc3422b285d844.png"],[9],[10],[0,"\\n"]],"parameters":[]}],[0,"\\t\\t\\t\\t\\t"],[1,[21,"iframeDomainURL"],false],[0,"\\n\\t\\t\\t\\t"],[10],[0,"\\n\\t\\t\\t"],[10],[0,"\\n\\t\\t\\t"],[7,"div"],[11,"class","modal-body"],[9],[0,"\\n"],[4,"unless",[[23,["isFrameLoaded"]]],null,{"statements":[[0,"\\t\\t\\t\\t\\t"],[1,[21,"app-loader"],false],[0,"\\n"]],"parameters":[]},null],[0,"\\t\\t\\t\\t"],[7,"iframe"],[11,"class","external-iframe"],[12,"onload",[27,"action",[[22,0,[]],"frameLoaded"],null]],[12,"src",[21,"iframeURL"]],[9],[10],[0,"\\n\\t\\t\\t"],[10],[0,"\\n\\t\\t"],[10],[0,"\\n\\t"],[10],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["hotline","ui","modal","articleId"]]],null,{"statements":[[4,"if",[[27,"not",[[23,["hotline","ui","modalOpen"]]],null]],null,{"statements":[[0,"\\t\\t"],[7,"span"],[11,"class","h-expand-modal-icon"],[3,"action",[[22,0,[]],"expandArticle"]],[9],[0,"\\n\\t\\t\\t"],[7,"i"],[11,"class","icon icon-expand-alt black"],[9],[10],[0,"\\n\\t\\t"],[10],[0,"\\n"]],"parameters":[]},null],[0,"\\t"],[7,"div"],[12,"class",[28,["animated fadeIn ",[27,"if",[[23,["hotline","ui","modalOpen"]],"article-modal"],null]]]],[9],[0,"\\n\\t\\t"],[7,"div"],[12,"class",[28,["h-modal-notes ",[27,"if",[[23,["hotline","ui","modalOpen"]],"expandedModal"],null]]]],[9],[0,"\\n"],[4,"if",[[23,["hotline","ui","modalOpen"]]],null,{"statements":[[0,"\\t\\t\\t\\t"],[7,"div"],[11,"class","modal-header"],[9],[0,"\\n\\t\\t\\t\\t\\t"],[7,"span"],[11,"class","modal-title"],[9],[1,[27,"sanitize-html",[[23,["hotline","ui","modal","title"]],"strict"],null],false],[10],[0,"\\n\\t\\t\\t\\t\\t"],[7,"span"],[11,"class","h-close"],[3,"action",[[22,0,[]],"closeModal"]],[9],[7,"i"],[11,"class","icon icon-compress-alt black"],[9],[10],[0," "],[10],[0,"\\n\\t\\t\\t\\t"],[10],[0,"\\n"]],"parameters":[]},null],[0,"\\t\\t\\t"],[7,"div"],[11,"class","modal-body"],[9],[0,"\\n\\t\\t\\t\\t"],[1,[23,["hotline","ui","modal","content"]],true],[0,"\\n\\t\\t\\t"],[10],[0,"\\n\\t\\t"],[10],[0,"\\n"],[4,"if",[[27,"not",[[23,["votedAlready"]]],null]],null,{"statements":[[0,"\\t\\t\\t"],[7,"div"],[11,"class","modal-footer"],[9],[0,"\\n\\t\\t\\t\\t"],[7,"div"],[11,"class","article_vote_outer"],[9],[0,"\\n"],[4,"if",[[27,"not",[[23,["votedSuccessfully"]]],null]],null,{"statements":[[0,"\\t\\t\\t\\t\\t\\t"],[7,"span"],[11,"class","article_vote_content"],[9],[0,"\\n"],[4,"if",[[23,["session","config","content","headers","faq_useful"]]],null,{"statements":[[0,"\\t\\t\\t\\t\\t\\t\\t\\t"],[2," {{session.config.content.headers.faq_useful}} "],[0,"\\n\\t\\t\\t\\t\\t\\t\\t\\t"],[1,[27,"sanitize-html",[[23,["session","config","content","headers","faq_useful"]],"strict"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"\\t\\t\\t\\t\\t\\t\\t\\t"],[1,[27,"t",["faqs.useful_question"],null],false],[0,"\\n"]],"parameters":[]}],[0,"\\t\\t\\t\\t\\t\\t"],[10],[0,"\\n\\t\\t\\t\\t\\t\\t"],[7,"span"],[11,"class","article_vote article_like"],[3,"action",[[22,0,[]],"upvoteDownvoteArticle",true]],[9],[7,"img"],[11,"src","https://assetscdn-wchat.freshchat.com/static/assets/images/thumbs-up-668b881e20ab95b999484181234539a9.svg"],[9],[10],[10],[0,"\\n\\t\\t\\t\\t\\t\\t"],[7,"span"],[11,"class","article_vote article_dislike"],[3,"action",[[22,0,[]],"upvoteDownvoteArticle",false]],[9],[7,"img"],[11,"src","https://assetscdn-wchat.freshchat.com/static/assets/images/thumbs-down-0467628fa0e97e3adfa639df190a6b43.svg"],[9],[10],[10],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["votedSuccessfully"]]],null,{"statements":[[0,"\\t\\t\\t\\t\\t\\t"],[7,"span"],[11,"class","thank_you animated fadeIn"],[9],[0,"\\n"],[4,"if",[[23,["session","config","content","headers","faq_thankyou"]]],null,{"statements":[[0,"\\t\\t\\t\\t\\t\\t\\t\\t"],[2," {{session.config.content.headers.faq_thankyou}} "],[0,"\\n\\t\\t\\t\\t\\t\\t\\t\\t"],[1,[27,"sanitize-html",[[23,["session","config","content","headers","faq_thankyou"]],"strict"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"\\t\\t\\t\\t\\t\\t\\t\\t"],[1,[27,"t",["faqs.thank_you_for_feedback"],null],false],[0,"\\n"]],"parameters":[]}],[0,"\\t\\t\\t\\t\\t\\t"],[10],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[4,"if",[[27,"and",[[27,"not",[[23,["hotline","ui","openArticleFromMessage"]]],null],[23,["downvoted"]]],null]],null,{"statements":[[0,"\\t\\t\\t       "],[7,"div"],[11,"class","h-message-us animated fadeIn"],[3,"action",[[22,0,[]],"gotoMessages"]],[9],[0,"\\n\\t\\t\\t         "],[7,"div"],[11,"class","h-message-us-btn"],[9],[0,"\\n\\t\\t\\t          "],[7,"i"],[11,"class","chat_double icon-ic_chat_icon"],[11,"aria-hidden","true"],[9],[10],[0,"\\n\\t\\t\\t          "],[7,"span"],[9],[0,"\\n"],[4,"if",[[23,["session","config","content","headers","faq_message_us"]]],null,{"statements":[[0,"\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t"],[2," {{session.config.content.headers.faq_message_us}} "],[0,"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t"],[1,[27,"sanitize-html",[[23,["session","config","content","headers","faq_message_us"]],"strict"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t"],[1,[27,"t",["faqs.message_us_link"],null],false],[0,"\\n"]],"parameters":[]}],[0,"\\t\\t\\t\\t\\t\\t\\t\\t"],[10],[0,"\\n\\t\\t\\t         "],[10],[0,"\\n\\t\\t\\t       "],[10],[0,"\\n"]],"parameters":[]},null],[0,"\\t\\t\\t\\t"],[10],[0,"\\n\\t\\t\\t"],[10],[0,"\\n"]],"parameters":[]},null],[0,"\\t"],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]}]],"parameters":[]}]],"hasEval":false}',meta:{moduleName:"hotline-web/components/ui-modal/template.hbs"}})
e.default=t}),define("hotline-web/components/ui-tabs-button/component",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.Component.extend({tagName:""})
e.default=t}),define("hotline-web/components/ui-tabs-button/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"cIkcNFjM",block:'{"symbols":[],"statements":[[4,"if",[[27,"eq",[[23,["tab"]],"chat"],null]],null,{"statements":[[4,"if",[[23,["active"]]],null,{"statements":[[0,"    "],[7,"div"],[11,"class","tabs-inner chat"],[9],[0,"\\n      "],[7,"div"],[11,"class","faq-link active"],[9],[0,"\\n          "],[7,"i"],[11,"class","chat_double icon-ic_chat_icon"],[9],[10],[0,"\\n"],[4,"if",[[23,["session","config","content","actions","tab_chat"]]],null,{"statements":[[0,"            "],[2," {{session.config.content.actions.tab_chat}} "],[0,"\\n            "],[1,[27,"sanitize-html",[[23,["session","config","content","actions","tab_chat"]],"strict"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"             "],[1,[27,"t",["uiTabs.chat"],null],false],[0,"\\n"]],"parameters":[]}],[0,"      "],[10],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[4,"link-to",["channels"],[["class","replace"],["faq-link-wrapper",true]],{"statements":[[0,"      "],[7,"div"],[11,"class","tabs-inner chat inactive"],[9],[0,"\\n        "],[7,"div"],[11,"class","faq-link"],[9],[0,"\\n            "],[7,"i"],[11,"class","chat_double icon-ic_chat_icon"],[9],[10],[0,"\\n"],[4,"if",[[23,["session","config","content","actions","tab_chat"]]],null,{"statements":[[0,"              "],[2," {{session.config.content.actions.tab_chat}} "],[0,"\\n              "],[1,[27,"sanitize-html",[[23,["session","config","content","actions","tab_chat"]],"strict"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"               "],[1,[27,"t",["uiTabs.chat"],null],false],[0,"\\n"]],"parameters":[]}],[0,"        "],[10],[0,"\\n      "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]}]],"parameters":[]},{"statements":[[4,"if",[[23,["active"]]],null,{"statements":[[0,"    "],[7,"div"],[11,"class","tabs-inner faq"],[9],[0,"\\n      "],[7,"div"],[11,"class","faq-link active"],[9],[0,"\\n        "],[7,"i"],[11,"class","faq_black icon-ic_message"],[9],[10],[0,"\\n"],[4,"if",[[23,["session","config","content","actions","tab_faq"]]],null,{"statements":[[0,"          "],[2," {{session.config.content.actions.tab_faq}} "],[0,"\\n          "],[1,[27,"sanitize-html",[[23,["session","config","content","actions","tab_faq"]],"strict"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"           "],[1,[27,"t",["uiTabs.faq"],null],false],[0,"\\n"]],"parameters":[]}],[0,"      "],[10],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[4,"link-to",["faqs",[27,"query-params",null,[["isDeepLinkFAQ"],[false]]]],[["class","replace"],["faq-link-wrapper",true]],{"statements":[[0,"      "],[7,"div"],[11,"class","tabs-inner faq inactive"],[9],[0,"\\n        "],[7,"div"],[11,"class","faq-link"],[9],[0,"\\n          "],[7,"i"],[11,"class","faq_black icon-ic_message"],[9],[10],[0,"\\n"],[4,"if",[[23,["session","config","content","actions","tab_faq"]]],null,{"statements":[[0,"            "],[2," {{session.config.content.actions.tab_faq}} "],[0,"\\n            "],[1,[27,"sanitize-html",[[23,["session","config","content","actions","tab_faq"]],"strict"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"             "],[1,[27,"t",["uiTabs.faq"],null],false],[0,"\\n"]],"parameters":[]}],[0,"        "],[10],[0,"\\n      "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]}]],"parameters":[]}]],"hasEval":false}',meta:{moduleName:"hotline-web/components/ui-tabs-button/template.hbs"}})
e.default=t}),define("hotline-web/components/ui-tabs/component",["exports","hotline-web/mixins/datastore"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=Ember.Component.extend(t.default,{classNames:["tabs"],classNameBindings:["hidden:dn"],hidden:Ember.computed("showTabs",{get:function(){return!this.get("showTabs")}}),showFAQOnOpen:Ember.computed.alias("session.config.showFAQOnOpen")})
e.default=s}),define("hotline-web/components/ui-tabs/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"2XAiarP9",block:'{"symbols":[],"statements":[[4,"if",[[23,["showTabs"]]],null,{"statements":[[4,"if",[[27,"eq",[[23,["active"]],"chat"],null]],null,{"statements":[[4,"if",[[23,["showFAQOnOpen"]]],null,{"statements":[[0,"      "],[1,[27,"ui-tabs-button",null,[["active","tab"],[false,"faq"]]],false],[0,"\\n      "],[1,[27,"ui-tabs-button",null,[["active","tab"],[true,[23,["active"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"      "],[1,[27,"ui-tabs-button",null,[["active","tab"],[true,[23,["active"]]]]],false],[0,"\\n      "],[1,[27,"ui-tabs-button",null,[["active","tab"],[false,"faq"]]],false],[0,"\\n"]],"parameters":[]}]],"parameters":[]},{"statements":[[4,"if",[[23,["showFAQOnOpen"]]],null,{"statements":[[0,"      "],[1,[27,"ui-tabs-button",null,[["active","tab"],[true,[23,["active"]]]]],false],[0,"\\n      "],[1,[27,"ui-tabs-button",null,[["active","tab"],[false,"chat"]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"      "],[1,[27,"ui-tabs-button",null,[["active","tab"],[false,"chat"]]],false],[0,"\\n      "],[1,[27,"ui-tabs-button",null,[["active","tab"],[true,[23,["chat"]]]]],false],[0,"\\n"]],"parameters":[]}]],"parameters":[]}]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"hotline-web/components/ui-tabs/template.hbs"}})
e.default=t}),define("hotline-web/components/ui-unity-medium-editor/component",["exports","hotline-web/mixins/direction","hotline-web/config/environment","hotline-web/utils/constants","hotline-web/mixins/file-upload-helper-mixin"],function(e,t,s,n,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var i=Ember.Component.extend(t.default,a.default,{Config:s.default,tagName:"div",attributeBindings:["contenteditable"],editable:!0,isUserTyping:!1,plaintext:!1,classNames:["editable","ce-textarea","emoji"],classNameBindings:["isValidationError:validation-error","hideFileUpload:fc-file-upload-hidden"],mediumEditor:void 0,triggerChange:function(){var e=Ember.$(this.get("element"))
Ember.run.next(this,function(){e.trigger("change")})},defaultContent:function(){var e=document.createElement("p")
e.appendChild(document.createElement("br"))
if(this.get("mediumEditor").elements[0]){var t=this.get("mediumEditor").elements[0]
t.appendChild(e),this.get("mediumEditor").events.updateInput(t,{target:t,currentTarget:t})}},insertContentToEditor:function(e){if(this.get("mediumEditor").elements[0]){var t=this.get("mediumEditor").elements[0]
e&&(t.lastChild&&/^(\s+|<br\/?>)?$/i.test(t.lastChild.innerHTML)&&t.removeChild(t.lastChild),t.appendChild(e)),this.get("mediumEditor").events.updateInput(t,{target:t,currentTarget:t})}},didInsertElement:function(){var e=this.get("options")
e.paste.handlePasteBinPaste=this.handlePaste(),e.paste.handlePaste=this.handlePaste(),this.get("session.config.content.placeholders.reply_field")?e.placeholder.text=this.get("session.config.content.placeholders.reply_field"):e.placeholder.text=this.get("intl").t("conversation.ce.placeholders.default")
var t=new MediumEditor(this.$(),e),a=this,i=this.get("r2l")?"right":"left",o=this.get("hotline.ui.isDesktop")
return this.get("emojiSupport")&&o&&this.$(this.element).emojiPicker({width:200,height:340,position:i,button:!1,storageAvailable:this.get("hotline.ui.storageAvailable"),labels:function(e){var t=a.get("session.config.content.placeholders.emoji."+e)
return t||a.get("intl").t("conversation.ce."+e).toString()},cdnUrl:s.default.EmberENV.cdnUrl,onShow:function(e,t,s){var n=a.$(a.element),i=n.offset().top-e.outerHeight()+8;("rtl"===document.body.attributes.dir.value&&"left"!==t.position||"ltr"===document.body.attributes.dir.value&&"right"!==t.position)&&(t.position="left"===t.position?"right":"left",n.emojiPicker("position")),e.css({top:i+"px"}),s&&e.find("nav .tab[data-tab=recent]").addClass("active")},onHide:function(e,t,s){s||e.find("nav .tab").removeClass("active")},onClicked:function(){a.$(a.element).trigger("change"),a.insertContentToEditor("")},contenteditable:!0}),Ember.run.scheduleOnce("afterRender",this,function(){var e=this
this.get("editable")?this.set("contenteditable",!0):this.set("contenteditable",!1),this.set("mediumEditor",t)
var s=Ember.$(this.get("element"))
if(s.bind("blur keyup paste copy cut input",Ember.get(this,"triggerChangeCB")),"Chrome"===this.get("hotline.ui.browser.name")){var a=this
s.bind("paste",function(t){var s=t.originalEvent.clipboardData
if(t.originalEvent.preventDefault(),s&&s.types){if(-1!==s.types.indexOf("Files")&&(-1!==s.types.indexOf("text/html")||e.get("hideFileUpload")))return
for(var i=0,o=s.types.length;o>i;i++)if(s.types[i].match(/image.*/)||s.items&&s.items[i].type.match(/image.*/)){var r,l=void 0
r=s.items[i].getAsFile(),(l=new FileReader).onload=function(e,t,s){return function(n){e.set("content",{data:n.target.result,fileData:t,fileType:s,attr:{height:200,width:200}})}}(a,r,n.default.FILETYPE.IMAGE),l.readAsDataURL(r)}}})}this.defaultContent()
var i=this.get("mediumEditor").elements[0]
i.innerHTML="",this.get("mediumEditor").events.updateInput(i,{target:i,currentTarget:i})}),this.setContent()},triggerChangeCB:Ember.computed({get:function(){return this.triggerChange.bind(this)}}),hideFileUpload:Ember.computed.alias("session.config.hideFileUpload"),placeCaretAtEnd:function(){var e=Ember.$(this.get("element"))?Ember.$(this.get("element"))[0]:null
if(e.focus(),void 0!==window.getSelection&&void 0!==document.createRange){var t=document.createRange()
t.selectNodeContents(e),t.collapse(!1),MediumEditor.selection.moveCursor(document,this.$(this.get("element")).find("p:last-child")[0])
var s=window.getSelection()
s.removeAllRanges(),s.addRange(t)}else if(void 0!==document.body.createTextRange){var n=document.body.createTextRange()
n.moveToElementText(e),n.collapse(!1),n.select()}},willDestroyElement:function(){var e=Ember.$(this.get("element"))
e.unbind("blur keyup paste copy cut input",Ember.get(this,"triggerChangeCB")),e.unbind("paste")
var t=this.get("hotline.ui.isDesktop")
if(this.get("emojiSupport")&&t){var s=this.$(this.element)
s&&s.emojiPicker("destroy")}var n=this.get("mediumEditor"),a=n&&n.events
a&&a.lastMousedownTarget&&delete a.lastMousedownTarget,n&&n.origElements&&delete n.origElements,n.destroy()},change:function(){return this.get("plaintext")?this.set("value",this.$().text()):this.set("value",this.$().html())},focusOut:function(){this.onBlur&&this.onBlur()},focusIn:function(){this.onFocus&&this.onFocus()},keyDown:function(e){switch(e.which){case 13:e.shiftKey||(e.preventDefault(),this.onKeyDown&&this.onKeyDown(this.get("value"),e))
break
default:this.onKeyDown&&this.onKeyDown(this.get("value"),e)}},keyUp:function(e){this.onKeyUp&&this.onKeyUp(e),this.checkIfTextLengthExceedsLimit()},valueDidChange:Ember.observer("value",function(){this.set("height",this.$().height()),this.$()&&this.get("value")!==this.$().html()&&this.setContent()}),handlePaste:function(){var e=this
return function(t){var a,i,o,r="",l="text/html",u="text/plain",c=Ember.$.fn.emojiPicker,d=c?c.emojis:null,m=c?c.codes:null,h=c?c.regUnicode:null
this.window&&this.window.clipboardData&&void 0===t.clipboardData&&(t.clipboardData=this.window.clipboardData,l="Text",u="Text"),MediumEditor.extensions.paste.prototype.removePasteBin.call(this)
var f=navigator.userAgent
if(-1===t.clipboardData.types.indexOf("Files")||-1!==f.indexOf("Chrome")&&!e.get("hideFileUpload")){if(t.clipboardData&&t.clipboardData.getData&&t.clipboardData.types&&(-1===t.clipboardData.types.indexOf("Files")||-1!==t.clipboardData.types.indexOf("Files")&&-1!==t.clipboardData.types.indexOf("text/html"))&&!t.defaultPrevented){if(t.preventDefault(),a=t.clipboardData.getData(l),i=t.clipboardData.getData(u),this.cleanPastedHTML&&a)return this.cleanPaste(a)
r=MediumEditor.util.htmlEntities(i),h&&m&&d&&(r=r.replace(h,function(e){return m.hasOwnProperty(e)?(o=d[m[e]],"<img class='emojiCe' src='"+s.default.EmberENV.cdnUrl+"assets/images/emojis/emoji-"+o.s+".png' alt='"+o.c+"'/>"):e})),MediumEditor.util.insertHTMLCommand(this.document,"<P>"+r+"</P>")}else Ember.$(this.base.elements[0]).trigger(Ember.$.Event(t))
e.getTextFromEditorForClosedOrOpenWidgetState().length>n.default.MessageSpecs.maxLength&&e.exceedAction(!0)}else t.preventDefault()}},setContent:function(){this.$()&&this.get("mediumEditor")&&this.get("mediumEditor").setContent(this.get("value"))},checkIfTextLengthExceedsLimit:function(){var e=this.getTextFromEditorForClosedOrOpenWidgetState()
Ember.isBlank(e)||e&&e.length<n.default.MessageSpecs.maxLength?this.exceedAction(!1):this.exceedAction(!0)}})
e.default=i}),define("hotline-web/components/ui-unity-message-bubble/component",["exports","hotline-web/mixins/message","hotline-web/utils/constants","hotline-web/mixins/datastore","hotline-web/utils/utils"],function(e,t,s,n,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var i=Ember.Component.extend(t.default,n.default,{FRAGMENT:s.default.CONVERSATION.FRAGMENT_TYPE,MESSAGE_TYPE:s.default.CONVERSATION.MESSAGE_TYPE,fileName:Ember.computed("fragment.fileName",{get:function(){return this.get("fragment.fileName")||"[File Attachment]"}}),fileSize:Ember.computed("fragment.fileSize",{get:function(){return a.default.formatBytes(this.get("fragment.fileSize"))}}),fileExtension:Ember.computed("fragment.fileExtension",{get:function(){return(this.get("fragment.fileExtension")||"").toUpperCase()}}),imageUnicode:Ember.computed(function(){return Ember.String.htmlSafe("&#128247")}),faqUnicode:Ember.computed(function(){return Ember.String.htmlSafe("&#128196")}),fileUnicode:Ember.computed(function(){return Ember.String.htmlSafe("&#128206")}),fileSecurityStatus:Ember.computed.alias("fileSecurityData.fileSecurityStatus"),fileSecurityWarning:Ember.computed.equal("fileSecurityStatus",s.default.FileSecurityStatus.AVPending),fileSecurityError:Ember.computed.equal("fileSecurityStatus",s.default.FileSecurityStatus.MalwareFile),fileSecurityInfoTitle:Ember.computed("fileSecurityStatus",{get:function(){var e=this.get("fileSecurityStatus")
return this.get("intl").t("conversation.fragment.securityStatus."+e+".title")}}),fileSecurityInfoDesc:Ember.computed("fileSecurityStatus",{get:function(){var e=this.get("fileSecurityStatus")
return this.get("intl").t("conversation.fragment.securityStatus."+e+".desc")}}),articleCollection:Ember.computed("fragment.fragments",{get:function(){var e=this.get("fragment.fragments")
return e&&e.length>3?(this.set("showMoreArticle",!0),e.slice(0,3)):(this.set("showMoreArticle",!1),e)}}),downloadFileHelper:function(e){var t=document.getElementById(s.default.DownloadFileIframeId)
t||((t=document.createElement("iframe")).id=s.default.DownloadFileIframeId,t.style.display="none",document.body.appendChild(t)),t.src=e},actions:{downloadFile:function(){var e=this,t=this.get("fileSecurityData"),n=(new Date).getTime()
if(t&&n-t.fetchTime<s.default.FileUrlValidityTimeout)t.fileSecurityStatus!==s.default.FileSecurityStatus.MalwareFile&&this.downloadFileHelper(t.url)
else{var a=this.get("session.token"),i=this.get("session.user.alias"),o=s.default.EmberModelUrl.fileDownload.url.replace("{token}",a).replace("{userAlias}",i).replace("{fileHash}",this.get("fragment.fileHash"))
Ember.$.ajax({type:"GET",url:o}).then(function(t){t&&(t.fetchTime=(new Date).getTime(),e.set("fileSecurityData",t),t.fileSecurityStatus!==s.default.FileSecurityStatus.SafeFile&&t.fileSecurityStatus!==s.default.FileSecurityStatus.LargeFile||e.downloadFileHelper(t.url))},function(t){e.logger.log(t)})}},enlargeImage:function(e){var t=this.get("hotline.ui")
Ember.set(t,"modalOpen",!0),Ember.set(t,"modal",{imageUrl:e}),parent.focus(),this.postMessage({action:"expand_all",picUrl:e})},openArticle:function(e,t){var s,n=this.get("hotline.ui"),i=this.get("faqs.content").serialize()
if(i&&(s=a.default.getArticleToShow(i.dsCategories,e)))if(t)Ember.$("html").addClass("expanded-modal"),Ember.set(n,"modalOpen",!0),Ember.set(n,"modal",s),Ember.set(n,"openArticleFromMessage",!0),this.postMessage({action:"expand_all"})
else{var o=this.get("message.channelId")
this.get("router").send("gotoFAQ",s,o)}},performClickAction:function(e,t){e&&(e.content&&e.content.indexOf("freshchat://")>-1?this.send("openArticle",e.content,t):e.target&&"_blank"===e.target?window.open(e.content,"_blank"):e.target&&"_self"===e.target&&this.send("openExternalLink",e.content))},openExternalLink:function(e){var t=this.get("hotline.ui")
Ember.set(t,"modalOpen",!0),Ember.set(t,"modal",{thirdPartyURL:e,title:""}),Ember.set(t,"openArticleFromMessage",!0)},showMoreArticles:function(){var e=this,t=this.get("fragment.fragments"),s=this.get("articleCollection")
s=s.concat(t.slice(3,t.length)),this.set("articleCollection",s),this.set("showMoreArticle",!1)
var n=Ember.$(".body .h-chat-window"),a=this.$(".articles-listview").height(),i=n[0].scrollTop
Ember.run.later(function(){var t=e.$(".articles-listview").height()-a
n.animate({scrollTop:i+t},1)})}}})
e.default=i}),define("hotline-web/components/ui-unity-message-bubble/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"b+74wQn7",block:'{"symbols":["fragment"],"statements":[[4,"if",[[27,"eq",[[23,["messageType"]],[23,["MESSAGE_TYPE","SCREEN_SHARING","CANCELLD"]]],null]],null,{"statements":[[0,"    "],[1,[27,"t",["screenShare.reqCancelled"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"eq",[[23,["messageType"]],[23,["MESSAGE_TYPE","SCREEN_SHARING","ENDED"]]],null]],null,{"statements":[[0,"   "],[1,[27,"t",["screenShare.sessionEnd"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"eq",[[23,["fragment","fragmentType"]],[23,["FRAGMENT","TEXT"]]],null]],null,{"statements":[[0,"  "],[7,"div"],[11,"class","h-message-text"],[9],[1,[27,"ui-emoji-text",[[23,["fragment","content"]]],null],false],[10],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"eq",[[23,["fragment","fragmentType"]],[23,["FRAGMENT","IMAGE"]]],null]],null,{"statements":[[4,"if",[[23,["isbubble"]]],null,{"statements":[[0,"    "],[1,[21,"imageUnicode"],true],[0,"\\n"]],"parameters":[]},{"statements":[[0,"    "],[7,"div"],[11,"class","chat_img_wrp"],[9],[0,"\\n      "],[7,"img"],[12,"src",[23,["fragment","content"]]],[12,"width",[28,[[23,["fragment","width"]]]]],[11,"class","chat_img"],[11,"alt",""],[3,"action",[[22,0,[]],"enlargeImage",[23,["fragment","content"]]]],[9],[10],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]}]],"parameters":[]},{"statements":[[4,"if",[[27,"eq",[[23,["fragment","fragmentType"]],[23,["FRAGMENT","BUTTON"]]],null]],null,{"statements":[[4,"if",[[23,["isbubble"]]],null,{"statements":[[0,"    "],[1,[21,"faqUnicode"],true],[0,"\\n"]],"parameters":[]},{"statements":[[0,"    "],[7,"div"],[11,"class","img-content"],[9],[0,"\\n      "],[7,"a"],[11,"href","#"],[11,"target","new"],[11,"class","chat-btn"],[3,"action",[[22,0,[]],"performClickAction",[23,["fragment"]],true]],[9],[0,"\\n"],[4,"if",[[23,["fragment","label"]]],null,{"statements":[[0,"          "],[1,[23,["fragment","label"]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"          "],[1,[27,"t",["conversation.ce.view"],null],false],[0,"\\n"]],"parameters":[]}],[0,"      "],[10],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]}]],"parameters":[]},{"statements":[[4,"if",[[27,"eq",[[23,["fragment","fragmentType"]],[23,["FRAGMENT","FILE"]]],null]],null,{"statements":[[4,"if",[[23,["isbubble"]]],null,{"statements":[[0,"    "],[1,[21,"fileUnicode"],true],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"and",[[23,["fragment","filePreview"]],[23,["fragment","filePreview","content"]]],null]],null,{"statements":[[0,"      "],[7,"div"],[11,"class","text-file-preview"],[9],[0,"\\n        "],[7,"div"],[11,"class","text-haze-holder"],[9],[0,"\\n          "],[1,[23,["fragment","filePreview","content"]],false],[0,"\\n        "],[10],[0,"\\n        "],[7,"div"],[11,"class","file-haze"],[9],[10],[0,"\\n        "],[7,"div"],[11,"class","file-details-holder"],[9],[0,"\\n          "],[7,"span"],[11,"class","file-size-holder"],[9],[0,"\\n            "],[1,[27,"sanitize-html",[[23,["fileSize"]],"strict"],null],false],[0," • "],[1,[27,"sanitize-html",[[23,["fileExtension"]],"strict"],null],false],[0,"\\n          "],[10],[0,"\\n          "],[7,"span"],[11,"class","file-download-button-holder"],[9],[0,"\\n            "],[7,"a"],[3,"action",[[22,0,[]],"downloadFile",[23,["fragment","fileHash"]],[23,["fileName"]]]],[9],[0,"\\n              "],[7,"i"],[11,"class","icon-ic_download_white"],[9],[10],[0,"\\n            "],[10],[0,"\\n          "],[10],[0,"\\n        "],[10],[0,"\\n      "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"      "],[7,"div"],[12,"class",[28,["file-attachment ",[27,"if",[[23,["fileSecurityWarning"]],"warning"],null]," ",[27,"if",[[23,["fileSecurityError"]],"error"],null]]]],[9],[0,"\\n        "],[7,"div"],[11,"class","file-data row"],[9],[0,"\\n          "],[7,"div"],[11,"class","file-meta"],[9],[0,"\\n            "],[7,"div"],[11,"class","file-name"],[9],[1,[27,"sanitize-html",[[23,["fileName"]],"strict"],null],false],[10],[0,"\\n            "],[7,"div"],[11,"class","file-size"],[9],[1,[27,"sanitize-html",[[23,["fileSize"]],"strict"],null],false],[10],[0,"\\n          "],[10],[0,"\\n          "],[7,"div"],[11,"class","download-file"],[9],[0,"\\n"],[4,"if",[[23,["fileSecurityError"]]],null,{"statements":[[0,"              "],[7,"a"],[9],[0,"\\n                "],[7,"i"],[11,"class","icon-ic_close"],[9],[10],[0,"\\n              "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"              "],[7,"a"],[3,"action",[[22,0,[]],"downloadFile"]],[9],[0,"\\n                "],[7,"i"],[11,"class","icon-download"],[9],[10],[0,"\\n              "],[10],[0,"\\n"]],"parameters":[]}],[0,"          "],[10],[0,"\\n        "],[10],[0,"\\n"],[4,"if",[[27,"or",[[23,["fileSecurityWarning"]],[23,["fileSecurityError"]]],null]],null,{"statements":[[0,"          "],[7,"div"],[11,"class","file-security-info"],[9],[0,"\\n            "],[7,"b"],[9],[1,[21,"fileSecurityInfoTitle"],false],[10],[0," -\\n            "],[1,[21,"fileSecurityInfoDesc"],false],[0,"\\n          "],[10],[0,"\\n"]],"parameters":[]},null],[0,"      "],[10],[0,"\\n"]],"parameters":[]}]],"parameters":[]}]],"parameters":[]},{"statements":[[4,"if",[[27,"eq",[[23,["fragment","fragmentType"]],[23,["FRAGMENT","COLLECTION"]]],null]],null,{"statements":[[0,"  "],[7,"div"],[11,"class","articles-listview"],[9],[0,"\\n    "],[7,"ul"],[9],[0,"\\n"],[4,"each",[[23,["articleCollection"]]],null,{"statements":[[0,"    "],[7,"li"],[11,"class","article-info"],[3,"action",[[22,0,[]],"performClickAction",[22,1,[]]]],[9],[0,"\\n        "],[7,"span"],[9],[1,[22,1,["label"]],false],[10],[0,"\\n        "],[7,"span"],[11,"class","arrow-right"],[9],[10],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[1]},null],[4,"if",[[23,["showMoreArticle"]]],null,{"statements":[[0,"    "],[7,"li"],[11,"class","article-showmore"],[3,"action",[[22,0,[]],"showMoreArticles"]],[9],[0,"\\n      "],[7,"span"],[9],[1,[27,"t",["conversation.fragment.showmore"],null],false],[10],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]},null],[0,"  "],[10],[0," \\n  "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"eq",[[23,["fragment","fragmentType"]],[23,["FRAGMENT","AUDIO"]]],null]],null,{"statements":[],"parameters":[]},{"statements":[[4,"if",[[27,"eq",[[23,["fragment","fragmentType"]],[23,["FRAGMENT","VIDEO"]]],null]],null,{"statements":[],"parameters":[]},null]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"hasEval":false}',meta:{moduleName:"hotline-web/components/ui-unity-message-bubble/template.hbs"}})
e.default=t}),define("hotline-web/components/ui-unity-message-fragment/component",["exports","hotline-web/utils/constants"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=Ember.Component.extend({CONVERSATION:t.default.CONVERSATION,isArticleView:Ember.computed("message.messageFragments",{get:function(){var e=this.get("message.messageFragments")
if(e&&e.length>0)for(var t=0;t<e.length;t++){var s=e[t]
if(s&&s.fragmentType===this.CONVERSATION.FRAGMENT_TYPE.COLLECTION)return!0}return!1}})})
e.default=s}),define("hotline-web/components/ui-unity-message-fragment/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"xVCxKhci",block:'{"symbols":["fragment"],"statements":[[7,"div"],[12,"class",[28,["h-comment ",[27,"if",[[23,["isArticleView"]],"h-wrapped-article"],null]," ",[27,"if",[[23,["message","emojisCount"]],"emojis emojis-"],null],[27,"if",[[23,["message","emojisCount"]],[23,["message","emojisCount"]]],null]]]],[9],[0,"\\n"],[4,"if",[[23,["isMessageUnauthenticated"]]],null,{"statements":[[0,"    "],[7,"i"],[11,"class","ic-unauthenticated custom-tooltip"],[9],[0,"\\n      "],[7,"span"],[11,"class","tooltiptext"],[9],[1,[27,"t",["message.not_authenticated"],null],false],[10],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["isListView"]]],null,{"statements":[[0,"    "],[1,[27,"ui-unity-message-bubble",null,[["message","fragment","messageType","isbubble"],[[23,["message"]],[23,["message","messageFragments","0"]],[23,["message","messageType"]],true]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"each",[[23,["message","messageFragments"]]],null,{"statements":[[0,"      "],[1,[27,"ui-unity-message-bubble",null,[["message","fragment","messageType","isbubble"],[[23,["message"]],[22,1,[]],[23,["message","messageType"]],[23,["isbubble"]]]]],false],[0,"\\n"]],"parameters":[1]},null]],"parameters":[]}],[10]],"hasEval":false}',meta:{moduleName:"hotline-web/components/ui-unity-message-fragment/template.hbs"}})
e.default=t}),define("hotline-web/controllers/application",["exports","hotline-web/mixins/datastore"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=Ember.Controller.extend(t.default,{actions:{reloadChannels:function(){var e=this.target
"channels.index"===(e&&e.currentRouteName)&&e.send("updateChannels")},restoreConversation:function(){var e=this.target
"channels.index"!==(e&&e.currentRouteName)&&this.replaceRoute("channels")},gotoHome:function(){var e=this.get("displayChannels"),t=e&&e.length
t&&1===t&&this.replaceRoute("channels.channel",e[0].channelId),t&&t>1&&this.replaceRoute("channels")},gotoChannel:function(e){var t=this.get("displayChannels"),s=e&&e.id,n=e&&e.name,a=e&&e.replyText||"",i=s||n?t.findBy("channelId",s)||t.findBy("name",n):this.get("defaultChannel"),o=t&&t.length
"string"==typeof a&&(a=a.trim())&&this.set("hotline.ui.channelReplyText",a),o&&o>1&&i&&this.replaceRoute("channels.channel",i.channelId)},reloadRoute:function(){var e=this.target&&this.target.currentRouteName
if(e){e.indexOf("channels")>-1&&(e="channels")
var t=Ember.getOwner(this).lookup("route:".concat(e))
t&&t.refresh()}}}})
e.default=s}),define("hotline-web/controllers/array",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.Controller
e.default=t}),define("hotline-web/controllers/channels/channel",["exports","hotline-web/controllers/application"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.extend({})
e.default=s}),define("hotline-web/controllers/chat/conversation",["exports","hotline-web/controllers/application"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.extend({})
e.default=s}),define("hotline-web/controllers/object",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.Controller
e.default=t}),define("hotline-web/formats",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default={time:{hhmmss:{hour:"numeric",minute:"numeric",second:"numeric"}},date:{hhmmss:{hour:"numeric",minute:"numeric",second:"numeric"}},number:{EUR:{style:"currency",currency:"EUR",minimumFractionDigits:2,maximumFractionDigits:2},USD:{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}}}}),define("hotline-web/helpers/and",["exports","ember-truth-helpers/helpers/and"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"and",{enumerable:!0,get:function(){return t.and}})}),define("hotline-web/helpers/app-version",["exports","hotline-web/config/environment","ember-cli-app-version/utils/regexp"],function(e,t,s){function n(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.default.APP.version,i=n.versionOnly||n.hideSha,o=n.shaOnly||n.hideVersion,r=null
return i&&(n.showExtended&&(r=a.match(s.versionExtendedRegExp)),r||(r=a.match(s.versionRegExp))),o&&(r=a.match(s.shaRegExp)),r?r[0]:a}Object.defineProperty(e,"__esModule",{value:!0}),e.appVersion=n,e.default=void 0
var a=Ember.Helper.helper(n)
e.default=a}),define("hotline-web/helpers/avatar-content",["exports"],function(e){function t(e){var t=e&&e[0]
if(t)return t.substr(0,1).capitalize()}Object.defineProperty(e,"__esModule",{value:!0}),e.avatarContent=t,e.default=void 0
var s=Ember.Helper.helper(t)
e.default=s}),define("hotline-web/helpers/choose-theme",["exports"],function(e){function t(e){var t=e&&e[0].toUpperCase().charAt(0)
return"A"===t||"I"===t||"J"===t||"Q"===t||"Z"===t?"theme-1":"B"===t||"K"===t||"O"===t||"R"===t?"theme-2":"C"===t||"G"===t||"L"===t||"S"===t?"theme-3":"D"===t||"M"===t||"T"===t||"F"===t?"theme-4":"E"===t||"H"===t||"N"===t||"X"===t?"theme-5":"U"===t||"V"===t||"W"===t||"P"===t||"Y"===t?"theme-6":"theme-7"}Object.defineProperty(e,"__esModule",{value:!0}),e.chooseTheme=t,e.default=void 0
var s=Ember.Helper.helper(t)
e.default=s}),define("hotline-web/helpers/collate",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.Object.extend({interval:1e3,ready:!1,initialize:function(e,t,s){this.interval=t,this.promise=e,this.scope=s,this.ready=!0,Ember.run.later(this,this.run,this.interval)},run:function(){this.ready?(this.promise.call(this.scope),this.promise=void 0,this.scope=void 0):this.promise&&(this.ready=!0,Ember.run.later(this,this.run,this.interval))},delay:function(){return!!this.promise&&(this.ready=!1,!0)},reset:function(){this.promise=void 0,this.scope=void 0,this.ready=!1},queued:function(){return this.promise&&!this.ready}})
e.default=t}),define("hotline-web/helpers/command",["exports","hotline-web/helpers/timer-event","hotline-web/helpers/wakeup-worker","hotline-web/utils/constants"],function(e,t,s,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var a=Ember.Object.extend({init:function(){this.count=0,this.cache={},this.worker=null
var e=this.scope
e.timer.on("didTrigger",this.didTrigger.bind(this)),e.timer.on("didClear",this.didClear.bind(this)),e.timer.on("didFail",this.didFail.bind(this))},sendMetrics:function(e,t,s){var a,i,o=this.scope,r=n.default.EmberModelUrl.tattletale,l=o&&o.get("session.token"),u=o&&o.get("session.siteId")
t===n.default.EventState.OPENED&&(i=n.default.RuleMetricKeys.uniqueSent,s>1&&(i=n.default.RuleMetricKeys.sent),a=r.url.replace("{token}",l).replace("{ruleId}",e).replace("{keys}",i),u&&(a+="&siteId=".concat(u)),Ember.$.ajax({type:"PUT",url:a,cache:!1,contentType:"application/json; charset=UTF-8"}).then(function(){}))},updateExecutedRules:function(e,t){var s=this.scope,a=s.get("lfds"),i=a&&a.get("userBehaviour"),o=i&&i.get("executedRules"),r=o.findBy("ruleId",e),l=r&&r.get("sentCount"),u=r&&r.get("sentCountSession")||0
t===n.default.EventState.OPENED&&(l=l?l+1:1,r?(r.set("sentCount",l),r.set("sentCountSession",u+1)):(r=s.get("store").createRecord("executedRule",{ruleId:e,sentCountSession:1,sentCount:1,openedCount:0}),o.pushObject(r)),s.send("save",!1),this.sendMetrics(e,t,r.get("sentCount")))},updateState:function(e,t){var s=this.fetchAll("timer").findBy("type",e),n=this.getRuleId(e)
s&&Ember.set(s,"state",t),this.updateExecutedRules(n,t)},didTrigger:function(e){this.scope.logger.log("Triggered "+e),this.updateState(e,n.default.EventState.OPENED)},didClear:function(e){this.scope.logger.log("Cleared "+e),this.updateState(e,n.default.EventState.CLEARED)},didFail:function(e){this.scope.logger.log("Failed "+e),this.updateState(e,n.default.EventState.ERROR)},didSleep:function(){var e=this,t=this.cache
Object.keys(t).map(function(e){return t[e]}).forEach(function(t){t.timer.state===n.default.EventState.SENT&&e.rerun(t)})},rerun:function(e){this.scope.timer.clear(e.timer),this.trigger(e.eventRule)},fetchAll:function(e){var t=this.cache
return Object.keys(t).map(function(s){return t[s][e]})},getRuleId:function(e){var t=this.cache,s=Object.keys(t).map(function(e){return t[e]}).filter(function(t){if(t&&t.timer&&t.timer.type===e)return!0})
if(s&&s.length)return s[0].eventRule.ruleId},trigger:function(e){var s=e&&e.command,a=s&&s.commandValue,i=this.scope,o=i&&i.store.peekAll("agent"),r=o&&o.findBy("alias",e.agent.alias),l=r&&r.get("firstName")||"",u=parseInt(a.channelId,10),c=t.default.create({type:n.default.EventType.TIMER+"_"+this.count++,state:n.default.EventState.SENT,handler:function(){i.set("channelId",u)
var t=i.get("lastMessage.messageType"),o=i.get("config.campaignSettings"),r=o&&o.shouldInterrupt,c=i.get("lastMessage.createdMillis"),d=i.get("lastMessage.autoRuleId"),m=i.get("displayChannels"),h=!0,f=!0;(m&&m.findBy("channelId",u)&&(f=!1),r&&!d)&&((new Date).getTime()-c<60*o.timeInterval*1e3&&(h=!1))
t===n.default.CONVERSATION.MESSAGE_TYPE.BOT||!h||f?i.set("channelId",void 0):(i.set("hotline.ui.lastAgentMessage",{messageUserName:l,messageFragments:a.message,channelId:u,ruleId:s.ruleId,messageUserId:a.agentId,messageUserAlias:e.agent.alias}),i.send("updateMessage",{autoRuleId:s.ruleId,autoRuleRead:!1,hasBeenRepliedTo:!1,needsUpdation:!0,messageFragments:a.message,messageUserName:l,userFirstName:l,messageUserType:1,messageType:1,messageUserId:a.agentId,messageUserAlias:e.agent.alias,read:!1,createdMillis:(new Date).getTime()}))},delay:s.delay?1e3*s.delay:1})
this.cache[s.ruleId]={eventRule:e,timer:c},i.timer.push(c),this.updateState(c.type,n.default.EventState.SENT)},execute:function(e,t){var n=this
t&&(this.scope.timer.clearAll(this.fetchAll("timer")),this.count=0,this.cache={}),this.worker||(this.worker=s.default.create()),this.worker.getWorker()&&this.worker.addCallback("rule_engine_commands",function(){n.didSleep()}),e.forEach(function(e){n.trigger(e)})}})
e.default=a}),define("hotline-web/helpers/eq",["exports","ember-truth-helpers/helpers/equal"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"equal",{enumerable:!0,get:function(){return t.equal}})}),define("hotline-web/helpers/event-conditions",["exports","hotline-web/utils/utils"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=Ember.Object.extend({update:function(e){var t=Ember.A([])
return t.pushObject(e),this.populate(t,!1)},populate:function(e){var s,n,a,i,o,r,l,u=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],c=this.scope,d=c.get("hotline.ui.userBehaviour"),m=d&&d.eventRules||[],h=c.get("userBehaviour"),f=e||h&&h.get("events"),g=h&&h.get("eventConditions"),p={}
return u&&g.clear(),Ember.set(h,"hasLocationRule",!1),m&&m.forEach(function(e){l=e.ruleId,e&&e.segment&&e.segment.segments.forEach(function(e){s=e.eventConditions||[]
var u=e.userConditions||[]
if(u.length&&!h.get("hasLocationRule")){var d=u.filterBy("key","LOCATION"),m=u.filterBy("key","CITY");(d.length||m.length)&&Ember.set(h,"hasLocationRule",!0)}s.forEach(function(e){(n=(n=f.filterBy("name",e.eventName)).filter(function(s){return a=s.get("eventProperties"),!e.propertyConditions||!e.propertyConditions.length||(o=!0,e.propertyConditions.forEach(function(e){i=a.findBy("key",e.key),o=!!i&&(o&&t.default.checkCondition(e.dataType,e.conditionType,i.get("value"),e.value,!0))}),o)})).length&&(n=n.sortBy("createdMillis"),r=g.findBy("eventConditionId",e.eventConditionId),p[l]=!0,r?Ember.setProperties(r,{occurrenceCount:r.get("occurrenceCount")+n.length,lastOccurredMillis:n.objectAt(n.length-1).get("createdMillis")}):g.pushObject(c.get("store").createRecord("eventCondition",{eventConditionId:e.eventConditionId,eventName:e.eventName,occurrenceCount:n.length,firstOccurredMillis:n.objectAt(0).get("createdMillis"),lastOccurredMillis:n.objectAt(n.length-1).get("createdMillis")})))})})}),p}})
e.default=s}),define("hotline-web/helpers/format-date",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.formatDate=s,e.default=void 0
var t=window.moment
function s(e){var s=e[0]
if(!s)return""
s=parseInt(s)
var n=e[1]
return n?t(s).format(n):t.min(t(),t(s)).fromNow()}var n=Ember.Helper.helper(s)
e.default=n}),define("hotline-web/helpers/format-message",["exports","ember-intl/helpers/format-message"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hotline-web/helpers/format-number",["exports","ember-intl/helpers/format-number"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hotline-web/helpers/format-relative",["exports","ember-intl/helpers/format-relative"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hotline-web/helpers/format-time",["exports","ember-intl/helpers/format-time"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})})
define("hotline-web/helpers/gt",["exports","ember-truth-helpers/helpers/gt"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"gt",{enumerable:!0,get:function(){return t.gt}})}),define("hotline-web/helpers/gte",["exports","ember-truth-helpers/helpers/gte"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"gte",{enumerable:!0,get:function(){return t.gte}})}),define("hotline-web/helpers/guid",["exports","uuid/v4"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s={generate:function(){return(0,t.default)()}}
e.default=s}),define("hotline-web/helpers/is-after",["exports","ember-moment/helpers/is-after"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hotline-web/helpers/is-array",["exports","ember-truth-helpers/helpers/is-array"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"isArray",{enumerable:!0,get:function(){return t.isArray}})}),define("hotline-web/helpers/is-before",["exports","ember-moment/helpers/is-before"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hotline-web/helpers/is-between",["exports","ember-moment/helpers/is-between"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hotline-web/helpers/is-empty",["exports","ember-truth-helpers/helpers/is-empty"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hotline-web/helpers/is-equal",["exports","ember-truth-helpers/helpers/is-equal"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"isEqual",{enumerable:!0,get:function(){return t.isEqual}})}),define("hotline-web/helpers/is-same-or-after",["exports","ember-moment/helpers/is-same-or-after"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hotline-web/helpers/is-same-or-before",["exports","ember-moment/helpers/is-same-or-before"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hotline-web/helpers/is-same",["exports","ember-moment/helpers/is-same"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hotline-web/helpers/lt",["exports","ember-truth-helpers/helpers/lt"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"lt",{enumerable:!0,get:function(){return t.lt}})}),define("hotline-web/helpers/lte",["exports","ember-truth-helpers/helpers/lte"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"lte",{enumerable:!0,get:function(){return t.lte}})}),define("hotline-web/helpers/moment-add",["exports","ember-moment/helpers/moment-add"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hotline-web/helpers/moment-calendar",["exports","ember-moment/helpers/moment-calendar"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hotline-web/helpers/moment-diff",["exports","ember-moment/helpers/moment-diff"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hotline-web/helpers/moment-duration",["exports","ember-moment/helpers/moment-duration"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hotline-web/helpers/moment-format",["exports","ember-moment/helpers/moment-format"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hotline-web/helpers/moment-from-now",["exports","ember-moment/helpers/moment-from-now"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hotline-web/helpers/moment-from",["exports","ember-moment/helpers/moment-from"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hotline-web/helpers/moment-subtract",["exports","ember-moment/helpers/moment-subtract"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hotline-web/helpers/moment-to-date",["exports","ember-moment/helpers/moment-to-date"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hotline-web/helpers/moment-to-now",["exports","ember-moment/helpers/moment-to-now"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hotline-web/helpers/moment-to",["exports","ember-moment/helpers/moment-to"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hotline-web/helpers/moment-unix",["exports","ember-moment/helpers/unix"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hotline-web/helpers/moment",["exports","ember-moment/helpers/moment"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hotline-web/helpers/not-eq",["exports","ember-truth-helpers/helpers/not-equal"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"notEq",{enumerable:!0,get:function(){return t.notEq}})}),define("hotline-web/helpers/not",["exports","ember-truth-helpers/helpers/not"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"not",{enumerable:!0,get:function(){return t.not}})}),define("hotline-web/helpers/now",["exports","ember-moment/helpers/now"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})})
define("hotline-web/helpers/or",["exports","ember-truth-helpers/helpers/or"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"or",{enumerable:!0,get:function(){return t.or}})}),define("hotline-web/helpers/pluralize",["exports","ember-inflector/lib/helpers/pluralize"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default
e.default=s}),define("hotline-web/helpers/polling",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.Object.extend({interval:5e3,schedule:function(e){var t=this
return setInterval(function(){e.apply(t)},this.get("interval"))},stop:function(){clearInterval(this.get("timer"))},start:function(e){this.set("caller",e),this.set("timer",this.schedule(this.get("onPoll")))},onPoll:function(){}})
e.default=t}),define("hotline-web/helpers/sanitize-html",["exports","hotline-web/utils/sanitize"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=Ember.Helper.extend({compute:function(e){var s,n=e[1]
n&&(s=Ember.getOwner(this).lookup("sanitizer:"+n))
var a=(0,t.sanitize)(e[0],s)
return Ember.String.htmlSafe(a)}})
e.default=s}),define("hotline-web/helpers/singularize",["exports","ember-inflector/lib/helpers/singularize"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default
e.default=s}),define("hotline-web/helpers/t",["exports","ember-intl/helpers/t"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hotline-web/helpers/timer-event",["exports","hotline-web/utils/constants"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=Ember.Object.extend({type:t.default.EventType.TIMER,state:t.default.EventType.SENT,handler:function(){},delay:3e4,trigger:function(){}})
e.default=s}),define("hotline-web/helpers/unix",["exports","ember-moment/helpers/unix"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hotline-web/helpers/utc",["exports","ember-moment/helpers/utc"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"utc",{enumerable:!0,get:function(){return t.utc}})}),define("hotline-web/helpers/wakeup-worker",["exports","hotline-web/helpers/wakeup"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=Ember.Object.extend({worker:void 0,wakeUpCallbacks:void 0,addCallback:function(e,t){void 0===this.wakeUpCallbacks&&(this.wakeUpCallbacks=Ember.Object.create()),Ember.set(this.wakeUpCallbacks,"WW_"+e,t)},removeCallback:function(e){Ember.set(this.wakeUpCallbacks,"WW_"+e,void 0)},getWorker:function(){return void 0===this.worker&&this.startWorker(this),this.worker},startWorker:function(e){try{var s,n="("+t.default.toString()+")();"
s=window.URL.createObjectURL(new Blob([n])),this.worker=new Worker(s),this.worker&&(this.worker.onmessage=function(t){t&&"wakeup"===t.data&&e.wakeUpHandler()})}catch(a){return null}},wakeUpHandler:function(){if(this.wakeUpCallbacks)for(var e,t,s=Object.keys(this.wakeUpCallbacks),n=0,a=s.length;n<a;n++)e=s[n],t=Ember.get(this.wakeUpCallbacks,e),e&&-1!==e.indexOf("WW_")&&t&&"function"==typeof t&&t()},stopWorker:function(){this.worker.terminate(),this.worker=void 0,this.wakeUpCallbacks=void 0}})
e.default=s}),define("hotline-web/helpers/wakeup",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var e=(new Date).getTime(),t=this
setInterval(function(){var s=(new Date).getTime()
s>e+1e4&&postMessage.call(t,"wakeup"),e=s},5e3)}}),define("hotline-web/helpers/xor",["exports","ember-truth-helpers/helpers/xor"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"xor",{enumerable:!0,get:function(){return t.xor}})}),define("hotline-web/index",["exports","ember-uuid"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"v4",{enumerable:!0,get:function(){return t.v4}}),Object.defineProperty(e,"v1",{enumerable:!0,get:function(){return t.v1}}),Object.defineProperty(e,"parse",{enumerable:!0,get:function(){return t.parse}}),Object.defineProperty(e,"unparse",{enumerable:!0,get:function(){return t.unparse}})}),define("hotline-web/initializers/add-parent-route-name-to-route",["exports"],function(e){function t(){Ember.Route.reopen({getParentRouteName:function(){var e=this.routeName,t=e.lastIndexOf(".")
return e.slice(0,t)},getRootRouteName:function(){var e=this.routeName,t=e.indexOf(".")
return e.slice(0,t)}})}Object.defineProperty(e,"__esModule",{value:!0}),e.initialize=t,e.default=void 0
var s={name:"add-parent-route-name-to-route",initialize:t}
e.default=s}),define("hotline-web/initializers/add-send-request-to-store",["exports","ember-data","hotline-web/utils/send-request"],function(e,t,s){function n(){t.default.Store.reopen({getRequest:function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}
return this.sendRequest(e,t,s,"GET").catch(function(e){return e})},postRequest:function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}
return this.sendRequest(e,t,s,"POST")},putRequest:function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}
return this.sendRequest(e,t,s,"PUT")},sendRequest:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"GET"
return(0,s.default)(this,e,t,{params:n,requestType:a})},cloneRecord:function(e,t){if(e&&t)for(var s in t)t.hasOwnProperty(s)&&"id"!==s&&Ember.set(e,s,t[s])}})}Object.defineProperty(e,"__esModule",{value:!0}),e.initialize=n,e.default=void 0
var a={name:"add-send-request-to-store",initialize:n}
e.default=a}),define("hotline-web/initializers/agent",["exports"],function(e){function t(e){["component"].forEach(function(t){e.inject(t,"agentService","service:agent")})}Object.defineProperty(e,"__esModule",{value:!0}),e.initialize=t,e.default=void 0
var s={name:"agent",initialize:t}
e.default=s}),define("hotline-web/initializers/app-version",["exports","ember-cli-app-version/initializer-factory","hotline-web/config/environment"],function(e,t,s){var n,a
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,s.default.APP&&(n=s.default.APP.name,a=s.default.APP.version)
var i={name:"App Version",initialize:(0,t.default)(n,a)}
e.default=i}),define("hotline-web/initializers/batch",["exports"],function(e){function t(e){["component","controller","model","route","service:rts"].forEach(function(t){e.inject(t,"batch","service:batch")})}Object.defineProperty(e,"__esModule",{value:!0}),e.initialize=t,e.default=void 0
var s={name:"batch",initialize:t}
e.default=s}),define("hotline-web/initializers/cache",["exports"],function(e){function t(e){["component","route","service:notification"].forEach(function(t){e.inject(t,"cache","service:cache")})}Object.defineProperty(e,"__esModule",{value:!0}),e.initialize=t,e.default=void 0
var s={name:"cache",initialize:t}
e.default=s}),define("hotline-web/initializers/component-router-injector",["exports"],function(e){function t(e){e.inject("component","router","router:main")}Object.defineProperty(e,"__esModule",{value:!0}),e.initialize=t,e.default=void 0
var s={name:"component-router-injector",initialize:t}
e.default=s}),define("hotline-web/initializers/container-debug-adapter",["exports","ember-resolver/resolvers/classic/container-debug-adapter"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s={name:"container-debug-adapter",initialize:function(){var e=arguments[1]||arguments[0]
e.register("container-debug-adapter:main",t.default),e.inject("container-debug-adapter:main","namespace","application:main")}}
e.default=s}),define("hotline-web/initializers/ember-cli-mirage",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default={name:"ember-cli-mirage",initialize:function(){}}}),define("hotline-web/initializers/ember-data",["exports","ember-data/setup-container","ember-data"],function(e,t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var n={name:"ember-data",initialize:t.default}
e.default=n}),define("hotline-web/initializers/export-application-global",["exports","hotline-web/config/environment"],function(e,t){function s(){var e=arguments[1]||arguments[0]
if(!1!==t.default.exportApplicationGlobal){var s
if("undefined"!=typeof window)s=window
else if("undefined"!=typeof global)s=global
else{if("undefined"==typeof self)return
s=self}var n,a=t.default.exportApplicationGlobal
n="string"==typeof a?a:Ember.String.classify(t.default.modulePrefix),s[n]||(s[n]=e,e.reopen({willDestroy:function(){this._super.apply(this,arguments),delete s[n]}}))}}Object.defineProperty(e,"__esModule",{value:!0}),e.initialize=s,e.default=void 0
var n={name:"export-application-global",initialize:s}
e.default=n}),define("hotline-web/initializers/flash",["exports"],function(e){function t(e){["component","controller","model","route"].forEach(function(t){e.inject(t,"flash","service:flash")})}Object.defineProperty(e,"__esModule",{value:!0}),e.initialize=t,e.default=void 0
var s={name:"flash",initialize:t}
e.default=s}),define("hotline-web/initializers/hotline",["exports"],function(e){function t(e){["component","controller","adapter","route","service:ruleEngine","service:websocket","service:notification","service:rts"].forEach(function(t){e.inject(t,"hotline","service:hotline")})}Object.defineProperty(e,"__esModule",{value:!0}),e.initialize=t,e.default=void 0
var s={name:"hotline",initialize:t}
e.default=s}),define("hotline-web/initializers/i18n",["exports"],function(e){function t(e){["component","controller","model","route"].forEach(function(t){e.inject(t,"intl","service:intl")})}Object.defineProperty(e,"__esModule",{value:!0}),e.initialize=t,e.default=void 0
var s={name:"intl",initialize:t}
e.default=s}),define("hotline-web/initializers/inject-store",["exports"],function(e){function t(e){["component","controller","adapter","service:rts"].forEach(function(t){e.inject(t,"store","service:store")})}Object.defineProperty(e,"__esModule",{value:!0}),e.initialize=t,e.default=void 0
var s={name:"inject-store",initialize:t}
e.default=s}),define("hotline-web/initializers/jwt",["exports"],function(e){function t(e){["component","route","service:ruleEngine"].forEach(function(t){e.inject(t,"jwt","service:jwt")})}Object.defineProperty(e,"__esModule",{value:!0}),e.initialize=t,e.default=void 0
var s={name:"jwt",initialize:t}
e.default=s}),define("hotline-web/initializers/logger",["exports"],function(e){function t(e){["component","controller","route","service:websocket","service:notification","service:rts","service:batch"].forEach(function(t){e.inject(t,"logger","service:logger")})}Object.defineProperty(e,"__esModule",{value:!0}),e.initialize=t,e.default=void 0
var s={name:"logger",initialize:t}
e.default=s})
define("hotline-web/initializers/queue",["exports"],function(e){function t(e){["component","controller","model","route","service:timer"].forEach(function(t){e.inject(t,"queue","service:queue")})}Object.defineProperty(e,"__esModule",{value:!0}),e.initialize=t,e.default=void 0
var s={name:"queue",initialize:t}
e.default=s}),define("hotline-web/initializers/rts",["exports"],function(e){function t(e){["component","controller","model","route","service:jwt"].forEach(function(t){e.inject(t,"rts","service:rts")})}Object.defineProperty(e,"__esModule",{value:!0}),e.initialize=t,e.default=void 0
var s={name:"rts",initialize:t}
e.default=s}),define("hotline-web/initializers/session",["exports"],function(e){function t(e){["component","controller","adapter","route","service:ruleEngine","service:notification","service:rts","service:batch"].forEach(function(t){e.inject(t,"session","service:session")})}Object.defineProperty(e,"__esModule",{value:!0}),e.initialize=t,e.default=void 0
var s={name:"session",initialize:t}
e.default=s}),define("hotline-web/initializers/timer",["exports"],function(e){function t(e){["component","controller","model","route"].forEach(function(t){e.inject(t,"timer","service:timer")})}Object.defineProperty(e,"__esModule",{value:!0}),e.initialize=t,e.default=void 0
var s={name:"timer",after:"queue",initialize:t}
e.default=s}),define("hotline-web/instance-initializers/ember-data",["exports","ember-data/initialize-store-service"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s={name:"ember-data",initialize:t.default}
e.default=s}),define("hotline-web/instance-initializers/ember-intl",["exports","ember-intl/initializer"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"instanceInitializer",{enumerable:!0,get:function(){return t.instanceInitializer}}),e.default=void 0
var s=t.default
e.default=s}),define("hotline-web/mixins/actions",["exports","hotline-web/utils/constants","hotline-web/utils/utils","hotline-web/mixins/subscription","hotline-web/mixins/user-reset","hotline-web/mixins/message","hotline-web/mixins/user","hotline-web/mixins/jwt","hotline-web/mixins/file-upload-helper-mixin","hotline-web/mixins/message-mask-mixin"],function(e,t,s,n,a,i,o,r,l,u){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var c=t.default.CONVERSATION,d=Ember.Mixin.create(n.default,a.default,i.default,r.default,o.default,l.default,u.default,{imageAttr:t.default.ImageAttr,data:Ember.computed({get:function(){return Ember.Object.create()}}),fileName:Ember.computed("data.fileData.name",{get:function(){return this.get("data.fileData.name")}}),l2r:Ember.computed.equal("session.config.headerProperty.direction","ltr"),hideChatButton:Ember.computed.alias("session.config.headerProperty.hideChatButton"),fileUploadChange:function(){var e=this.get("content"),s=this.get("data"),n=this.get("store")
!e||e.error?(Ember.setProperties(s,{fileContent:null,fileData:null,fileType:null,attr:null}),this.set("fileReset",null),e&&e.error&&this.flash.showMessage(e.error)):e&&e.fileType===t.default.FILETYPE.IMAGE&&e.data&&e.fileData?Ember.setProperties(s,{fileData:e.fileData,fileType:e.fileType,attr:e.attr,fileContent:n.createRecord("picFile",{dataUrl:e.data})}):e.fileType===t.default.FILETYPE.FILE&&e.fileData&&Ember.setProperties(s,{fileData:e.fileData,fileType:e.fileType,attr:null,fileContent:null}),this.$(".ce-textarea").focus()}.observes("content"),showPlaceholderText:Ember.computed("ceText",{get:function(){var e=this.get("ceText")||""
return 1===e.length&&"\n"===e&&(e=""),!e.length}}),ceTextHeight:Ember.computed("ceText","conversation.resolvedConversation",{get:function(){var e,t=this.$(".body .h-reply"),s=70
return this.get("ceText")?t&&t.length&&(s=t.outerHeight()):s=70,e=this.get("conversation.resolvedConversation")?0:s,Ember.String.htmlSafe("bottom: "+e+"px")}}),uploadFile:function(e,s){var n,a,i=this,o=new FormData,r=this.get("session"),l=r&&r.siteId,u=r&&r.user,c=t.default.EmberModelUrl
e&&e.fileType===t.default.FILETYPE.IMAGE?(n=c.imageUpload.url,o.append("image",e.file)):e&&e.fileType===t.default.FILETYPE.FILE&&(n=c.fileUpload.url,e.fileName?o.append("file",e.file,e.fileName):o.append("file",e.file)),a=n.replace("{token}",r.token).replace("{userAlias}",u.alias),o.append("name","IMG_MSG _"+(new Date).getTime()),l&&(a+="?siteId=".concat(l)),Ember.$.ajax({type:"POST",url:a,data:o,cache:!1,contentType:!1,processData:!1}).then(function(e){e&&!e.errorCode?s(!0,e):s(!1,e)},function(e){i.logger.log(e),s(!1,e)})},isResponseForBot:function(){var e=this.get("lastMessage"),t=this.get("conversation")
return!t||-1===t.get("conversationId")||e&&e.get("messageType")===c.MESSAGE_TYPE.BOT||e.get("messageType")===c.MESSAGE_TYPE.NORMAL&&!e.get("isResponseForBot")},isAllEmoji:function(e){var t,s=e.children()?e.children().length:0,n=0
return e.children().each(function(){if("IMG"!==(t=Ember.$(this)).prop("tagName")||!t.hasClass("emojiCe"))return!1
n++}),s===n},isAllBR:function(e){var t,s=e.children()?e.children().length:0,n=0
return e.children().each(function(){if("BR"!==(t=Ember.$(this)).prop("tagName")&&"IMG"!==t.prop("tagName")&&"STRONG"!==t.prop("tagName")&&"U"!==t.prop("tagName")&&"I"!==t.prop("tagName"))return!1
n++}),s===n},assertThatFragmentContentsAreNotNull:function(e){for(var t=0,s=e.length;t<s;t++)if("\r\n"===e[t].content)return!1
return!0},parseMessage:function(e){e=e.replace(/<(?!img|br|a|\/a|h1|\/h1|h2|\/h2|u|\/u|i|\/i|b|\/b).*?>/gi,"")
var t=this.$("<div></div>").html(e)
return t?(t.children().each(function(){var e=Ember.$(this)
switch(e.prop("tagName")){case"IMG":e.replaceWith(e.attr("alt"))
break
case"BR":e.replaceWith("\r\n")
break
case"G":case"P":e.replaceWith(e.html())}}),t[0]&&t[0].innerHTML?t[0]&&"\r\n"===t[0].innerHTML?t[0].innerHTML:t[0].innerHTML.trim():""):null},emptyContentEditor:function(){if(this.get("mediumEditor")&&this.get("mediumEditor").elements[0]){var e=this.get("mediumEditor").elements[0]
e.innerHTML="",this.get("mediumEditor").events.updateInput(e,{target:e,currentTarget:e})}},getcurrentTextMessage:function(){var e=this.$(".editable")?this.$(".editable"):null,t=this,s=[]
if(e)if(this.isAllEmoji(e)){var n=this.parseMessage(e.html())
n&&s.push({fragmentType:c.FRAGMENT_TYPE.TEXT,contentType:"text/html",content:n})}else if(this.isAllBR(e)){var a=e.html(),i=a&&a.split("<br>")
if(i&&i.length)for(var o=0;o<i.length;o++){var r=t.parseMessage(i[o])
r&&s.push({fragmentType:c.FRAGMENT_TYPE.TEXT,contentType:"text/html",content:r})}}else e.children().each(function(){var e=Ember.$(this),n=t.parseMessage(e.html())
if(n)s.push({fragmentType:c.FRAGMENT_TYPE.TEXT,contentType:"text/html",content:n})
else if("IMG"===e.prop("tagName")){var a=t.parseMessage(e)
a&&s.push({fragmentType:c.FRAGMENT_TYPE.TEXT,contentType:"text/html",content:a})}})
return s},postMessageAPI:function(e){var s=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1]
if(this.get("isJWTStrictMode")){if(this.jwt.auth.expiredAt||this.jwt.auth.scheduled||this.jwt.auth.expired)return
if(this.isJwtExpired())return void this.initiateSendingMode()}var a=this.get("session"),i=a&&a.user,o=a&&a.siteId,r=t.default.EmberModelUrl.message.url.replace("{token}",a.token).replace("{userAlias}",i.alias),l=this.get("messages"),u=l&&l.toArray(),c=u&&u.length,d=(new Date).getTime()
if(o&&(r+="?siteId=".concat(o)),i.alias){if(l){var m=[]
l.forEach(function(e){e.get("autoRuleId")&&!e.get("hasBeenRepliedTo")&&(m.push({ruleId:e.get("autoRuleId"),timeDiffInMillis:d-e.get("createdMillis")}),e.set("hasBeenRepliedTo",!0))}),this.send("save",!1),e.triggeredRuleIds=[],m.forEach(function(t){e.triggeredRuleIds.findBy("ruleId",t.ruleId)||e.triggeredRuleIds.push(t)})}if(l){for(var h=c-1;h>=0;h--){var f=u[h]
f.get("marketingId")&&0!==f.get("messageUserType")&&!f.get("hasBeenRepliedTo")&&(e.marketingReplyId||(e.marketingReplyId=f.get("marketingId")),f.set("hasBeenRepliedTo",!0))}e.marketingReplyId&&this.send("save",!1)}!n&&this.isResponseForBot()&&(e.isResponseForBot=!0),this.rts.healthCheck(),e.socketId=this.rts.getSocketId(),Ember.$.ajax({type:"POST",url:r,data:JSON.stringify(e),cache:!1,dataType:"json",contentType:"application/json; charset=utf-8",processData:!1}).then(function(e){s.send("updateMessage",e),s.didMessageSent&&s.didMessageSent()},function(e){var n=e&&e.status||400,a=e&&e.responseJSON&&e.responseJSON.errorCode||null
410===n&&s.deleteUser(),412===n&&(26===a?s.initiateSendingMode():23===a&&(s.postMessage({action:"user_state_change",status:401,success:!1,data:{userState:t.default.userState.AUTH_INVALID}}),s.jwt.auth.expired=!0,s.jwt.authenticateUser(!1)))})}},sendPendingMessages:function(){var e=this,s=this.get("lfds.conversations").findBy("channelId",this.get("channelId"))
s&&s.get("messages").forEach(function(s){if(s.get("status")===t.default.MESSAGE_STATUS.PENDING&&0===s.get("messageUserType")){e.jwt.auth.expiredAt||e.jwt.auth.scheduled||e.isJwtExpired()||Ember.set(s,"status",t.default.MESSAGE_STATUS.READY_TO_SEND),e.isJWTEnabled()&&e.isResponseForBot()&&Ember.set(s,"isResponseForBot",!0)
for(var n=s.serialize(),a=n.messageFragments?n.messageFragments:[],i=a.length-1;i>=0;i--)Ember.get(a[i],"fragmentType")===t.default.FILETYPE.IMAGE&&-1!==Ember.get(a[i],"content").indexOf("data:image")&&a.splice(i,1)
e.postMessageAPI(n,!0)}})},setFocus:function(){if(!this.get("isJWTStrictMode")||!this.jwt.auth.expired){var e=this.get("hotline.ui.isDesktop"),t=this.$(".ce-textarea")
t&&e&&t.focus()}},allFragmentsAreEmpty:function(e){return(e&&e.length?e:[]).every(function(e){return e.content&&""===e.content.trim()})},hasFileAttachment:Ember.computed.equal("data.fileType",2),actions:{sendReadManualCampaignReceipt:function(){var e=this.get("session.token"),s=this.get("session.user"),n=this.get("session.siteId"),a=this.get("messages"),i=this
a&&a.filter(function(e){return e.get("marketingId")&&!e.get("manualCampaignRead")}).forEach(function(a){var o=t.default.EmberModelUrl.updateCampaign,r=a.get("marketingId"),l=0!==a.get("messageUserType")&&r&&o.url.replace("{token}",e).replace("{userAlias}",s.alias).replace("{marketingId}",r)
l&&(l+="?seen=1",n&&(l+="&siteId=".concat(n)),Ember.$.ajax({type:"PUT",url:l}).then(function(e){e&&e.errorCode||(a.set("manualCampaignRead",!0),i.send("save"))}))})},sendReadCampaignMetric:function(){var e=this,s=this.get("messages")
s&&(s.filter(function(e){return e.get("autoRuleId")&&!e.get("autoRuleRead")}).forEach(function(s){if(s.get("autoRuleId")&&!s.get("autoRuleRead")){var n,a,i=s.get("autoRuleId"),o=e.get("lfds"),r=o&&o.get("userBehaviour"),l=(r&&r.get("executedRules")).findBy("ruleId",i),u=l&&l.get("openedCount"),c=t.default.EmberModelUrl,d=e.get("session.token"),m=e.get("session.siteId")
u=u?u+1:1,l&&l.set("openedCount",u),a=u>1?t.default.RuleMetricKeys.clicked:t.default.RuleMetricKeys.uniqueClicked,n=c.tattletale.url.replace("{token}",d).replace("{ruleId}",i).replace("{keys}",a),m&&(n+="&siteId=".concat(m)),Ember.$.ajax({type:"PUT",url:n,cache:!1,contentType:"application/json; charset=UTF-8"}).then(function(){}),s.set("autoRuleRead",!0)}}),this.send("save"))},keyPressDown:function(e,t){var s=this
switch(t.which){case 13:var n=this.get("data"),a=n&&n.fileData,i=n&&n.fileType
!t.shiftKey&&(e||a&&i)&&(t.preventDefault(),this.send("beforeSendMessage"))
break
default:var o=Ember.get(this,"session.user"),r=o&&o.id
r&&!this.get("isTyping")&&e&&e!==this.get("typedValue")&&(this.rts.sendMessage({userId:r.toString(),channelId:this.get("channelId"),action:"is_typing"}),this.set("typedValue",e),this.set("isTyping",setTimeout(function(){s.isDestroying||s.isDestroyed||s.set("isTyping",void 0)},2e3)))}},beforeSendMessage:function(e){if(!this.get("disableHugeMessageSending")){var t=this.getcurrentTextMessage(),n=s.default.singleMessageFromTextFragments(t),a=this.get("validations")
if(a&&a.validations){var i=a.validations,o=a.validationtype
if(o&&!s.default.checkReplyValidation(o,n))return this.set("hotline.ui.validationMessage",i[0].validationErrorText),this.openChatWidget(),!1}if(this.set("hotline.ui.validationMessage",void 0),this.get("session.user.alias")||this.getItemLS("isUserCreateSent"))return this.didReadReceiptSent&&this.send("updateReadReceipt"),void this.send("sendMessage",e)
this.set("hasUserToCreate",!0),this.send("createUser",e)}},focusIn:function(){this.get("hotline.ui.isIPhone")&&this.postMessage({action:"add_reply_dialog_absolute_class_to_frame"}),this.set("allowRR",!0),this.send("updateReadReceipt")},focusOut:function(){this.get("hotline.ui.isIPhone")&&this.postMessage({action:"remove_reply_dialog_absolute_class_to_frame"}),Ember.set(this,"allowRR",!1)},createMessage:function(e,s){var n=this.get("lfds"),a=this.get("conversations"),i=this.get("conversation"),o=this.get("messages"),r=this.get("messagesCount"),l=this.get("store")
if(this.get("isJWTStrictMode")&&this.jwt.auth.expired?Ember.set(s,"status",t.default.MESSAGE_STATUS.UNAUTHENTICATED):Ember.set(s,"status",t.default.MESSAGE_STATUS.PENDING),r)o.pushObject(l.createRecord("message",s)),this.logger.log("Adding Message")
else{var u=Ember.A([])
if(u.pushObject(l.createRecord("message",s)),i=l.createRecord("conversation",{conversationId:-1,channelId:this.get("channelId"),messages:u,readMillis:e}),a)a.pushObject(i)
else{var c=Ember.A([])
c.pushObject(i),n.set("conversations",c)}}this.send("save")},loadBulkEvents:function(){var e=this,s=this.get("session.siteId"),n=t.default.EmberModelUrl.newRecentEvent.url.replace("{token}",this.get("session.token"))
s&&(n+="?siteId=".concat(s)),Ember.$.ajax({type:"GET",url:n,contentType:"application/json; charset=UTF-8"}).then(function(t){t&&!t.errorCode&&e.logger.log(t)})},sendBulkEvents:function(){var e=this
if(!this.get("session.config.disableEvents")){var s=this.get("userBehaviour.events").map(function(t){var s={}
if(t.get("eventProperties").forEach(function(e){s[e.get("key")]=e.get("value")}),"fc_page"!==t.get("name")||!e.get("session.config.disablePageTransition")||s.force)return{occTime:t.get("createdMillis"),eventName:t.get("name"),properties:s}}),n=this.get("session.siteId"),a=t.default.EmberModelUrl.newMultiEvent.url.replace("{token}",this.get("session.token"))
n&&(a+="?siteId=".concat(n)),Ember.$.ajax({type:"POST",url:a,data:JSON.stringify(s),cache:!1,contentType:"application/json; charset=UTF-8"}).then(function(){})}},sendMessage:function(e){var s=this,n=this.get("hotline.ui.parentLocation"),a=this.get("hotline.ui.parentTitle"),i=this.get("data"),o=(new Date).getTime(),r=e||this.getcurrentTextMessage(),l=i&&i.fileType,u=i&&i.fileData,d=i&&i.attr,m=this.get("conversation"),h=r.length,f=m&&-1!==m.get("conversationId"),g=this.get("session"),p=g&&g.user,b=this.get("messages"),v={msgHopId:o+"_"+this.get("hotline.ui.hop"),messageType:c.MESSAGE_TYPE.NORMAL,messageUserType:c.USER_TYPE.USER,location:JSON.stringify({url:n,title:a}),channelId:this.get("channelId"),createdMillis:(new Date).getTime(),messageFragments:[]}
if(!this.get("saving")&&(u&&l||0!==h&&!this.allFragmentsAreEmpty(r))){Ember.set(this,"saving",!0)
var E=this.getTextFromEditorForClosedOrOpenWidgetState(),y=E&&E.length>=t.default.MessageSpecs.maxLength,w=""
if(u&&l){var _
if(y){var T=this.getTextFilePreviewFragment(E)
v.messageFragments.push(T),w=T.fileName}else h&&this.assertThatFragmentContentsAreNotNull(r)&&(v.messageFragments=this.maskTextForFragments(r))
l===t.default.FILETYPE.FILE?_={fileContentType:u.type,fileName:u.name,fileSize:u.size,fragmentType:c.FRAGMENT_TYPE.FILE}:l===t.default.FILETYPE.IMAGE&&(_={contentType:"image/png",fragmentType:c.FRAGMENT_TYPE.IMAGE,content:this.get("data.fileContent.dataUrl"),height:d.height,width:d.width,thumbnail:{contentType:"image/png",content:this.get("data.fileContent.dataUrl"),height:200,width:200}}),v.messageFragments.splice(0,0,_),p&&p.alias?this.uploadFile({file:u,fileType:l},function(e,t){if(e)v=s.updateMessageFragmentsAfterFileUpload(v,t),!s.assertThatAllAttachmentsHaveBeenUploaded(v)||!f&&s.get("isFirstMsgInitiatedForChannel")||(Ember.set(s,"isFirstMsgInitiatedForChannel",!0),v=s.updateNotAuthenticatedMessage(v),s.postMessageAPI(v))
else{var n=s.get("intl").t("fileAttachmentErrors.errorUploadingFile").string
s.flash.showMessage(n),s.logger.log("Error",t)}}):this.set("pendingFile",{file:u,fileType:l})}else{if(y){var M=this.getTextFilePreviewFragment(E)
v.messageFragments.push(M),w=M.fileName}else h&&(v.messageFragments=this.maskTextForFragments(r))
!f&&this.get("isFirstMsgInitiatedForChannel")||y||(this.set("isFirstMsgInitiatedForChannel",!0),v=this.updateNotAuthenticatedMessage(v),this.postMessageAPI(v))}v.msgHopId&&b&&b.findBy("msgHopId",v.msgHopId)||this.send("createMessage",o,v),y&&(p&&p.alias?this.uploadTextAndGetFileHash(E,v,w):this.set("pendingUploadTextFileObject",{text:E,fileName:w})),this.set("isTextLimitExceeded",!1),this.emptyContentEditor(),this.focusOnTextarea&&this.focusOnTextarea(),Ember.set(this,"saving",!1),this.send("clearImage"),this.willMessageSent&&this.willMessageSent()}},updateMessage:function(e){var n,a,i=this.get("lfds"),o=this.get("store"),r=this.get("conversations"),l=this.get("conversation"),u=this.get("messages"),c=this.get("messagesCount"),d=e&&e.messageId,m=e&&e.msgHopId,h=!1
if(!e||3!==e.messageType&&5!==e.messageType||s.default.resizeImage(e),c)-1!==l.get("conversationId")&&l.get("conversationId")||(l.set("conversationId",e.conversationId),h=!0),Ember.set(e,"status",t.default.MESSAGE_STATUS.SENT),n=d&&u.findBy("messageId",d)||m&&u.findBy("msgHopId",m),a=u.reduce(function(t,s){return e.autoRuleId&&s.get("autoRuleId")===e.autoRuleId&&!s.get("hasBeenRepliedTo")&&(t=s),t},void 0),n?(o.cloneRecord(n,e),this.logger.log("Updating Message")):a?(u.removeObject(a),a.destroyRecord(),u.pushObject(o.createRecord("message",e)),this.logger.log("Adding Auto Rule Message")):(u.pushObject(o.createRecord("message",e)),this.logger.log("Adding Message"))
else{var f=Ember.A([])
if(Ember.set(e,"status",t.default.MESSAGE_STATUS.SENT),f.pushObject(o.createRecord("message",e)),l=o.createRecord("conversation",{conversationId:e.conversationId,channelId:this.get("channelId"),messages:f,readMillis:e.autoRuleId?0:e.createdMillis}),r)r.pushObject(l)
else{var g=Ember.A([])
g.pushObject(l),i.set("conversations",g)}}e.autoRuleId||i.set("messageAfter",e.createdMillis),this.send("save",!n),h&&this.sendPendingMessages(),this.notifyPropertyChange("totalUnreadCount")},sendPendingMessagesAfterAuthenticated:function(){this.sendPendingMessages()},updateMessageAsNotAuthenticated:function(){var e=this.get("lfds.conversations").findBy("channelId",this.get("channelId"))
e&&e.get("messages").forEach(function(e){e.get("status")!==t.default.MESSAGE_STATUS.PENDING&&e.get("status")!==t.default.MESSAGE_STATUS.READY_TO_SEND||Ember.set(e,"status",t.default.MESSAGE_STATUS.UNAUTHENTICATED)})},updateMessageAsPending:function(){var e=this.get("lfds.conversations").findBy("channelId",this.get("channelId"))
e&&e.get("messages").forEach(function(e){e.get("status")===t.default.MESSAGE_STATUS.READY_TO_SEND&&Ember.set(e,"status",t.default.MESSAGE_STATUS.PENDING)})},updateReadReceipt:function(){var e,s=this.get("lfds"),n=this.get("conversation"),a=this.get("lastServerSentMessage"),i=this.get("lastAgentMessage"),o=this.get("session"),r=this.get("store"),l=o&&o.user,u=o&&o.siteId,c=t.default.EmberModelUrl.read
if(this.send("sendReadCampaignMetric"),this.send("sendReadManualCampaignReceipt"),i){var d=n.get("channelId"),m=n.get("conversationId"),h=m&&n.get("readMillis")||0,f=i.get("createdMillis"),g=a&&a.get("createdMillis"),p=n.get("markedReadMillis")
if(this.get("allowRR")&&(h<f||null===p||p!==f)){if(e={channelId:d,conversationId:m,userId:l.id,readUpto:f},m>0){var b=c.url.replace("{token}",o.token).replace("{userAlias}",l.alias)
u&&(b+="?siteId=".concat(u)),r.postRequest(c.model,b,e).then(function(){})}s.set("messageAfter",g),n.set("readMillis",f),n.set("markedReadMillis",f),this.send("save"),this.didReadReceiptSent&&this.didReadReceiptSent()}}},imageSelect:function(){this.$("#"+this.get("fileId")).click()},insertEmoji:function(){this.$(".emoji").emojiPicker("toggle")},clearImage:function(){this.set("fileReset",null),this.set("content",null)}}})
e.default=d}),define("hotline-web/mixins/activity",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.Mixin.create({onUnloadActivityCB:Ember.computed({get:function(){return this.onUnloadActivity.bind(this)}}),onUnloadActivity:function(){this.unbindEvents()},bindActivityEvents:function(){var e=Ember.$(window)
e&&(e.unbind("beforeunload",Ember.get(this,"onUnloadActivityCB")),e.on("beforeunload",Ember.get(this,"onUnloadActivityCB")),this.logger.log("Activity Binding"))},unbindActivityEvents:function(){var e=Ember.$(window)
e&&(e.unbind("beforeunload",Ember.get(this,"onUnloadActivityCB")),this.logger.log("Activity Unbinding"))},unbindEvents:function(){var e=this.get("session"),t=e&&e.user
t&&t.alias&&(Ember.set(e,"user",{}),this.logger.log("Session Cleared"))}})
e.default=t}),define("hotline-web/mixins/article-load",["exports","hotline-web/config/environment","hotline-web/utils/constants"],function(e,t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var n=Ember.Mixin.create({loadFAQS:function(){var e=Ember.get(this,"faqs")
e&&e.get("lastModifiedAt")&&Ember.get(this,"fetchFaqs")||this.loadData()},loadLunrLanguage:function(e){if(e&&s.default.LunrLanguage[e]){var n=s.default.LunrLanguage[e]
Ember.$.ajax({method:"GET",url:t.default.EmberENV.cdnUrl+n,dataType:"script"})}},loadData:function(){var e=this,t=Ember.get(this,"lfds.dsFaq"),s=t&&t.get("lastModifiedAt"),n=t&&t.get("contentLocale"),a=(new Date).getTime().toString()
s&&this.set("hotline.ui.lastModifiedFaqsAt",s),n&&(this.set("hotline.ui.lastLocaleId",n.localeId),this.loadLunrLanguage(n.displayCode)),this.store.findRecord("faq",a,{reload:!0}).then(function(t){var s=t.get("contentLocale"),a=s&&s.displayCode
n||(e.set("hotline.ui.lastLocaleId",s&&s.localeId),e.loadLunrLanguage(a)),204!==t.get("status")&&(e.set("fetchFaqs",!0),200===t.get("status")?e.processData(t):e.showFAQS())})},processData:function(e){var t,s=this,n=e&&e.get("categories"),a=this.get("lfds"),i=a&&a.get("dsFaq"),o=i&&i.get("contentLocale"),r=Ember.get(this,"session.user"),l=Ember.A([])
t=e&&e.get("contentLocale"),Ember.set(e,"category",void 0),n.forEach(function(e){var t=e.serialize(),n=e.get("articles"),a=Ember.A([])
n.forEach(function(e){a.pushObject(s.store.createRecord("dsArticle",e.serialize()))}),t.dsArticles=a,l.pushObject(s.store.createRecord("dsCategory",t))}),Ember.set(a,"dsFaq",this.store.createRecord("dsFaq",{dsCategories:l,contentLocale:e.get("contentLocale"),lastModifiedAt:e.get("lastModifiedAt")})),Ember.set(r,"dontfetchFaqsAgain",!0),this.send("save",!1),this.showFAQS()
var u=t&&t.direction,c=o&&o.direction
u?document.body.setAttribute("dir",u):c&&document.body.setAttribute("dir",c)},showFAQS:function(){var e=this
this.get("transition").then(function(){Ember.get(e,"session.config.showFAQOnOpen")&&!Ember.get(e,"session.config.hideFAQ")&&Ember.get(e,"showTabs")&&e.get("router").replaceWith("faqs")})}})
e.default=n}),define("hotline-web/mixins/brand-check-mixin",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.Mixin.create({hidePoweredBy:Ember.computed("session.config.hidePoweredBy","hotline.ui.config.showPoweredBy",{get:function(){return!0!==Ember.get(this,"hotline.ui.config.showPoweredBy")||!0===Ember.get(this,"session.config.hidePoweredBy")}})})
e.default=t}),define("hotline-web/mixins/channel",["exports","hotline-web/utils/constants"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=Ember.Mixin.create({channelId:Ember.computed("model.channelId",{get:function(){return parseInt(this.get("model.channelId"),10)}}),channel:Ember.computed("channelId","model.channels",{get:function(){var e=this.get("model.channels"),t=this.get("channelId")
return e&&e.find(function(e){return e.channelId===t})}}),appDisplayName:Ember.computed("session.appDisplayName",{get:function(){return this.get("session.appDisplayName")}}),channelMessage:Ember.computed("channel","session.appDisplayName",{get:function(){var e=this.get("channel.welcomeMessage"),s=e&&this.store.createRecord("message",{messageFragments:e.messageFragments})
return s.set("messageUserName",this.get("session.appDisplayName")),s.set("messageUserType",t.default.CONVERSATION.USER_TYPE.CHANNEL),s}})})
e.default=s}),define("hotline-web/mixins/conversation-load",["exports","hotline-web/utils/utils","hotline-web/utils/constants","hotline-web/mixins/message"],function(e,t,s,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var a=s.default.CONVERSATION.MESSAGE_TYPE.IMAGE,i=Ember.Mixin.create(n.default,{getAutoMessage:function(e,t){return e.find(function(e){return e.get("autoRuleId")===t.ruleId&&0!==e.get("messageUserType")&&e.get("needsUpdation")})},loadConversation:function(e){var n,i,o,r,l,u,c,d,m,h,f,g,p,b,v,E,y,w=e&&e.length,_=Ember.get(this,"conversations"),T=Ember.get(this,"totalCount"),M=Ember.get(this,"store"),I=Ember.get(this,"lfds"),S=Ember.get(this,"session"),x=S&&S.appId,A=S&&S.externalId,C=[],O=0
if(T)for(n=0;n<w;n++)if(h=(d=e[n])&&d.messages,c=(u=d&&d.readReceiptMobileUser)&&u.readUntil,f=h&&h.length,r=_.findBy("channelId",d.channelId),f){for((m=h[f-1].createdMillis)>O&&(O=m),l=r&&r.get("messages")||Ember.A([]),i=0;i<f;i++){(v=h[i]).channelId=d.channelId,g=v&&v.messageId,p=v&&v.marketingId,y=v&&v.msgHopId,-1!==a.indexOf(v.messageType)&&t.default.resizeImage(v),b=g&&l.findBy("messageId",g)||y&&h.findBy("msgHopId",y)||p&&l.findBy("marketingId",p)
var N=void 0
v&&v.ruleId&&0!==v.messageUserType&&(N=this.getAutoMessage(l,v)),v.alias&&!v.delivered&&(v.delivered=!0,C.push(v.alias)),v&&v.messageType===s.default.CONVERSATION.MESSAGE_TYPE.SCREEN_SHARING.ENDED&&window.parent&&this.postMessage({event_id:"cobrowsingStop"}),b?(M.cloneRecord(b,v),this.logger.log("Updating Message")):N?(M.cloneRecord(N,v),N.set("needsUpdation",!1),this.logger.log("Updated automessage")):(l.pushObject(M.createRecord("message",v)),this.logger.log("Adding Message"),v.messageUserType!==s.default.CONVERSATION.USER_TYPE.AGENT||v.ruleId||this.set("hotline.ui.lastAgentMessage",v))}r?(r.set("readMillis",c||r.get("readMillis")||m),r.set("hasPendingCsat",d.hasPendingCsat),Ember.isBlank(d.csat)||r.set("csat",M.createRecord("csat",d.csat))):(r=M.createRecord("conversation",{conversationId:d.conversationId,channelId:d.channelId,messages:l,readMillis:c||m,hasPendingCsat:d.hasPendingCsat,csat:M.createRecord("csat",d.csat)}),_.pushObject(r))}else r.set("hasPendingCsat",d.hasPendingCsat),Ember.isBlank(d.csat)||r.set("csat",M.createRecord("csat",d.csat))
else for(o=0;o<w;o++)if(h=(d=e[o])&&d.messages,c=(u=d&&d.readReceiptMobileUser)&&u.readUntil,(E=(f=h&&h.length)?h[f-1]:null)&&((m=E.createdMillis)>O&&(O=m),!d.readMillis)){var j,k=h.length
for(l=Ember.A([]),j=0;j<k;j++)v=h[j],-1!==a.indexOf(v.messageType)&&t.default.resizeImage(v),v.messageId&&!v.delivered&&(v.delivered=!0,C.push(v.alias)),l.pushObject(M.createRecord("message",v))
d.messages=l,d.readMillis=c||this.getUserLastMsgCreatedMillis(h),Ember.isBlank(d.csat)||(d.csat=M.createRecord("csat",d.csat)),r=M.createRecord("conversation",d),_.pushObject(r),E.messageUserType===s.default.CONVERSATION.USER_TYPE.AGENT&&!E.ruleId&&d.readMillis<E.createdMillis&&this.set("hotline.ui.lastAgentMessage",E)}I.set("appId",x),I.set("externalId",A),I.set("seq.id",0),O&&(I.set("messageAfter",O),I.set("seq.millis",O)),this.send("save")},getUserLastMsgCreatedMillis:function(e){var t,n,a
return(a=(n=(t=e.filter(function(e){return e.messageUserType===s.default.CONVERSATION.USER_TYPE.USER}))&&t.length)?t[n-1]:null)?a.createdMillis:null},actions:{ackMessageInRTS:function(e,t){var s=this
t&&this.rts.sendAck(e,t,function(e,t){s.logger.log(e||t)}),e&&e.alias&&e.messageUserId&&this.send("ackMessageInFC",e.alias)},ackMessageInFC:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:""
if(e=t.default.coercer(e)){var n=s.default.EmberModelUrl.messageACK,a=this.get("session"),i=a&&a.user,o=n.url.replace("{token}",a.token).replace("{userAlias}",i.alias),r=a&&a.siteId
r&&(o+="?siteId=".concat(r)),this.store.postRequest(n.model,o,{messageAlias:e,time:(new Date).getTime(),socketId:this.rts.getSocketId()})}}}})
e.default=i}),define("hotline-web/mixins/conversation",["exports","hotline-web/mixins/datastore"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=Ember.Mixin.create(t.default,{validationTextMessage:null,conversation:Ember.computed("conversations.@each","channelId",{get:function(){var e=this.get("conversations"),t=this.get("channelId"),s=t&&parseInt(t,10)
return e&&e.findBy("channelId",s)}}),readMillis:Ember.computed("messages.@each","conversation.readMillis",{get:function(){return this.get("conversation.readMillis")}}),messages:Ember.computed("conversation.messages",{get:function(){return this.get("conversation.messages")}}),messagesCount:Ember.computed("messages.@each",{get:function(){return this.get("messages.length")}}),lastMessage:Ember.computed("messages.@each",{get:function(){var e=this.get("messages"),t=this.get("messagesCount")
return e&&t?e.objectAt(t-1):null}}),lastServerSentMessage:Ember.computed("messages.@each",{get:function(){var e=this.get("messages"),t=this.get("messagesCount"),s=e&&e.toArray()
if(s&&t)for(var n=t-1;n>=0;n--)if(!s[n].get("needsUpdation"))return s[n]
return null}}),lastAgentMessage:Ember.computed("messages.@each.messageId",{get:function(){var e=this.get("messages"),t=this.get("messagesCount")
if(e&&t)for(var s=t-1;s>=0;s--){var n=e.objectAt(s)
if(n&&n.get("messageUserType"))return n}return null}}),unreadCount:Ember.computed("messages.@each","readMillis","conversation.channelId",{get:function(){var e=this.get("conversation.channelId")&&this.get("readMillis")||0,t=this.get("messages"),s=this.get("messagesCount"),n=0
if(s)if(e)for(var a=s-1;a>=0;a--){var i=t.objectAt(a),o=i&&i.get("messageUserType"),r=i&&i.get("createdMillis")
if(o){if(!(r>e))break
n+=1}}else n=s
return n}}),unreadMarketingMessages:Ember.computed("messages.@each","unreadCount","readMillis","conversation.conversationId",{get:function(){var e=this.get("unreadCount"),t=[]
if(e)for(var s=this.get("messages"),n=this.get("messagesCount"),a=1;a<=e;a++){var i=s.objectAt(n-a)
i&&i.get("messageUserType")&&i.get("marketingId")&&t.push(i)}return t}}),unreadMarketingMessagesCount:Ember.computed("unreadMarketingMessages.@each",{get:function(){var e=this.get("unreadMarketingMessages")
return e&&e.length}}),hideName:Ember.computed.alias("session.config.agent.hideName"),hidePic:Ember.computed("session.config.agent.hideName","session.config.agent.hidePic",{get:function(){return Ember.get(this,"session.config.agent.hideName")||Ember.get(this,"session.config.agent.hidePic")}}),hideBio:Ember.computed("session.config.agent.hidePic","session.config.agent.hideBio",{get:function(){return Ember.get(this,"session.config.agent.hidePic")||Ember.get(this,"session.config.agent.hideBio")}}),isArticleListType:Ember.computed("message.messageFragments",{get:function(){var e=this.get("message.messageFragments")
if(e&&e.length>0)for(var t=0;t<e.length;t++){var s=e[t]
if(s&&s.fragmentType===this.CONVERSATION.FRAGMENT_TYPE.COLLECTION)return!0}return!1}}),isButtonComposer:function(e){return!!(e&&e.length>0)&&e[0].fragmentType===this.CONVERSATION.FRAGMENT_TYPE.COLLECTION},defaultComposer:Ember.computed("lastMessage",{get:function(){var e=this
this.set("exampletextMessage",""),this.set("validationTextMessage",""),this.set("validations",null)
var t=this.get("lastMessage")
if(t&&t.get("replyFragments")){if(this.isButtonComposer(t.get("replyFragments")))return!1
if(t&&t.get("replyFragments")&&t.get("replyFragments").length>0){var s=t.get("replyFragments")[0]
s&&s.fragmentType===this.CONVERSATION.FRAGMENT_TYPE.INPUT&&(this.set("exampletextMessage",s.exampleText),this.set("validations",this.getValidations()),Ember.run.later(function(){var t=e.$(".editable")
t&&t.attr("data-placeholder",s.placeholderText)},0))}return!0}var n=""
n=this.get("session.config.content.placeholders.reply_field")?this.get("session.config.content.placeholders.reply_field"):this.get("intl").t("conversation.ce.placeholders.default")
var a=this.$(".editable")
return a&&a.attr("data-placeholder",n.string),!0}}),getValidations:function(){var e=this.get("lastMessage")
if(e&&e.get("replyFragments")&&e.get("replyFragments").length>0){var t=e.get("replyFragments")[0]
if(t&&t.fragmentType===this.CONVERSATION.FRAGMENT_TYPE.INPUT)return{validations:t.validations,validationtype:t.inputType}}},setChatWindowHeight:function(e){var t=this
Ember.$(".body .h-chat-window")&&(e?(Ember.$(".body .h-chat-window").height("calc(100% - 85px)"),this.scrollToBottom()):Ember.run.later(function(){var e=Ember.$(".body .h-reply-wrapper .h-reply-button").outerHeight()+20
Ember.$(".body .h-chat-window").height("calc(100% - ".concat(e,"px)")),t.scrollToBottom()}))},scrollToBottom:function(){var e=Ember.$(".body .h-chat-window")
e&&e.length&&e.animate({scrollTop:e[e.length-1].scrollHeight},1)}})
e.default=s}),define("hotline-web/mixins/data-dog-mixin",["exports","hotline-web/config/environment","hotline-web/utils/constants"],function(e,t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var n=Ember.Mixin.create({ddTags:{},setTag:function(e){var t=e&&e.key
t&&(Ember.get(this,"ddTags")[t]=e.value)},getTag:function(e){var t=Ember.get(this,"ddTags")
return t&&t[e]},increment:function(e,s){var n=Ember.get(this,"ddTags"),a=t.default&&t.default.datadog&&t.default.datadog.accountId
a&&a===n.accountId&&this.applyEvent(e,{op:"INCREMENT"},s)},decrement:function(e,s){var n=Ember.get(this,"ddTags"),a=t.default&&t.default.datadog&&t.default.datadog.accountId
a&&a===n.accountId&&this.applyEvent(e,{op:"DECREMENT"},s)},applyEvent:function(e,t,s){if(e.evt){var n=Ember.get(this,"ddTags")
e.tags?e.tags.accountId=n.accountId:e.tags=n,this.triggerEvent(e.evt,e.tags,t,s)}},triggerEvent:function(e,t,n,a){var i=e&&e.key
if(i){var o={}
t&&Object.keys(t).concat().forEach(function(n){if(-1!==s.default.DataDog.tags.indexOf(n))o[n]=t[n]
else{var a=e&&e.tags,i=a&&Object.keys(a).map(function(e){return a[e].key})
i&&-1!==i.indexOf(n)&&(o[n]=t[n])}}),n.key=i,o&&(n.tags=o),this.logEvent(n,a)}},logEvent:function(e,t){var n=this
if(e)if(t=t||this.callback.bind(this),navigator.sendBeacon&&"function"==typeof navigator.sendBeacon)this.batch.enter({type:s.default.Batch.transactions.types.dd,payload:e}).then(function(){n.logger.log("DataDog Event Recorded")},function(e){n.logger.log(e.message)})
else{var a=Ember.get(this,"session"),i=a&&a.siteId,o=s.default.EmberModelUrl.dataDog.url.replace("{token}",a.token)
i&&(o+="?siteId=".concat(i)),Ember.$.ajax({type:"POST",url:o,contentType:"application/json; charset=UTF-8",data:JSON.stringify(e)}).then(t,t)}},callback:function(e){this.logger.log(e)}})
e.default=n}),define("hotline-web/mixins/datastore",["exports","hotline-web/utils/utils","hotline-web/utils/constants","hotline-web/helpers/guid","hotline-web/helpers/collate"],function(e,t,s,n,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var i=Ember.Mixin.create({hotlineUI:Ember.computed("hotline.ui",{get:function(){return this.get("hotline.ui")}}),browserSupport:Ember.computed("hotlineUI.browser",{get:function(){var e=this.get("hotlineUI.browser")
return this.get("hotline.ui.storageAvailable")&&s.default.Browsers.includes(e.name)&&window.indexedDB},set:function(e,t){return t}}),datastore:Ember.computed("hotlineUI.datastore",{get:function(){return this.get("hotlineUI.datastore")}}),lfds:Ember.computed("records","hotlineUI.lfds",{get:function(){return this.get("records")||this.get("hotlineUI.lfds")}}),records:Ember.computed("datastore","session.appId",{get:function(){var e=this.get("datastore"),t=this.get("session")
return e&&e.findBy("appId",t.appId)},set:function(e,t){return t}}),conversations:Ember.computed("lfds.conversations",{get:function(){return this.get("lfds.conversations")}}),categories:Ember.computed("faqs.dsCategories",{get:function(){return this.get("faqs.dsCategories")}}),articles:Ember.computed("categories.dsArticles",{get:function(){return this.get("categories.dsArticles")}}),faqs:Ember.computed("lfds.dsFaq",{get:function(){return this.get("lfds.dsFaq")}}),userBehaviour:Ember.computed("lfds.userBehaviour",{get:function(){return this.get("lfds.userBehaviour")}}),properties:Ember.computed("lfds.properties",{get:function(){return this.get("lfds.properties")}}),totalCount:Ember.computed("conversations.@each",{get:function(){return this.get("conversations.length")}}),channels:Ember.computed("hotlineUI.channels",{get:function(){return this.get("hotlineUI.channels")}}),showTabs:Ember.computed("lfds.dsFaq","session.config.hideFAQ",{get:function(){return this.get("lfds.dsFaq.dsCategories.length")>0&&!this.get("session.config.hideFAQ")}}),displayChannels:Ember.computed("channels","conversations","session.tags","session.didMessage",{get:function(){var e,s=this.get("channels"),n=this.get("conversations"),a=this.get("totalCount"),i=this.get("session"),o=i&&i.tags,r=i&&i.didMessage,l=o&&o.length,u=[]
if(s){if(t.default.sortArray(s),r||a){a&&n.forEach(function(e){var n=e.get("channelId"),a=e.get("messages"),i=a&&a.toArray(),o=i&&i.length&&i[i.length-1],r=o&&o.get("createdMillis")
if(n&&r){var l=t.default.findIndexByValueProperty(s,n,"channelId"),c=-1!==l?s[l]:void 0,d=!0
if(c){if(s.removeAt(l),u&&u.length)for(var m=0,h=u.length;m<h;m++){var f=u[m]
if(f&&f.createdOn<=r){u.splice(m,0,{channel:c,createdOn:r}),d=!1
break}}d&&u.addObject({channel:c,createdOn:r})}}})
for(var c=0,d=u.length;c<d;c++)s.insertAt(c,u[c].channel)}if(e=s.filter(function(e){return!e.hidden&&!e.restricted}),l){var m=s.filter(function(e){return!e.hidden}).filter(function(e){var s=e.tags
if(s)for(var n=0,a=s.length;n<a;n++)if(t.default.matchArray(o,s[n]))return!0
return!1})
return m&&m.length?m:e}return e}return s}}),channelsCount:Ember.computed("displayChannels.length",{get:function(){var e=this.get("displayChannels")
return e?e.length:1}}),defaultChannel:Ember.computed("displayChannels",{get:function(){var e=this.get("displayChannels")
return e&&e.findBy("defaultChannel",!0)}}),totalUnreadCount:Ember.computed("conversations.@each","conversations.@each.conversationId","conversations.@each.readMillis","lfds.messageAfter","displayChannels",{get:function(){for(var e,s,n,a,i,o,r,l,u=this.get("conversations"),c=this.get("totalCount"),d=this.get("displayChannels"),m=0,h=0,f=0;f<c;f++)if(o=(e=u.objectAt(f))&&e.get("channelId"),r=t.default.findObjectByValueProperty(d,o,"channelId"),m=e&&e.get("channelId")&&e.get("readMillis")||0,l=(s=e&&e.get("messages"))&&s.get("length"),s&&l&&r)for(var g=l-1;g>=0;g--)if(a=(n=s.objectAt(g))&&n.get("messageUserType"),i=n&&n.get("createdMillis"),a){if(!(i>m))break
h+=1}return h}}),yet2BRead:Ember.computed("totalUnreadCount",{get:function(){return this.get("totalUnreadCount")>0}}),displayUnreadCount:Ember.computed("totalUnreadCount",{get:function(){var e=this.get("totalUnreadCount")
return e>9?this.get("intl").t("common.numbers.nine")+"+":e}}),init_lfds:function(){var e=this
return new Ember.RSVP.Promise(function(t,s){var a=e.get("lfds"),i=e.get("session"),o=e.get("hotline.ui")
e.get("browserSupport")?a?t():(a=e.store.createRecord("datastore",{appId:i.appId,conversations:Ember.A([]),dsFaq:e.store.createRecord("dsFaq",{categories:Ember.A([]),lastModifiedAt:0}),userBehaviour:e.get("store").createRecord("userBehaviour",{visitsCount:0,viewsCount:0,lastLocationMillis:0,firstLocationMillis:0,locations:Ember.A([]),eventConditions:Ember.A([]),events:Ember.A([]),executedRules:Ember.A([]),hasLocationRule:!1,locationRuleFetchMillis:0,userGeolocation:{}}),alias:n.default.generate(),seq:{id:0,millis:void 0}})).save().then(function(s){e.set("records",s),t()},function(e){s(e)}):(o.lfds||Ember.set(o,"lfds",e.store.createRecord("datastore",{appId:i.appId,conversations:Ember.A([]),messageAfter:void 0,dsFaq:e.get("store").createRecord("dsFaq",{dsCategories:Ember.A([]),contentLocale:null,lastModifiedAt:null}),userBehaviour:e.get("store").createRecord("userBehaviour",{visitsCount:0,viewsCount:0,firstLocationMillis:0,lastLocationMillis:0,locations:Ember.A([]),eventConditions:Ember.A([]),events:Ember.A([]),executedRules:Ember.A([]),hasLocationRule:!1,locationRuleFetchMillis:0,userGeolocation:{}}),alias:n.default.generate(),seq:{id:0,millis:void 0}})),t())})},doesConversationHaveOnlyTriggeredMessages:function(){var e=this.get("conversations"),t=!0
return e&&e.forEach(function(e){var s=e.get("messages")
s&&(s.filterBy("autoRuleId").get("length")!==s.get("length")&&(t=!1))}),t},actions:{reset:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=this.get("lfds"),a=this.get("conversations")
s.get("alias")&&!t||(s.set("userBehaviour",this.get("store").createRecord("userBehaviour",{visitsCount:0,viewsCount:0,firstLocationMillis:0,lastLocationMillis:0,locations:Ember.A([]),eventConditions:Ember.A([]),events:Ember.A([]),executedRules:Ember.A([]),hasLocationRule:!1,locationRuleFetchMillis:0,userGeolocation:{}})),s.set("alias",n.default.generate())),a?this.doesConversationHaveOnlyTriggeredMessages()||a.clear():s.set("conversations",Ember.A([])),s.set("messageAfter",void 0),s.set("seq",{id:0,millis:void 0}),e?e.send("save"):this.send("save")},save:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],s=this.get("lfds"),n=this.get("hotline.ui.collate"),i=function(){var t=e.get("lfds"),s=e.get("session"),n=t&&t.get("messageAfter")
Ember.set(s,"didMessage",n)}
t&&(n?this.get("hotline.ui.collate").queued()||this.get("hotline.ui.collate").delay()||this.get("hotline.ui.collate").initialize(i,100,this):(this.set("hotline.ui.collate",a.default.create()),this.get("hotline.ui.collate").initialize(i,100,this))),this.get("browserSupport")&&s.save().then(function(){},function(){window.localforage.clear(function(){e.parentView.send("reloadWidget")})})}}})
e.default=i}),define("hotline-web/mixins/direction",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.Mixin.create({r2l:Ember.computed({get:function(){return"rtl"===document.body.getAttribute("dir")}}),fadeInClz:Ember.computed("r2l",{get:function(){return Ember.get(this,"r2l")?"fadeInLeft":"fadeInRight"}})})
e.default=t}),define("hotline-web/mixins/faq",["exports","hotline-web/mixins/datastore"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=Ember.Mixin.create(t.default,{fetchFaqData:function(){var e=this.get("lfds.dsFaq.lastModifiedAt"),t=this.get("lfds.dsFaq.contentLocale")
e&&this.set("hotline.ui.lastModifiedFaqsAt",e),t&&this.set("hotline.ui.lastLocaleId",t.localeId)
var s=(new Date).getTime().toString()
return this.store.findRecord("faq",s,{reload:!0}).then(function(e){return e})},buildFaqDataObject:function(e){var t=e&&e.get("status")
if(t)switch(t){case 304:this.cachedDataObject(e)
break
case 204:this.emptyDataObject(e)
break
case 200:default:this.regularDataObject(e)}return e},regularDataObject:function(e){var t=this,s=e&&e.get("categories"),n=this.get("lfds"),a=Ember.A([])
Ember.set(e,"category",void 0),s.forEach(function(e){var s=e.serialize(),n=e.get("articles"),i=Ember.A([])
n.forEach(function(e){var s=t.store.createRecord("dsArticle",e.serialize())
i.pushObject(s)}),s.dsArticles=i,a.pushObject(t.store.createRecord("dsCategory",s))}),Ember.set(n,"dsFaq",this.store.createRecord("dsFaq",{dsCategories:a,contentLocale:e.get("contentLocale"),lastModifiedAt:e.get("lastModifiedAt")})),this.send("save",!1)},cachedDataObject:function(e){var t=this,s=this.get("lfds.dsFaq"),n=s&&s.content.serialize(),a=n.dsCategories,i=[]
a.forEach(function(e){var s=e,n=e.dsArticles,a=[]
n.forEach(function(e){var s=e
s.id=void 0,a.push(t.store.createRecord("article",s))}),s.articles=a,s.id=void 0,i.push(t.store.createRecord("category",s))}),Ember.set(e,"categories",i),Ember.set(e,"contentLocale",n.contentLocale),Ember.set(e,"lastModifiedAt",n.lastModifiedAt),Ember.set(e,"category",void 0)},emptyDataObject:function(e){Ember.set(e,"categories",[]),Ember.set(e,"contentLocale",null),Ember.set(e,"lastModifiedAt",null),Ember.set(e,"category",void 0)}})
e.default=s}),define("hotline-web/mixins/file-upload-helper-mixin",["exports","hotline-web/utils/constants","hotline-web/mixins/message-mask-mixin"],function(e,t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var n=Ember,a=n.setProperties,i=n.get,o=n.computed,r=Ember.Mixin.create(s.default,{assertThatAllAttachmentsHaveBeenUploaded:function(e){if(e&&e.messageFragments&&e.messageFragments.length){for(var s=e.messageFragments.length-1;s>=0;s--){if(i(e.messageFragments[s],"fragmentType")===t.default.CONVERSATION.FRAGMENT_TYPE.IMAGE&&!i(e.messageFragments[s],"height"))return!1
if(i(e.messageFragments[s],"fragmentType")===t.default.CONVERSATION.FRAGMENT_TYPE.FILE&&!i(e.messageFragments[s],"fileHash"))return!1}return!0}this.logger.log("Error while validating attachments for message: ",e)},updateMessageFragmentsAfterFileUpload:function(e,s){if(e&&e.messageFragments&&e.messageFragments.length&&s)for(var n=e.messageFragments.length-1;n>=0;n--)i(e.messageFragments[n],"fragmentType")===t.default.CONVERSATION.FRAGMENT_TYPE.IMAGE?a(e.messageFragments[n],s.image):i(e.messageFragments[n],"fragmentType")===t.default.CONVERSATION.FRAGMENT_TYPE.FILE&&s.file&&i(e.messageFragments[n],"fileName")===s.file.fileName&&a(e.messageFragments[n],s.file)
else this.logger.log("Error while updating attachments for message: ",e)
return e},getTextFromEditorForClosedOrOpenWidgetState:function(){var e=document.getElementById(t.default.DOM_ID.appReplyEditor),s=document.getElementById(t.default.DOM_ID.appReplyComposerEditor),n=document.getElementById(t.default.DOM_ID.appConversationEditor)
return e&&e.innerText.length>0?e.innerText.trim():s&&s.innerText.length>0?s.innerText.trim():n&&n.innerText.length>0?n.innerText.trim():void 0},uploadTextAndGetFileHash:function(e,s,n){var a=this
e=this.maskText(e)
var i=new Blob([e],{type:"text/plain"})
i.lastModifiedDate=new Date,this.uploadFile({file:i,fileType:t.default.FILETYPE.FILE,fileName:n},function(e,t){e?(a.set("pendingUploadTextFileObject",null),s=a.updateMessageFragmentsAfterFileUpload(s,t),a.assertThatAllAttachmentsHaveBeenUploaded(s)&&(s=a.updateNotAuthenticatedMessage(s),a.postMessageAPI(s))):(a.logger.log("Error while uploading file: ",t),a.set("pendingUploadTextFileObject",null))})},getTextFilePreviewFragment:function(e){return e=this.maskText(e),{fileContentType:"text/plain",fileName:"fc_message_"+(new Date).getTime()+".txt",fileSize:2*e.length,filePreview:{content:e.substring(0,800)},fileExtension:"txt",fragmentType:t.default.CONVERSATION.FRAGMENT_TYPE.FILE}},hideFileUpload:o.alias("session.config.hideFileUpload"),disableHugeMessageSending:o("isTextLimitExceeded","hideFileUpload","uploadFilesEnabled",{get:function(){return this.get("isTextLimitExceeded")&&(this.get("hideFileUpload")||!this.get("uploadFilesEnabled"))}}),uploadFilesEnabled:o("hotline.ui.config.enabledFeatures",{get:function(){var e=this.get("hotline.ui"),t=e&&e.config
return-1!==(t&&t.enabledFeatures||[]).indexOf("APP_FILE_UPLOAD")}})})
e.default=r}),define("hotline-web/mixins/focus-field",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.Mixin.create({becomeFocused:function(){var e=this
Ember.run.later(function(){Ember.isEqual(e.get("autofocus"),!0)&&e.$().focus()},100)}.on("didInsertElement"),focusOut:function(){var e=this.get("focus-out")
e&&this.get("targetObject").send("gotoParentFocusOut",e)}})
e.default=t}),define("hotline-web/mixins/handle-event",["exports","hotline-web/mixins/datastore","hotline-web/utils/constants","hotline-web/helpers/event-conditions","hotline-web/helpers/command","hotline-web/mixins/data-dog-mixin"],function(e,t,s,n,a,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var o=Ember.Mixin.create(t.default,i.default,{ruleEngine:Ember.inject.service(),commandHelper:Ember.computed({get:function(){return a.default.create({scope:this})}}),updateEvent:function(e,t,s){var a=this
if(this.cache.findBy("post_message","rules_loaded")){var i,o=this.get("lfds").get("userBehaviour"),r=o&&o.get("firstLocationMillis")||0,l=o&&o.get("events"),u=Ember.A([])
for(var c in s=s||(new Date).getTime(),this.reportEvent(e,t),t)t.hasOwnProperty(c)&&u.pushObject(this.get("store").createRecord("eventProperty",{key:c,value:t[c]}))
i=this.get("store").createRecord("event",{createdMillis:s,name:e,eventProperties:u}),l.pushObject(i)
var d=n.default.create({scope:this}).update(i)
this.send("save",!1),this.get("ruleEngine").processRules(e,d).then(function(e){a.get("commandHelper").execute(e),s&&(r||o.set("firstLocationMillis",s),o.set("lastLocationMillis",s),a.send("save",!1))})}else this.cache.encache("track_events",{eventName:e,eventProperties:t})},reportEvent:function(e,t){var n=this
if(!this.get("session.config.disableEvents")&&("fc_page"!==e||!this.get("session.config.disablePageTransition")||t.force)){var a=this.get("session.user"),i=this.get("session.token"),o=this.get("session.siteId"),r={eventName:e,properties:t}
if(a&&a.id)if(navigator.sendBeacon&&"function"==typeof navigator.sendBeacon)this.batch.enter({type:s.default.Batch.transactions.types.events,payload:r}).then(function(){n.logger.log("Event Recorded")},function(e){n.logger.log(e.message)
var t,a,i,o=s.default.DataDog.events.dropEvent
n.increment({evt:o,tags:(t={},a=o.tags.eventStorePayload.key,i=JSON.stringify(r),a in t?Object.defineProperty(t,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[a]=i,t)})})
else{var l=s.default.EmberModelUrl.newEvent.url.replace("{token}",i).replace("{userAlias}",a&&a.alias)
o&&(l+="?siteId=".concat(o)),Ember.$.ajax({type:"POST",url:l,data:JSON.stringify(r),cache:!1,contentType:"application/json; charset=UTF-8"}).then(function(){})}}},reportVisit:function(){var e=this.get("session.user"),t=s.default.EmberModelUrl.newSession.url.replace("{token}",this.get("session.token")),n=this.get("session.siteId"),a=(new Date).getTime(),i=this.get("lfds"),o=i&&i.get("userBehaviour"),r=o&&o.get("executedRules"),l=o&&o.get("lastLocationMillis")||0,u=o&&o.get("visitsCount")||0,c=o&&o.get("viewsCount")||0
a-l>18e5?(r&&r.forEach(function(e){e.set("sentCountSession",0)}),Ember.setProperties(o,{viewsCount:1,visitsCount:u+1}),this.send("save",!1),n&&(t+="?siteId=".concat(n)),e&&e.id&&Ember.$.ajax({type:"POST",url:t,cache:!1,contentType:"application/json; charset=UTF-8"}).then(function(){})):Ember.setProperties(o,{viewsCount:c+1})}})
e.default=o}),define("hotline-web/mixins/jwt",["exports","hotline-web/utils/constants","hotline-web/utils/utils","hotline-web/mixins/user"],function(e,t,s,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var a=Ember.Mixin.create(n.default,{isJWTStrictMode:Ember.computed({get:function(){return this.jwt.isJWTStrictMode()}}),isJWTEnabled:function(){return this.jwt.isEnabled&&this.jwt.auth.app},getJWTMeta:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||this.get("session.jwtAuthToken"),t=e&&e.split(".")
return t&&3===t.length?s.default.safelyParseJSON(atob(t[1])):null},buildJWTResponse:function(e){this.send("userStateChange",{success:e.success,status:e.status,userState:e.success?t.default.UserState.AUTHENTICATED:t.default.UserState.NOT_AUTHENTICATED}),this.postMessage(e)},processJWTResponse:function(e){var s=e.success
this.jwt.auth.app?this.jwt.authenticateUser(s):this.jwt.authenticateApp(s),e.callback&&"function"==typeof e.callback&&e.callback({action:"frame_state_change",success:s,status:e.status,data:{frameState:s?t.default.FrameState.AUTHENTICATED:t.default.FrameState.NOT_AUTHENTICATED}}),this.buildJWTResponse({action:"user_authenticated",success:s,status:e.status,resp:e.resp})},isJwtExpired:function(){var e=this.getJWTMeta(),t=(new Date).getTime()/1e3
return e&&e.exp<t},initiateSendingMode:function(){var e=(new Date).getTime()/1e3
this.postMessage({action:"user_state_change",status:401,success:!1,data:{userState:t.default.UserState.AUTH_EXPIRED}}),this.jwt.auth.user=!1,this.jwt.authenticateToken(e)},jwtAuthErrorMsg:Ember.computed("session.config.headerProperty.jwtInvalidBanner.msg",{get:function(){return this.get("session.config.headerProperty.jwtInvalidBanner.msg")||this.get("intl").t("jwt.invalid")}}),validateAndResetUUID:function(e){if(e){var t=this.getUserAlias()
if(t&&t===e)return this.send("resetTokenAlias"),!0}return!1},actions:{checkJWTExpiry:function(){this.get("isJWTStrictMode")&&this.send("validateJWTExpiry")},validateJWTExpiry:function(){this.jwt.auth.expired||this.jwt.auth.expiredAt||this.jwt.auth.scheduled||!this.jwt.auth.user?!this.isJwtExpired()||this.jwt.auth.user&&this.get("session.user.alias")?this.jwt.auth.expired&&this.jwt.authenticateUser(!1):this.initiateSendingMode():this.isJwtExpired()?this.initiateSendingMode():this.jwt.authenticateUser(!0)},verifyJWT:function(e){var s=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=t.default.EmberModelUrl.verifyJWT,i=Ember.get(this,"session"),o=i&&i.siteId,r=a.url.replace("{token}",Ember.get(this,"session.token")),l=!0,u=200
o&&(e.siteId=o),this.jwt.validateJWT({url:r,payload:e}).then(function(t){if(t.validToken){var a=e&&e.jwtAuthToken&&s.getJWTMeta(e.jwtAuthToken),o=a&&a.freshchat_uuid
if(Ember.set(i,"externalId",a&&a.reference_id||void 0),s.jwt.isStrict&&(!s.jwt.auth.app||!s.jwt.auth.user)){var r=Ember.get(s,"lfds")
!t.userAliasExists||i.user.alias&&i.user.alias===o?r&&o&&(s.validateAndResetUUID(o)?Ember.set(r,"alias",null):Ember.set(r,"alias",o),s.send("save",!1)):(r&&(s.validateAndResetUUID(o),Ember.set(r,"alias",null),s.send("save",!1)),u=304,l=!1)}}else l=!1,u=400
l?Ember.set(i,"jwtAuthToken",e.jwtAuthToken):Ember.set(i,"jwtAuthToken",null),s.processJWTResponse({callback:n,success:l,status:u,resp:t})},function(t){l=t&&t.success||!1,429!==(u=t&&t.status||400)&&Ember.set(i,"jwtAuthToken",e.jwtAuthToken),s.processJWTResponse({callback:n,success:l,status:u,resp:t})})}}})
e.default=a}),define("hotline-web/mixins/locale",["exports","hotline-web/utils/utils","hotline-web/utils/moment","hotline-web/utils/constants"],function(e,t,s,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var a=Ember.Mixin.create({currentLocaleString:Ember.computed({get:function(){var e=this.get("session.prop.locale")||this.get("session.user.locale"),t=window.navigator.languages&&window.navigator.languages.length&&window.navigator.languages[0],s=window.navigator.language
return t&&(e=e?"".concat(e,",").concat(t):t),s&&(e=e?"".concat(e,",").concat(s):s),e}}),currentLocale:Ember.computed("session.prop.locale","session.user.locale",{get:function(){return this.get("session.prop.locale")||this.get("session.user.locale")||t.default.getNavigatorLanguage()}}),updateAppLocale:function(e){(e=e&&e.toLowerCase())&&-1!==n.default.AcceptedLocalizations.indexOf(e)&&(n.default.Locales.EN_LIST.includes(e)?this.set("intl.locale",n.default.Locales.EN_US):n.default.Locales.FR_LIST.includes(e)?this.set("intl.locale",n.default.Locales.FR):this.set("intl.locale",e)),s.default.updateLocaleWith(e)}})
e.default=a}),define("hotline-web/mixins/localstorage",["exports","hotline-web/utils/utils","hotline-web/mixins/message"],function(e,t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var n=Ember.Mixin.create(s.default,{namespace:Ember.computed("session.token","session.siteId",{get:function(){var e=Ember.get(this,"session.siteId"),t=Ember.get(this,"session.token")
return e?"".concat(t,"_").concat(e):t}}),storageAvailable:Ember.computed("hotline.ui.storageAvailable",{get:function(){return this.get("hotline.ui.storageAvailable")}}),isEmptyObject:function(e){if(e)for(var t in e)return!e.hasOwnProperty(t)
return!0},updateStorage:function(e,t){var s=this.get("hotline.ui.storage")
s?s[e]=t:this.set("hotline.ui.storage",{namespace:t})},getStorage:function(e){var s,n
return this.get("storageAvailable")&&(s=localStorage.getItem(e),n=t.default.safelyParseJSON(s)||{}),this.isEmptyObject(n)&&(n=(s=this.get("hotline.ui.storage"))&&s[e],this.isEmptyObject(n)&&(n={})),n},setItemLS:function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3]
null===s&&(s=Ember.get(this,"namespace"))
var a=this.get("storageAvailable"),i=this.getStorage(s)
i&&(i[e]=t,a?localStorage.setItem(s,JSON.stringify(i)):n=!0,this.updateStorage(s,i),n&&t&&this.postMessage({action:"set_storage_item",data:{key:s,value:i}}))},getItemLS:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2]
null===t&&(t=Ember.get(this,"namespace"))
var n,a=this.get("storageAvailable"),i=this.getStorage(t)
if(i&&i.hasOwnProperty(e)&&(n=i[e]),a||(s=!0),s&&!n){var o=this.get("hotline.ui.storage"),r=o?o[t]:null
r&&(n=r[e],Object.keys(r).length&&a&&localStorage.setItem(t,JSON.stringify(r)))}return n},removeItemLS:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2]
null===t&&(t=Ember.get(this,"namespace"))
var n=this.get("storageAvailable"),a=this.getStorage(t)
n||(s=!0),a&&(delete a[e],this.isEmptyObject(a)?(n&&localStorage.removeItem(t),this.updateStorage(t,{}),s&&this.postMessage({action:"remove_storage_item",data:{key:t}})):(n&&localStorage.setItem(t,JSON.stringify(a)),this.updateStorage(t,a),s&&this.postMessage({action:"set_storage_item",data:{key:t,value:a}})))}})
e.default=n}),define("hotline-web/mixins/message-mask-mixin",["exports","hotline-web/utils/regex-utils"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=Ember.Mixin.create({maskText:function(e){if(null==e||""===e)return this.logger.log("Error while masking text. Text is null."),null
var t=this.get("hotline.ui.backendMaskConfigData"),s=this.get("session.config.mask_text")&&this.get("session.config.mask_text")instanceof Array?this.get("session.config.mask_text"):[]
return t&&t.length>0?this.doMaskingUsingBackendConfig(e,t):s&&s.length>0?this.doMaskingUsingFrontendConfig(e,s):e},maskTextForFragments:function(e){for(var t=e&&e.length,s=0;s<t;s++){var n=e[s].content
e[s].content=n?this.maskText(n):null}return e},doMaskingUsingBackendConfig:function(e,s){if(null==e||""===e)return this.logger.log("Error while masking text. Text is null."),null
for(var n=s&&s.length,a=0;a<n;a++){var i=s[a].javascriptRegexMasks
if((i=i&&i instanceof Array?i:[])&&i.length)for(var o=0;o<i.length;o++){var r=i[o]
if(r.regex&&r.replacementStr){var l=new RegExp(r.regex,"g")
e=1===r.replacementStr.length?t.default.maskTextUsingSingleCharacter(e,l,r.replacementStr):t.default.replaceText(e,l,r.replacementStr)}}}return e},doMaskingUsingFrontendConfig:function(e,s){for(var n=s&&s.length,a=0;a<n;a++){var i=s[a]
i.regex_to_hide&&i.replace_text&&(e=1===i.replace_text.length?t.default.maskTextUsingSingleCharacter(e,i.regex_to_hide,i.replace_text):t.default.replaceText(e,i.regex_to_hide,i.replace_text))}return e}})
e.default=s}),define("hotline-web/mixins/message",["exports","hotline-web/utils/constants"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=Ember.Mixin.create({widget:Ember.computed("hotline.ui.widget",{get:function(){return this.get("hotline.ui.widget")}}),origin:Ember.computed("session.referrer",{get:function(){var e=this.get("session.referrer")
return e&&atob(e)}}),updateNotAuthenticatedMessage:function(e){return this.jwt.isJWTStrictMode()&&this.jwt.auth.expired&&Ember.set(e,"status",t.default.MESSAGE_STATUS.UNAUTHENTICATED),e},postMessage:function(e){this.get("widget")&&(this.cache.encache("post_message",e),window.parent.postMessage(e,this.get("origin")))}})
e.default=s}),define("hotline-web/mixins/payload",["exports","ember-inflector"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=Ember.Mixin.create({normalizeSingleResponse:function(e,t,s,n,a){var i=t&&Ember.String.camelize(t.modelName),o=this.primaryKey||"appId",r={}
return s.id=s[o]||n,r[i]=s,this._super(e,t,r,n,a)},normalizeFindAllResponse:function(e,s,n,a,i){for(var o=s&&Ember.String.camelize(s.modelName),r=o&&(0,t.pluralize)(o),l=this.primaryKey||"appId",u={},c=0;c<n.length;c++)n[c].id=n[c][l]
return u[r]=n,this._super(e,s,u,a,i)},serializeIntoHash:function(e,t,s,n){var a=this.serialize(s,n)
for(var i in a)e[i]=a[i]
s.id&&(e.id=s.id)}})
e.default=s}),define("hotline-web/mixins/sanitize",["exports","hotline-web/utils/sanitize"],function(e,t){function s(e,t){if(t)return e.lookup("sanitizer:"+t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var n=Ember.Mixin.create({sanitizeElement:function(e,n){var a=this.$(e)[0]
return(0,t.sanitizeElement)(a,s(this.container,n))},sanitizeHTML:function(e,n){return(0,t.sanitize)(e,s(Ember.getOwner(this),n))}})
e.default=n}),define("hotline-web/mixins/store-url",["exports","hotline-web/utils/constants","hotline-web/mixins/jwt"],function(e,t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var n=Ember.get,a=Ember.Mixin.create(s.default,{addSiteIdParam:function(e){var s=n(this,"session"),a=s&&s.siteId
if(a){var i="".concat(t.default.EmberModelQueryParams.SiteId,"=").concat(a)
e+=-1!==e.indexOf("?")?"&".concat(i):"?".concat(i)}return e},getUserUpdateURL:function(e){var s=n(this,"session"),a=s&&s.identifyByReferenceId,i=e&&e.token,o=e&&e.alias,r=(e&&e.url||t.default.EmberModelUrl.updateUser.url).replace(t.default.EmberModelPathParams.Token,i).replace(t.default.EmberModelPathParams.UserAlias,o)
return this.isJWTEnabled&&a&&(r+="?".concat(t.default.EmberModelQueryParams.IdentifyByReferenceId,"=true")),r=this.addSiteIdParam(r)}})
e.default=a}),define("hotline-web/mixins/subscription",["exports","hotline-web/mixins/localstorage"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=Ember.Mixin.create(t.default,{actions:{clearSubscription:function(){var e=this.get("session.token"),t=this.get("session.siteId"),s=t?"hop-".concat(e,"-").concat(t):"hop-".concat(e)
this.removeItemLS("subscriptionInfo"),this.removeItemLS("lastPushActionMillis"),this.removeItemLS("subDomainName"),this.removeItemLS("hop",s,!1),this.set("hotline.ui.push",void 0),this.postMessage({action:"clear_subscription"})}}})
e.default=s}),define("hotline-web/mixins/transaction-mixin",["exports","hotline-web/utils/constants"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=Ember.Mixin.create({processTransaction:function(e){if(this._transactions[e]){for(var t=[];this._transactions[e].length;){var s=this._transactions[e].shift()
s&&t.push(s)}if(t.length)switch(e){case 1:this.processDDEvents(t)
break
case 2:this.processStoreEvents(t)}}},processDDEvents:function(e){var s=Ember.get(this,"session"),n=s&&s.siteId,a=t.default.EmberModelUrl.dataDogSBMulti.url.replace("{token}",s.token)
a+="?token=".concat(this.get("session.wcfcToken")),n&&(a+="&siteId=".concat(n)),navigator.sendBeacon(a,JSON.stringify({metrics:e}))},processStoreEvents:function(e){var s=Ember.get(this,"session.user"),n=Ember.get(this,"session.siteId"),a=t.default.EmberModelUrl.newSBMultiEvent.url.replace("{token}",this.get("session.token")).replace("{userAlias}",s&&s.alias)
a+="?token=".concat(this.get("session.wcfcToken")),n&&(a+="&siteId=".concat(n)),s&&s.id&&navigator.sendBeacon(a,JSON.stringify({events:e}))}})
e.default=s})
define("hotline-web/mixins/url-mixin",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.Mixin.create({session:Ember.inject.service(),token:Ember.computed("session.token",{get:function(){return Ember.get(this,"session.token")}}),siteId:Ember.computed("session.siteId",{get:function(){return Ember.get(this,"session.siteId")}}),alias:Ember.computed("session.user.alias",{get:function(){return Ember.get(this,"session.user.alias")}}),urlTemplate:Ember.computed("token","alias",{get:function(){var e=this.URL.default.replace("{token}",Ember.get(this,"token")).replace("{userAlias}",Ember.get(this,"alias"))
return Ember.get(this,"siteId")&&(e+="?siteId=".concat(Ember.get(this,"siteId"))),e}}),createRecordUrlTemplate:Ember.computed({get:function(){var e=this.URL.create?this.URL.create:this.URL.default
return Ember.get(this,"siteId")&&(e+="?siteId=".concat(Ember.get(this,"siteId"))),e.replace("{token}",Ember.get(this,"token")).replace("{userAlias}",Ember.get(this,"alias"))}}),updateRecordUrlTemplate:Ember.computed({get:function(){var e=this.URL.update?this.URL.update:this.URL.create?this.URL.create:this.URL.default
return Ember.get(this,"siteId")&&(e+="?siteId=".concat(Ember.get(this,"siteId"))),e.replace("{token}",Ember.get(this,"token")).replace("{userAlias}",Ember.get(this,"alias"))}})})
e.default=t}),define("hotline-web/mixins/user-locate",["exports","hotline-web/utils/constants","hotline-web/utils/utils","hotline-web/mixins/handle-event","hotline-web/mixins/localstorage","hotline-web/mixins/subscription","hotline-web/mixins/user-token","hotline-web/mixins/locale","hotline-web/mixins/jwt","hotline-web/mixins/store-url"],function(e,t,s,n,a,i,o,r,l,u){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var c=Ember.Mixin.create(n.default,a.default,i.default,o.default,r.default,l.default,u.default,{actions:{isUserCreated:function(e){var t=this.isUserAvailable()
e&&e(!0,200,t)},loadUser:function(){var e=this,s=Ember.get(this,"session"),n=s&&s.user,a=n&&n.alias,i=n&&n.identifier,o=n&&n.restoreId,r=n&&n.errors,l=r&&r.length?r[0]:r,u=s&&s.externalId,c=s&&s.restoreId,d=s&&s.jwtAuthToken,m=Ember.get(this,"lfds"),h=this.jwt.isEnabled&&d&&this.jwt.auth.app,f=h&&u&&(1===n.errorCode||2===n.errorCode),g=h&&i&&n.alias
if(u&&c||g||f)if(i===u&&o===c||g)m.set("externalId",u),this.send("save",!1),this.send("trackActivity",a),this.send("userStateChange",{userState:t.default.UserState.LOADED}),this.isJWTEnabled()&&this.jwt.authenticateUser(!0),this.send("updateProperties",n)
else{Ember.set(s,"user",{}),m.set("externalId",void 0),m.set("properties",void 0),m.set("alias",void 0)
var p=t.default.EmberModelUrl,b=s&&s.siteId,v=s&&s.token,E=p.reset,y=E.url.replace("{token}",v)
b&&(y+="?siteId=".concat(b)),this.send("resetTokenAlias")
var w=function(){e.send("reset"),e.send("clearSubscription"),e.send("locateUser")}
this.get("store").postRequest(E.model,y).then(w,w)}else u?l?this.send("handleUserError",l):a&&this.send("identifyUser",{externalId:u,jwtAuthToken:d},function(s,n,i){e.postMessage({action:"user_created",success:s,status:n,data:i}),!1===s&&403===n&&e.get("isJWTStrictMode")?e.send("userStateChange",{userState:t.default.UserState.NOT_LOADED,success:!1,status:404}):e.send("trackActivity",a)}):l?this.send("handleUserError",l):(this.send("userStateChange",{userState:t.default.UserState.LOADED}),this.isJWTEnabled()&&this.jwt.authenticateUser(!0),this.send("handleUserSuccess",n))},locateUser:function(){var e=this,s=Ember.get(this,"session"),n=s&&s.token,a=s&&s.siteId,i=s&&s.externalId,o=s&&s.restoreId,r=s&&s.jwtAuthToken,l=t.default.EmberModelUrl,u=l.user,c=l.renewJWT,d=u.url.replace("{token}",n),m="".concat(d,"/").concat(btoa(i),"/restore/").concat(o),h=c.url.replace("{token}",n),f=!0
a&&(m+="?siteId=".concat(a),h+="?siteId=".concat(a))
var g=function(n){e.send("clearSubscription")
var a=e.getItemLS("wcfcAlias",s.token),i=e.getItemLS("wcfcMigrated",s.token)
n&&!n.errorCode?i&&a===n.alias?e.send("handleUserError",{status:"404",updateUserStateChange:f}):(e.send("userStateChange",{userState:t.default.UserState.RESTORED}),e.isJWTEnabled()&&e.jwt.authenticateUser(!0),e.send("handleUserSuccess",n)):(n.updateUserStateChange=f,e.send("resetTokenAlias"),e.send("handleUserError",n))},p=function(t){t.updateUserStateChange=f,e.send("resetTokenAlias"),e.send("handleUserError",t)}
if(this.jwt.isEnabled&&r){var b={jwtAuthToken:r}
f=!1,this.store.postRequest(c.model,h,b).then(g,p)}else this.store.getRequest(u.model,m).then(g,p)},trackActivity:function(){var e=this,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=this.get("session.token"),a=this.getItemLS("lastActivitySent"),i=a&&new Date(a),o=new Date
i&&i.getDate()===o.getDate()&&i.getMonth()===o.getMonth()&&i.getYear()===o.getYear()||Ember.$.ajax({type:"PUT",url:t.default.EmberModelUrl.trackActivity.url.replace("{token}",n).replace("{userAlias}",s||this.get("lfds.alias"))}).then(function(t){t&&t.errorCode||e.setItemLS("lastActivitySent",new Date)}),this.send("loadChannels")},handleUserSuccess:function(e){if(e){var t=e.identifier,s=e.restoreId,n=e.alias,a=Ember.get(this,"session"),i=Ember.get(this,"lfds.messageAfter")
this.postMessage({action:"user_created",success:!0,status:200,data:t?{externalId:t,restoreId:s}:null})
var o=e.nameGenerated?void 0:e.firstName,r=e.nameGenerated?void 0:e.lastName,l=o?r?"".concat(o," ").concat(r).trim():o.trim():"Unknown"
e.name=l,Ember.set(a,"user",e),a.token&&n&&this.send("updateTokenAlias",{token:e.wcfcToken||a&&a.wcfcToken,alias:n}),this.send("updateProperties",e),i?Ember.set(a,"didMessage",i):Ember.set(a,"didMessage",0),this.reportVisit(),this.send("trackActivity",n)}},handleUserError:function(e){var s=e&&e.errors,n=s&&s.length?s[0]:s,a=e&&e.errorCode||n&&n.errorCode,i=e&&e.status||n&&n.status,o=void 0===e.updateUserStateChange||e.updateUserStateChange,r=this.isJWTEnabled()&&"404"===i&&!o
if("502"===i&&this.get("router").replaceWith("503"),"401"===i||"404"===i||"412"===i||"428"===i||1===a||2===a||11===a){if(this.send("reset"),this.send("clearSubscription"),o){var l=this.get("session.jwtAuthToken"),u=l&&this.getJWTMeta(l),c=u&&u.freshchat_uuid
if(this.validateAndResetUUID(c)){var d=Ember.get(this,"lfds")
d&&(Ember.set(d,"alias",null),this.send("save",!1))}this.send("userStateChange",{userState:t.default.UserState.NOT_LOADED,success:!1,status:404})}else r&&this.jwt.authenticateUser(!0)
this.postMessage({action:"user_created",success:!1,status:parseInt(i,10)}),this.get("isJWTStrictMode")&&!r||this.send("trackActivity")}},resetSession:function(e){var s=this,n=this.get("session"),a=n&&n.user,i=n&&n.token,o=n&&n.siteId,r=this.get("store"),l=t.default.EmberModelUrl.reset
if(i)if(a&&a.alias){var u=l.url.replace("{token}",i)
o&&(u+="?siteId=".concat(o)),this.send("resetTokenAlias"),this.jwt.isEnabled&&(Ember.set(n,"jwtAuthToken",void 0),Ember.set(n,"externalId",void 0)),r.postRequest(l.model,u).then(function(){var t=s.get("lfds")
t&&(t.set("externalId",void 0),t.set("properties",void 0),t.set("alias",void 0),s.send("reset",null,!0),Ember.set(n,"user",{}),Ember.set(n,"prop",{})),s.reloadRoute(),e(!0,200)},function(){e(!1,400)})}else e(!1,401)
else e(!1,404)},createUser:function(e,n){var a=this,i=this.get("session"),o=i&&i.token,r=i&&i.user,l=i&&i.siteId,u=e&&e.externalId||i&&i.externalId,c=e&&e.firstName,d=e&&e.lastName,m=e&&e.email,h=e&&e.phone,f=e&&e.phoneCountry,g=e&&e.locale||s.default.getNavigatorLanguage(),p=e&&e.meta,b=this.getUserParams(),v=t.default.EmberModelUrl.user,E=i&&i.config&&i.config.pushToFreshSales,y={},w=function(t){a.setItemLS("isUserCreateSent",!1),a.get("session.user.wcfcToken")||(304===t?a.restoreAlias()&&a.send("createUser",e,n):400!==t&&409!==t||n(!1,t))}
if(u&&Ember.set(b.user,"identifier",u),c&&Ember.set(b.user,"firstName",c),d&&Ember.set(b.user,"lastName",d),m&&Ember.set(b.user,"email",m),h&&Ember.set(b.user,"phone",h),f&&Ember.set(b.user,"phoneCountry",f),g&&Ember.set(b.user,"locale",g),p&&Ember.set(b.user,"meta",p),Ember.set(b.user,"totalSessions",1),o)if(r&&r.alias||this.getItemLS("isUserCreateSent")||this.isUserAvailable())n(!1,403)
else{this.setItemLS("isUserCreateSent",!0)
var _=v.url.replace("{token}",o),T=this.get("hotline.ui.browser")
l&&(b.user.meta?Ember.set(b.user.meta,"siteId",l):Ember.set(b.user,"meta",{siteId:l}),y.siteId=l),E&&(y.pushToFreshSales=!0),_=s.default.addQueryParams(_,y),Ember.set(b.user,"deviceWebMeta",{browser:T.name,browserVersion:T.versionx,device:T.os,os:"Web"}),Ember.$.ajax({type:"POST",url:_,data:JSON.stringify(b),cache:!1,contentType:"application/json; charset=UTF-8"}).then(function(e,s,o){a.setItemLS("isUserCreateSent",!1)
var r=o&&o.status,l=e&&e.restoreId
if(r>=200&&r<=299){a.logger.log("User Created")
var u=e.nameGenerated?void 0:e.firstName,c=e.nameGenerated?void 0:e.lastName,d=u?c?"".concat(u," ").concat(c).trim():u.trim():"Unknown"
e.name=d,e.wcfcToken&&a.send("updateTokenAlias",{token:e.wcfcToken,alias:e.alias}),Ember.set(i,"user",e),Ember.set(i,"restoreId",l),e.alias?(a.send("userStateChange",{userState:t.default.UserState.CREATED}),a.reloadRoute(),n(!0,200,e)):n(!1,r)}else w(r)},function(e){w(e&&e.status)})}else n(!1,404)},userIdentified:function(e){var t=e&&e.alias,s={alias:t,externalId:e&&e.identifier,restoreId:e&&e.restoreId}
t?(this.postMessage({action:"user_created",success:!0,status:200,data:s}),this.send("toggleExternalId",e.identifier)):this.postMessage({action:"user_created",success:!1,status:400})},getUserUUID:function(e){var t=this.getUserUUID()
t&&(this.get("lfds").set("alias",t),this.send("save",!1),e(t))},generateUserUUID:function(e){e&&e(this.generateUserUUID())},userStateChange:function(e){var t=!0,s=200
void 0!==e.success&&(t=e.success,delete e.success),void 0!==e.status&&(s=e.status,delete e.status),this.postMessage({action:"user_state_change",status:s,success:t,data:e})},userCleared:function(){this.postMessage({action:"user_cleared"})},updateUser:function(e){var s=this,n=t.default.EmberModelUrl.updateUser,a=this.get("session"),i=this.get("store"),o=this.get("hotline.ui.browser"),r=a&&a.user,l=a&&a.token,u=r&&r.alias,c=r&&r.id,d=!(!this.jwt.isEnabled||!e.jwtAuthToken),m={browser:o.name,browserVersion:o.versionx,device:o.os,os:"Web"},h={}
if(this.jwt.isEnabled){if(e.user?(e.user.id=c,h=e):(h.jwtAuthToken=e.jwtAuthToken||a.jwtAuthToken,delete e.jwtAuthToken,h.user=e,h.user.id=c),h.user.deviceWebMeta=m,!h.jwtAuthToken)return void this.postMessage({action:"update_user_ack",status:401,success:!1})
if(this.jwt.auth.scheduled&&d)return void this.postMessage({action:"update_user_ack",status:429,success:!1})
d&&(this.jwt.authenticateToken(),this.jwt.auth.scheduled=!0)}else Ember.setProperties(e,{alias:u,id:c,deviceWebMeta:m}),h.user=e
i.putRequest(n.model,this.getUserUpdateURL({url:n.url,token:l,alias:u}),h).then(function(e){var t=e&&e.alias&&!e.errorCode?200:400,n=200===t
n?(d&&(h.jwtAuthToken&&Ember.set(s,"session.jwtAuthToken",h.jwtAuthToken),s.send("updateJWTAuthToken",h.jwtAuthToken)),s.send("updateProperties",e)):d&&s.send("updateJWTAuthToken"),s.postMessage({action:"update_user_ack",status:t,success:n})},function(){d&&s.send("updateJWTAuthToken"),s.postMessage({action:"update_user_ack",status:400,success:!1})})},updateJWTAuthToken:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null
this.jwt.auth.scheduled=!1,e?(Ember.set(this,"session.jwtAuthToken",e),this.jwt.auth.expired=!1,this.jwt.authenticateUser(!0)):(Ember.set(this,"session.jwtAuthToken",null),this.jwt.auth.expired=!0,this.jwt.authenticateUser(!1))},identifyUser:function(e,s){var n=this,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=this.get("session"),o=this.get("store"),r=this.get("lfds"),l=i&&i.user,u=i&&i.token,c=l&&l.alias,d=l&&l.id,m=l&&l.identifier,h=e&&e.externalId,f=e&&e.restoreId,g=e&&e.jwtAuthToken,p=t.default.EmberModelUrl.updateUser
if(Ember.set(i,"externalId",h),Ember.set(i,"restoreId",f),Ember.set(i,"jwtAuthToken",g),c)if(!m||g&&!f)if(f);else{var b,v=this.get("hotline.ui.browser");(h||g)&&(g?b={user:{id:d},jwtAuthToken:g}:(b=this.getUserParams(),Ember.setProperties(b.user,{identifier:h,alias:c,id:d,deviceWebMeta:{browser:v.name,browserVersion:v.versionx,device:v.os,os:"Web"}}))),o.putRequest(p.model,this.getUserUpdateURL({url:p.url,token:u,alias:c}),b).then(function(e){var a=e&&e.alias&&!e.errorCode,o=e&&e.identifier,l=e&&e.restoreId
a?(n.reloadRoute(),n.send("toggleExternalId",e.identifier),r.set("alias",a),n.send("save",!1),Ember.set(i,"restoreId",l),n.send("userStateChange",{userState:t.default.UserState.IDENTIFIED}),n.isJWTEnabled()&&n.jwt.authenticateUser(!0),s(!0,200,{externalId:o,restoreId:l})):s(!1,400)}).catch(function(){s(!1,400)})}else m===h?(Ember.set(i,"restoreId",l.restoreId),this.send("userStateChange",{userState:t.default.UserState.LOADED}),this.isJWTEnabled()&&this.jwt.authenticateUser(!0),s(!0,200,{externalId:m,restoreId:l.restoreId})):a?this.send("resetSession",function(e){e&&(s(!1,403),n.send("clearSubscription"))}):s(!1,403)
else f||this.send("toggleExternalId",h),s(!0,404)},setExternalId:function(e,t){var s=this.get("session")
s&&s.token?this.send("identifyUser",e,t,!1):t(!0,404)},setUserProperties:function(e,t){var s=this.get("session"),n=s&&s.prop,a=s&&s.token,i=s&&s.user,o=i&&i.id,r=i&&i.alias,l=this.get("lfds").get("properties")
if(a)if(r&&o)this.set("updatingUser",!0),this.send("updateUserProperties",e,t)
else{if(this.jwt.isEnabled&&e&&e.jwtAuthToken)Ember.set(s,"jwtAuthToken",e.jwtAuthToken)
else{if(e){var u=e.firstName||n&&n.firstName||l&&l.get("firstName"),c=e.lastName||n&&n.lastName||l&&l.get("lastName");(u||c)&&(e.firstName=u,e.lastName=c,e.nameChanged=!0)}this.send("updateProperties",e)}t(!0,200)}else t(!0,404)},toggleExternalId:function(e){var t=this.get("lfds")
t&&(e?t.set("externalId",e):t.set("externalId",void 0),this.send("save",!1))},updateProperties:function(){var e,t,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=this.get("lfds"),a=this.get("session"),i=a&&a.user,o=a&&a.siteId,r=this.getItemLS("wcfcMigrated",a.token),l=s&&s.meta&&s.meta.siteId,u=this.get("hotline.ui.browser"),c={browser:u.name,browserVersion:u.versionx,device:u.os,os:"Web"},d=n.get("properties"),m=a&&a.prop,h=m&&m.locale||d&&d.get("locale"),f=m&&m.firstName||d&&d.get("firstName"),g=m&&m.lastName||d&&d.get("lastName"),p=m&&m.nameChanged||d&&d.get("nameChanged")||s&&s.nameChanged,b=m&&m.email||d&&d.get("email"),v=m&&m.phone||d&&d.get("phone"),E=m&&m.phoneCountry||d&&d.get("phoneCountry")
if(s)if(e=s.nameGenerated?void 0:s.firstName,t=s.nameGenerated?void 0:s.lastName,d.get("id")){if(d.set("firstName",e),d.set("lastName",t),s.email&&d.set("email",s.email),s.phone&&d.set("phone",s.phone),s.phoneCountry&&d.set("phoneCountry",s.phoneCountry),s.locale&&d.set("locale",s.locale),s.meta){var y=n&&n.get("meta")||{},w=s&&s.meta
if(w)for(var _ in w)w.hasOwnProperty(_)&&(y[_]=w[_])
n.set("meta",y),Ember.set(a,"prop",{firstName:e,lastName:t,nameChanged:p,email:d.get("email"),phone:d.get("phone"),phoneCountry:d.get("phoneCountry"),locale:d.get("locale"),meta:y,deviceWebMeta:c})}}else this.get("lfds").set("properties",this.get("store").createRecord("properties",{firstName:e,lastName:t,nameChanged:p,email:s.email,phone:s.phone,phoneCountry:s.phoneCountry,locale:s.locale,deviceWebMeta:c})),this.get("lfds").set("meta",s.meta),Ember.set(a,"prop",s)
var T={}
null===s&&(s=i),p&&f&&e&&f!==e&&(Ember.set(a.prop,"firstName",f),T.firstName=f),p&&g&&t&&g!==t&&(Ember.set(a.prop,"lastName",g),T.lastName=g),b&&b!==s.email&&(Ember.set(a.prop,"email",b),T.email=b),v&&v!==s.phone&&(Ember.set(a.prop,"phone",v),T.phone=v),E&&E!==s.phoneCountry&&(Ember.set(a.prop,"phoneCountry",E),T.phoneCountry=E),h&&h!==s.locale&&(Ember.set(a.prop,"locale",h),T.locale=h),Object.keys(T).length?(r&&o!==l&&Ember.setProperties(T,{meta:{siteId:o}}),this.send("processUserUpdate",T)):r&&o!==l&&this.send("processUserUpdate",{meta:{siteId:o}}),this.send("save",!1)},processUserUpdate:function(e){if(this.get("updatingUser"))this.set("updatingUser",!1),this.logger.log("Updating user failed")
else{var t=this.get("session.user")
t&&t.id&&(this.set("updatingUser",!0),this.send("updateUserProperties",e))}},updateUserProperties:function(e,s){var n=this,a=t.default.EmberModelUrl.updateUser,i=this.get("session"),o=this.get("store"),r=this.get("hotline.ui.browser"),l={browser:r.name,browserVersion:r.versionx,device:r.os,os:"Web"},u=i&&i.user,c=i&&i.token,d=u&&u.alias,m=u&&u.id,h={}
this.jwt.isEnabled?(e.user?(e.user.id=m,h=e):(h.jwtAuthToken=e.jwtAuthToken||i.jwtAuthToken,delete e.jwtAuthToken,h.user=e,h.user.id=m),h.user.deviceWebMeta=l,h.jwtAuthToken||s(!1,401)):(Ember.setProperties(e,{alias:d,id:m,deviceWebMeta:l}),h.user=e),o.putRequest(a.model,this.getUserUpdateURL({url:a.url,token:c,alias:d}),h).then(function(e){var t=e&&e.alias&&!e.errorCode?200:400,a=200===t
a&&(n.updateAppLocale(e.locale),n.send("updateProperties",e)),s&&"function"==typeof s&&s(a,t,e)})}}})
e.default=c}),define("hotline-web/mixins/user-reset",["exports","hotline-web/utils/utils","hotline-web/mixins/subscription","hotline-web/mixins/message"],function(e,t,s,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var a=Ember.Mixin.create(s.default,n.default,{deleteUser:function(){this.removeItemLS("wcfcToken"),this.removeItemLS("wcfcAlias"),this.setItemLS("isUserCreateSent",!1),Ember.set(this.get("session"),"user",{}),t.default.default.setWCFC(""),this.send("reset",null,!0),this.send("clearSubscription")}})
e.default=a}),define("hotline-web/mixins/user-token",["exports","hotline-web/mixins/localstorage","hotline-web/utils/utils"],function(e,t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var n=Ember.Mixin.create(t.default,{actions:{updateTokenAlias:function(e){var t=e&&e.token,n=e&&e.alias
this.setItemLS("wcfcToken",t),this.setItemLS("wcfcAlias",n),this.set("session.wcfcToken",t),s.default.setWCFC(t),this.get("lfds").set("wcfcToken",t),this.get("lfds").set("alias",n)},resetTokenAlias:function(){this.removeItemLS("wcfcToken"),this.removeItemLS("wcfcAlias"),this.set("session.wcfcToken",""),s.default.setWCFC(""),this.get("lfds").set("wcfcToken",void 0)}}})
e.default=n}),define("hotline-web/mixins/user",["exports","hotline-web/helpers/guid","hotline-web/utils/constants","hotline-web/utils/utils","hotline-web/mixins/localstorage","hotline-web/mixins/subscription","hotline-web/mixins/user-reset","hotline-web/mixins/message","hotline-web/mixins/user-token","hotline-web/mixins/file-upload-helper-mixin"],function(e,t,s,n,a,i,o,r,l,u){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var c=Ember.Mixin.create(a.default,i.default,o.default,l.default,r.default,u.default,{maxLimit:5,tryCount:0,hasUserToCreate:!1,getUserAlias:function(){var e=Ember.get(this,"session")
return this.getItemLS("wcfcAlias")||this.getItemLS("wcfcAlias",e.token)&&!this.getItemLS("wcfcMigrated",e.token)},isUserAvailable:function(){return!!this.getUserAlias()},isUserCreated:function(e){var t=e&&e.status
return t>=200&&t<=299},checkUserStateChange:function(e,t,n,a){this.parentView&&this.isUserCreated(a)&&this.parentView.send("userStateChange",{userState:"GET"===e?s.default.UserState.LOADED:s.default.UserState.CREATED})},handleUserCreateSuccess:function(e,t,s){var n=s&&s.status
n>=200&&n<=299?this.send("createUserSuccess",e):this.send("createUserFailure",n)},handleUserCreateFailure:function(e){var t={success:!1,status:e.status}
410===e.status&&(this.deleteUser(),t.userState=s.default.UserState.DELETED),400!==e.status&&409!==e.status&&428!==e.status&&412!==e.status||(t.userState=s.default.UserState.NOT_CREATED),this.parentView&&this.parentView.send("userStateChange",t),this.send("createUserFailure",e&&e.status)},getUserUUID:function(){var e=this.get("lfds"),s=e&&e.get("alias")
if("string"!=typeof s||36!==s.length){var n=this.getUserAlias()
if(n)return n
s=t.default.generate()}return s},generateUserUUID:function(){return t.default.generate()},getUserParams:function(){var e=this.get("lfds"),t=this.get("session.prop"),s=!t||t.errors&&0!==t.errors.length?e&&e.get("properties"):t,n=this.getUserUUID(),a={user:{}}
return s&&(s.get&&s.get("id")?Ember.setProperties(a.user,{firstName:s.get("firstName"),lastName:s.get("lastName"),email:s.get("email"),phone:s.get("phone"),phoneCountry:s.get("phoneCountry"),locale:s.get("locale"),meta:e.get("meta")}):(Ember.setProperties(a.user,{firstName:s.firstName,lastName:s.lastName,email:s.email,phone:s.phone,phoneCountry:s.phoneCountry,locale:s.locale,meta:s.meta}),Object.keys(s).length>0?(e.set("meta",s.meta),e.set("properties",this.get("store").createRecord("properties",s))):(e.set("meta",void 0),e.set("properties",void 0)))),Ember.set(a.user,"alias",n),e.set("alias",n),this.send("save",!1),a},restoreAlias:function(){var e=this.get("tryCount")+1
return!!(e<=this.get("maxLimit")&&(this.set("tryCount",e),this.get("session.token")))&&(this.get("lfds").set("alias",void 0),this.send("save",!1),!0)},actions:{createUser:function(e){var t=this
this.set("doesUserExists",!1),this.send("sendMessage",e),this.setItemLS("isUserCreateSent",!0)
var a={}
if(this.isUserAvailable()){var i=s.default.EmberModelUrl,o=i.user,r=i.userToken,l=Ember.get(this,"session"),u=l&&l.siteId,c=l&&l.token,d=l&&l.jwtAuthToken,m=o.url.replace("{token}",c),h=r.url.replace("{token}",c)
u&&(a.siteId=u,h+="?siteId=".concat(u)),m=n.default.addQueryParams(m,a)
var f=this.getItemLS("wcfcToken")||this.getItemLS("wcfcToken",c)
if(this.set("session.wcfcToken",f),n.default.setWCFC(f),this.jwt.isEnabled&&d){var g={jwtAuthToken:d}
Ember.$.ajax({type:"POST",url:h,data:JSON.stringify(g),cache:!1,contentType:"application/json; charset=UTF-8"}).then(function(){for(var e=arguments.length,s=new Array(e),n=0;n<e;n++)s[n]=arguments[n]
t.checkUserStateChange.apply(t,["GET"].concat(s)),t.handleUserCreateSuccess.apply(t,s)},this.handleUserCreateFailure.bind(this))}else Ember.$.ajax({type:"GET",url:m,cache:!1,contentType:"application/json; charset=UTF-8"}).then(function(){for(var e=arguments.length,s=new Array(e),n=0;n<e;n++)s[n]=arguments[n]
t.checkUserStateChange.apply(t,["GET"].concat(s)),t.handleUserCreateSuccess.apply(t,s)},this.handleUserCreateFailure.bind(this))}else this.send("createNewUser")},createNewUser:function(){var e=this,t=this.get("session"),a=this.get("hotline.ui.browser"),i=t&&t.siteId,o=t&&t.externalId||this.get("lfds.externalId"),r=s.default.EmberModelUrl.user.url.replace("{token}",t&&t.token),l=t&&t.config&&t.config.pushToFreshSales,u={},c=this.jwt.isEnabled?{user:{},jwtAuthToken:t.jwtAuthToken}:this.getUserParams()
o&&Ember.set(c.user,"identifier",o),Ember.set(c.user,"totalSessions",1),i&&(this.jwt.isEnabled||!c.user.meta?Ember.set(c.user,"meta",{siteId:i}):Ember.set(c.user.meta,"siteId",i),u.siteId=i),l&&(u.pushToFreshSales=!0),r=n.default.addQueryParams(r,u),Ember.set(c.user,"locale",c.user.locale||n.default.getNavigatorLanguage()),Ember.set(c.user,"deviceWebMeta",{browser:a.name,browserVersion:a.versionx,device:a.os,os:"Web"}),Ember.$.ajax({type:"POST",url:r,data:JSON.stringify(c),cache:!1,contentType:"application/json; charset=UTF-8"}).then(function(){for(var t=arguments.length,s=new Array(t),n=0;n<t;n++)s[n]=arguments[n]
e.checkUserStateChange.apply(e,["POST"].concat(s)),e.handleUserCreateSuccess.apply(e,s)},this.handleUserCreateFailure.bind(this))},createUserSuccess:function(e){var t=this
this.setItemLS("isUserCreateSent",!1),this.set("hasUserToCreate",!1),this.logger.log("User Created")
var n=this.get("session"),a=e.firstName,i=e.lastName,o=a?i?"".concat(a," ").concat(i).trim():a.trim():"Unknown"
e.name=o,e.wcfcToken&&this.send("updateTokenAlias",{token:e.wcfcToken,alias:e.alias}),Ember.set(n,"user",e),this.jwt.isEnabled&&this.jwt.authenticateUser(!0)
var r=this.get("lfds.conversations").findBy("channelId",this.get("channelId"))
if(r){var l=!1
r.get("messages").filterBy("messageUserType",0).forEach(function(e){if(!(e.get("status")!==s.default.MESSAGE_STATUS.PENDING||r.get("conversationId")&&-1!==r.get("conversationId")||l)){var n=t.get("pendingFile")
if(l=!0,e.set("isResponseForBot",!0),n&&n.file&&n.fileType&&t.uploadFile(n,function(s,n){if(s){var a=e.serialize()
a=t.updateMessageFragmentsAfterFileUpload(a,n),t.assertThatAllAttachmentsHaveBeenUploaded(a)&&(a=t.updateNotAuthenticatedMessage(a),t.postMessageAPI(a)),t.set("pendingFile",null)}else t.logger.log("Error",n),t.set("pendingFile",null)}),t.get("pendingUploadTextFileObject")&&t.get("pendingUploadTextFileObject.text")&&t.get("pendingUploadTextFileObject.fileName")){var a=e.serialize()
t.uploadTextAndGetFileHash(t.get("pendingUploadTextFileObject.text"),a,t.get("pendingUploadTextFileObject.fileName"))}else t.assertThatAllAttachmentsHaveBeenUploaded(e.serialize())&&(e=t.updateNotAuthenticatedMessage(e),t.postMessageAPI(e.serialize()))}})}e.alias&&(this.parentView&&this.parentView.send("userIdentified",e),this.send("sendBulkEvents"))},createUserFailure:function(e){this.setItemLS("isUserCreateSent",!1),this.get("session.user.wcfcToken")?this.send("createUserSuccess",this.get("session.user")):(304===e&&this.restoreAlias()&&this.send("createUser"),this.logger.log("User Not Created"))}}})
e.default=c}),define("hotline-web/mixins/validation",["exports","hotline-web/utils/error-utils"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=Ember.Mixin.create({actions:{errorFieldFocus:function(){var e
Ember.run.next(function(){e=t.default.findErrorField(),setTimeout(function(){e.find(".form-control").focus()},1e3)})}}})
e.default=s}),define("hotline-web/mixins/widget-load",["exports","hotline-web/utils/utils","hotline-web/utils/constants","hotline-web/mixins/localstorage","hotline-web/mixins/locale","hotline-web/mixins/user-reset","hotline-web/mixins/jwt","hotline-web/mixins/user-locate"],function(e,t,s,n,a,i,o,r){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var l=Ember.Mixin.create(n.default,a.default,i.default,o.default,r.default,{loadPayload:function(e){var s=Ember.get(this,"session")
if(s){if(e.externalId&&Ember.set(s,"externalId",e.externalId),e.restoreId&&Ember.set(s,"restoreId",e.restoreId),e.identifyByReferenceId&&Ember.set(s,"identifyByReferenceId",e.identifyByReferenceId),e.jwtAuthToken&&Ember.set(s,"jwtAuthToken",e.jwtAuthToken),e.referrer&&Ember.set(s,"referrer",e.referrer),e.siteId&&Ember.set(s,"siteId",e.siteId),e.properties&&((e.properties.firstName||e.properties.lastName)&&(e.properties.nameChanged=!0),Ember.set(s,"prop",e.properties)),e.tags&&Ember.set(s,"tags",e.tags),e.faqTags&&Ember.set(s,"faqTags",e.faqTags),Ember.set(s,"config",e.config),s.config&&s.config.headerProperty&&s.config.headerProperty.appName&&Ember.set(s,"appDisplayName",s.config.headerProperty.appName),e.host&&!s.appHost&&(Ember.set(s,"appHost",e.host),t.default.setAppHead(e.host)),e.storage){this.set("hotline.ui.storage",{})
var n=this.get("hotline.ui.storage")
for(var a in e.storage)if(e.storage.hasOwnProperty(a)){var i=e.storage[a]
i&&(n[a]=t.default.safelyParseJSON(i))}}else this.set("hotline.ui.storage",null)
if(s.token){var o=this.getItemLS("wcfcToken",s.token,!0),r=this.getItemLS("wcfcAlias",s.token,!0),l=this.getItemLS("wcfcMigrated",s.token,!0),u=this.getItemLS("wcfcToken",null,!0)
if(u?(this.set("session.wcfcToken",u),t.default.setWCFC(u)):!0===l||o&&(this.setItemLS("wcfcMigrated",!0,s.token),this.setItemLS("wcfcAlias",r,s.token),this.setItemLS("wcfcToken",o),this.setItemLS("wcfcAlias",r),this.set("session.wcfcToken",o),t.default.setWCFC(o)),null===this.get("hotline.ui.storage")&&this.get("storageAvailable")){this.set("hotline.ui.storage",{})
var c=this.get("hotline.ui.storage"),d=e.siteId?"".concat(s.token,"_").concat(e.siteId):null,m=localStorage.getItem(s.token),h=m?t.default.safelyParseJSON(m):null,f=d?localStorage.getItem(d):null,g=f?t.default.safelyParseJSON(f):null
h?(this.postMessage({action:"set_storage_item",data:{key:s.token,value:h}}),c[s.token]=h):c[s.token]={},g?(this.postMessage({action:"set_storage_item",data:{key:d,value:g}}),c[d]=g):d&&(c[d]={})}}e.userAgent&&Ember.set(s,"userAgent",e.userAgent)}},actions:{setWidgetSize:function(){var e="fc-widget-"+Ember.get(this,"hotline.ui.config.widgetSize").toLowerCase(),t=document.getElementsByTagName("html")[0]
t.className=t.className?t.className+" "+e:e},loadWidget:function(e){this.loadPayload(e),this.send("loadDS"),this.send("setWidgetSize")},loadDS:function(){var e=this
Ember.get(this,"browserSupport")?this.store.findAll("datastore").then(function(t){t&&Ember.set(Ember.get(e,"hotline.ui"),"datastore",t),e.send("initDS")},function(){e.send("initDS")}):this.send("initDS")},initDS:function(){var e=this
Ember.get(this,"lfds")?this.send("findUser"):this.init_lfds().then(function(){e.send("findUser")},function(){window.localforage&&e.get("hotline.ui.storageAvailable")?!0===e.getItemLS("isReloaded")?(e.removeItemLS("isReloaded"),e.set("browserSupport",!1),e.init_lfds().then(function(){e.send("findUser")})):(e.setItemLS("isReloaded",!0),window.localforage.clear(function(){e.send("reloadWidget")})):(e.set("browserSupport",!1),e.init_lfds().then(function(){e.send("findUser")}))})},findUser:function(){if(this.get("isJWTStrictMode")){var e=Ember.get(this,"session"),t=e.identifyByReferenceId?this.generateUserUUID():this.getUserAlias(),n=e&&e.jwtAuthToken
!t||n?this.send("getUser"):this.send("userStateChange",{userState:s.default.UserState.NOT_AUTHENTICATED,success:!1,status:401,freshchat_uuid:t})}else this.send("getUser")},getUser:function(){var e=this,n=s.default.EmberModelUrl,a=n.user,i=n.userToken,o=Ember.get(this,"session"),r=o&&o.siteId,l=o&&o.jwtAuthToken,u=a.url.replace("{token}",Ember.get(this,"session.token")),c=i.url.replace("{token}",Ember.get(this,"session.token"))
r&&(u+="?siteId=".concat(r),c+="?siteId=".concat(r))
var d=function(n){if(n&&n.errors&&"410"===n.errors[0].status)e.deleteUser()
else if(n){var a=n.nameGenerated?void 0:n.firstName,i=n.nameGenerated?void 0:n.lastName,r=a?i?"".concat(a," ").concat(i).trim():a.trim():"Unknown"
n.name=r,Ember.set(o,"user",n),n.errorCode?n.errors=n:e.get("isJWTStrictMode")&&l&&n.alias&&e.send("updateUser",{jwtAuthToken:l})}if(e.jwt.isEnabled){var u=!(!n.success&&!n.alias)||n.errorCode>=1&&n.errorCode<=2,c=l&&u
if(e.jwt.authenticateApp(c),l){var d=l.split("."),m=d&&3===d.length?t.default.safelyParseJSON(atob(d[1])):null,h=m&&m.reference_id
h&&Ember.set(o,"externalId",h)}if(e.jwt.isStrict){var f=!!(n&&n.success||n.alias)
n.alias&&e.send("updateTokenAlias",{token:n.wcfcToken||o&&o.wcfcToken,alias:n.alias}),e.postMessage({action:"frame_state_change",success:f,status:f?200:401,data:{frameState:u?s.default.FrameState.LOADED:s.default.FrameState.NOT_AUTHENTICATED}}),c&&e.postMessage({action:"frame_state_change",success:!0,status:200,data:{frameState:s.default.FrameState.AUTHENTICATED}})}}e.send("fetchInfo")}
if(null!==this.jwt.auth.app&&null!==this.jwt.auth.user||(this.jwt.auth.app=this.jwt.auth.user=!1),this.jwt.isEnabled&&l){var m={jwtAuthToken:l}
this.store.postRequest(i.model,c,m).then(d,d)}else this.store.getRequest(a.model,u).then(d)},fetchInfo:function(){var e=this,t=s.default.EmberModelUrl.widgetInfo,n=this.get("currentLocaleString")
this.get("hotlineUI.channels")?this.send("loadUser"):(this.updateAppLocale(this.get("currentLocale")),this.store.getRequest(t.model,t.url.replace("{token}",Ember.get(this,"session.token")).replace("{locale}",n)).then(function(t){if(t){var s=Ember.get(e,"hotlineUI"),n=t.channelResponse,a=t.operatingHoursResponse,i=t.responseTimeHolder,o=t.userRules,r=t.messageMaskConfigList,l=t.requestsWhiteListedDomains
n&&(Ember.set(s,"channels",n.channels),n.contentLocale&&n.contentLocale.direction&&document.body.setAttribute("dir",n.contentLocale.direction)),a&&(a.operatingHours&&(a.operatingHours.clientTimeInMillis=(new Date).getTime()),Ember.set(s,"hours",a)),i&&Ember.set(s,"rspTime",i),o&&Ember.set(s,"userBehaviour",{eventRules:o}),r&&Ember.set(s,"backendMaskConfigData",r),l&&Ember.set(s,"whiteListedDomains",l)}e.send("loadUser")}))},loadConfig:function(e){if(e){this.get("session.config")||this.set("session.config",{}),void 0!==e.showFAQOnOpen&&this.set("session.config.showFAQOnOpen",e.showFAQOnOpen),void 0!==e.hideFAQ&&this.set("session.config.hideFAQ",e.hideFAQ),void 0!==e.faqPopupView&&this.set("session.config.faqPopupView",e.faqPopupView),void 0!==e.hideFileUpload&&this.set("session.config.hideFileUpload",e.hideFileUpload),void 0!==e.hidePoweredBy&&this.set("session.config.hidePoweredBy",e.hidePoweredBy),void 0!==e.content&&this.set("session.config.content",e.content),void 0!==e.disableEvents&&this.set("session.config.disableEvents",e.disableEvents),void 0!==e.disableNotifications&&this.set("session.config.disableNotifications",e.disableNotifications),void 0!==e.mask_text&&this.set("session.config.mask_text",e.mask_text),void 0!==e.disablePageTransition&&this.set("session.config.disablePageTransition",e.disablePageTransition),void 0!==e.widgetSize&&this.set("session.config.widgetSize",e.widgetSize),void 0!==e.fullscreen&&this.set("session.config.fullscreen",e.fullscreen)
var t=e.agent
t&&(this.get("session.config.agent")||this.set("session.config.agent",{}),void 0!==t.hideName&&this.set("session.config.agent.hideName",t.hideName),void 0!==t.hidePic&&this.set("session.config.agent.hidePic",t.hidePic),void 0!==t.hideBio&&this.set("session.config.agent.hideBio",t.hideBio))
var s=e.headerProperty
if(s){var n=s.jwtInvalidBanner
this.get("session.config.headerProperty")||this.set("session.config.headerProperty",{}),void 0!==s.backgroundColor&&this.set("session.config.headerProperty.backgroundColor",s.backgroundColor),void 0!==s.foregroundColor&&this.set("session.config.headerProperty.foregroundColor",s.foregroundColor),void 0!==s.backgroundImage&&this.set("session.config.headerProperty.backgroundImage",s.backgroundImage),void 0!==s.fontName&&this.set("session.config.headerProperty.fontName",s.fontName),void 0!==s.fontUrl&&this.set("session.config.headerProperty.fontUrl",s.fontUrl),void 0!==s.direction&&this.set("session.config.headerProperty.direction",s.direction),void 0!==s.hideChatButton&&this.set("session.config.headerProperty.hideChatButton",s.hideChatButton),void 0!==s.appLogo&&this.set("session.config.headerProperty.appLogo",s.appLogo),void 0!==s.hideHeader&&this.set("session.config.headerProperty.hideHeader",s.hideHeader),void 0!==s.appName&&(this.set("session.config.headerProperty.appName",s.appName),this.set("session.appDisplayName",s.appName||this.get("session.appName"))),n&&(this.get("session.config.headerProperty.jwtInvalidBanner")||this.set("session.config.headerProperty.jwtInvalidBanner",{}),void 0!==n.msg&&this.set("session.config.headerProperty.jwtInvalidBanner.msg",n.msg),void 0!==n.backgroundColor&&this.set("session.config.headerProperty.jwtInvalidBanner.backgroundColor",n.backgroundColor),void 0!==n.foregroundColor&&this.set("session.config.headerProperty.jwtInvalidBanner.foregroundColor",n.foregroundColor))}void 0!==e.pushToFreshSales&&this.set("session.config.pushToFreshSales",e.pushToFreshSales)}}}})
e.default=l}),define("hotline-web/mixins/window-listener-mixin",["exports","hotline-web/mixins/localstorage"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=Ember.Mixin.create(t.default,{bindNetworkEvents:function(){Ember.$(window).on("blur",this.onDidBlur.bind(this)),Ember.$(window).on("focus",this.onDidFocus.bind(this)),Ember.$(window).on("online",this.onOnline.bind(this)),Ember.$(window).on("offline",this.onOffline.bind(this)),Ember.$(window).on("beforeunload",this.onBeforeUnload.bind(this)),Ember.$(window).on("storage",this.onStorage.bind(this))},onStorage:function(e){var t=e&&e.originalEvent,s=this.get("session.token"),n=this.get("session.siteId"),a=n?"hop-".concat(s,"-").concat(n):"hop-".concat(s)
t&&t.key===a&&null==t.newValue&&this.setItemLS("hop",this.get("hotline.ui.hop"),a,!1)},onBeforeUnload:function(){var e=this.get("session.token"),t=this.get("session.siteId"),s=t?"hop-".concat(e,"-").concat(t):"hop-".concat(e)
this.removeItemLS("hop",s,!1)},onDidBlur:function(){var e=this.get("hotline.ui")
e&&(Ember.set(e,"focussed",!1),Ember.$(window).trigger("window:blurred"))},onDidFocus:function(){var e=this.get("hotline.ui")
e&&(Ember.set(e,"focussed",!0),Ember.$(window).trigger("window:focussed"))},onOnline:function(){var e=this.get("hotline.ui")
e&&(Ember.set(e,"onLine",!0),Ember.$(window).trigger("window:online"))},onOffline:function(){var e=this.get("hotline.ui")
e&&(Ember.set(e,"onLine",!1),Ember.$(window).trigger("window:offline"))}})
e.default=s}),define("hotline-web/models/agent",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.Model.extend({name:s("string"),email:s("string"),type:s("number"),alias:s("string"),roleId:s("number"),profilePicThumbUrl:s("string"),profilePicUrl:s("string"),firstName:s("string"),lastName:s("string"),title:s("string"),bio:s("string"),socialInfo:s(),displayName:Ember.computed("firstName","lastName",{get:function(){var e=this.get("firstName")?this.get("firstName"):"",t=this.get("lastName")?this.get("lastName"):""
if(e||t)return e+" "+t}})})
e.default=n}),define("hotline-web/models/article",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.Model.extend({appId:t.default.attr("number"),articleId:t.default.attr("number"),categoryId:t.default.attr("number"),content:t.default.attr("string"),deleted:t.default.attr("boolean"),downvotesAndroid:t.default.attr("number"),downvotesIos:t.default.attr("number"),enabled:t.default.attr("boolean"),fdimported:t.default.attr("boolean"),lastUpdatedAt:t.default.attr("date"),platforms:t.default.attr(),position:t.default.attr("number"),tags:t.default.attr(),title:t.default.attr("string"),upvotesAndroid:t.default.attr("number"),upvotesIos:t.default.attr("number"),userId:t.default.attr("number")})
e.default=s}),define("hotline-web/models/category",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.Model.extend({categoryId:t.default.attr("number"),deleted:t.default.attr("boolean"),title:t.default.attr("string"),description:t.default.attr("string"),position:t.default.attr("number"),enabled:t.default.attr("boolean"),fdimported:t.default.attr("boolean"),appId:t.default.attr("number"),userId:t.default.attr("number"),lastUpdatedAt:t.default.attr("date"),platforms:t.default.attr(),tags:t.default.attr(),articles:t.default.hasMany("article"),icon:t.default.attr("string")})
e.default=s}),define("hotline-web/models/channel-response-time",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.hasMany,n=t.default.Model.extend({channelResponseTime:s("responseTime")})
e.default=n}),define("hotline-web/models/channel",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.Model.extend({appId:s("number"),channelId:s("number"),name:s("string"),defaultChannel:s("boolean"),created:s("date"),updated:s("date"),hidden:s("boolean"),position:s("number"),type:s("string",{defaultValue:"BOTH"}),groupId:s("number"),welcomeMessage:t.default.belongsTo("messages")})
e.default=n}),define("hotline-web/models/color-config",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.Model.extend({backgroundColor:s("string"),foregroundColor:s("string")})
e.default=n}),define("hotline-web/models/config",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.belongsTo,a=t.default.Model.extend({headerProperty:n("colorConfig"),bodyProperty:n("colorConfig"),userMessageProperty:n("colorConfig"),agentMessageProperty:n("colorConfig"),iconUrl:s("string"),backgroundImage:s("string"),customBackground:s("boolean"),appId:s("number"),appName:s("string"),configId:s("number"),createdMillis:s("date"),updatedMillis:s("date")})
e.default=a}),define("hotline-web/models/conversation",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.belongsTo,a=t.default.hasMany,i=t.default.Model.extend({appId:s("number"),assignedTo:s("number"),channelId:s("number"),conversationHostUserId:s("number"),conversationHostUserName:s("string"),conversationId:s("number"),createdMillis:s("number"),deleted:s("boolean"),lastMessageApi:s("number"),messages:a("message"),repliedTo:s("boolean"),status:s("number"),unreadByWebUser:s("boolean"),updateTime:s("string"),updatedMillis:s("number"),readMillis:s("number"),markedReadMillis:s("number",{defaultValue:null}),readByAgents:a("identifier"),uiStatus:s("string"),hasPendingCsat:s("boolean"),csat:n("csat")})
e.default=i}),define("hotline-web/models/csat-values",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.Model.extend({star:s("number"),comment:s("string"),validations:{}})
e.default=n}),define("hotline-web/models/csat",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.Model.extend({appId:s("number"),created:s("number"),createdByUserId:s("number"),csatId:s("number"),disabled:s("boolean"),lastUpdatedByUserId:s("number"),mandatory:s("boolean"),minimumAgentInteractions:s("number"),mobileUserCommentsAllowed:s("boolean"),question:s("string"),updated:s("number"),initiated:s("number")})
e.default=n}),define("hotline-web/models/datastore",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.belongsTo,a=t.default.hasMany,i=t.default.Model.extend({appId:s("number"),conversations:a("conversation"),properties:n("properties"),externalId:s("string"),messageAfter:s("number"),updatedAt:s("number"),userBehaviour:n("userBehaviour"),alias:s("string"),wcfcToken:s("string"),seq:s(),meta:s(),dsFaq:n("dsFaq")})
e.default=i}),define("hotline-web/models/days",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.Model.extend({day:s("number"),hour:s("string")})
e.default=n}),define("hotline-web/models/ds-article",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.Model.extend({appId:t.default.attr("number"),articleId:t.default.attr("number"),categoryId:t.default.attr("number"),content:t.default.attr("string"),deleted:t.default.attr("boolean"),downvotesAndroid:t.default.attr("number"),downvotesIos:t.default.attr("number"),enabled:t.default.attr("boolean"),fdimported:t.default.attr("boolean"),lastUpdatedAt:t.default.attr("date"),platforms:t.default.attr(),position:t.default.attr("number"),tags:t.default.attr(),title:t.default.attr("string"),upvotesAndroid:t.default.attr("number"),upvotesIos:t.default.attr("number"),userId:t.default.attr("number")})
e.default=s}),define("hotline-web/models/ds-category",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.Model.extend({categoryId:t.default.attr("number"),deleted:t.default.attr("boolean"),title:t.default.attr("string"),description:t.default.attr("string"),position:t.default.attr("number"),enabled:t.default.attr("boolean"),fdimported:t.default.attr("boolean"),appId:t.default.attr("number"),userId:t.default.attr("number"),lastUpdatedAt:t.default.attr("date"),platforms:t.default.attr(),tags:t.default.attr(),dsArticles:t.default.hasMany("dsArticle"),icon:t.default.attr("string")})
e.default=s}),define("hotline-web/models/ds-faq",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.Model.extend({dsCategories:t.default.hasMany("dsCategory"),contentLocale:s(),lastModifiedAt:s("number"),status:s("number")})
e.default=n}),define("hotline-web/models/event-condition",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.Model.extend({eventConditionId:s("number"),eventName:s("string"),occurrenceCount:s("number"),firstOccurredMillis:s("number"),lastOccurredMillis:s("number")})
e.default=n}),define("hotline-web/models/event-property",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.Model.extend({key:s("string"),value:s("string")})
e.default=n}),define("hotline-web/models/event",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.hasMany,a=t.default.Model.extend({createdMillis:s("number"),name:s("string"),eventProperties:n("eventProperty")})
e.default=a}),define("hotline-web/models/executed-rule",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.Model.extend({ruleId:s("number"),sentCount:s("number"),sentCountSession:s("number"),openedCount:s("number")})
e.default=n}),define("hotline-web/models/faq",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.Model.extend({categories:t.default.hasMany("category"),contentLocale:s(),lastModifiedAt:s("number"),status:s("number")})
e.default=n}),define("hotline-web/models/faqs",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.Model.extend({categories:t.default.hasMany("faq")})
e.default=s}),define("hotline-web/models/geolocation",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.Model.extend({country:s("string"),city:s("string")})
e.default=n})
define("hotline-web/models/heartbeat",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.Model.extend({seen:t.default.attr("number")})
e.default=s}),define("hotline-web/models/identifier",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.Model.extend({identifier:s("number")})
e.default=n}),define("hotline-web/models/message",["exports","ember-data","hotline-web/utils/constants"],function(e,t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var n=t.default.attr,a=t.default.Model.extend({appId:n("number"),bytes:n("number"),createdMillis:n("number"),durationInSecs:n("number"),deeplinkId:n("number"),conversationId:n("number"),channelId:n("number"),marketingId:n("number"),messageId:n("number"),messageType:n("number"),messageUserId:n("number"),messageUserAlias:n("string"),messageUserName:n("string"),messageUserProfilePic:n("string"),userFirstName:n("string"),userLastName:n("string"),messageUserFirstName:Ember.computed("messageUserName","userFirstName",{get:function(){return s.default.CONVERSATION.MESSAGE_TYPE.BOT===this.get("messageType")?this.get("messageUserName"):this.get("userFirstName")?this.get("userFirstName"):this.get("messageUserName")?this.get("messageUserName").split(" ")[0]:""}}),messageUserType:n("number"),messageFragments:n(),location:n("string"),read:n("boolean"),readByUser:n("boolean"),source:n("number"),text:n("string"),status:n("number"),msgHopId:n("string"),articleId:n("number"),categoryId:n("number"),ruleId:n("number"),autoRuleId:n("number"),autoRuleRead:n("boolean"),manualCampaignRead:n("boolean"),needsUpdation:n("boolean"),title:n("string"),hasBeenRepliedTo:n("boolean"),isResponseForBot:n("boolean"),delivered:n("boolean"),isNotAuthenticated:n("boolean")})
e.default=a}),define("hotline-web/models/messages",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.Model.extend({appId:s("number"),bytes:s("number"),createdMillis:s("number"),durationInSecs:s("number"),deeplinkId:s("number"),conversationId:s("number"),marketingId:s("number"),messageId:s("number"),messageType:s("number"),messageUserId:s("number"),messageUserName:s("string"),messageUserAlias:s("string"),messageActionUrl:s("string"),messageActionLabel:s("string"),messageUserType:s("number"),picBytes:s("number"),picHeight:s("number"),picId:s("number"),picThumbBytes:s("number"),picThumbHeight:s("number"),picThumbWidth:s("number"),picUrl:s("string"),picThumbUrl:s("string"),picWidth:s("number"),read:s("boolean"),readByUser:s("boolean"),source:s("number"),text:s("string"),msgHopId:s("string")})
e.default=n}),define("hotline-web/models/operating-hours",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.belongsTo,a=t.default.Model.extend({appId:s("number"),awayMessage:s("string"),created:s("number"),days:n("days"),enabled:s("boolean"),operatingHoursId:s("number"),timezone:s("string"),working:n("working"),workingDaily:s("boolean")})
e.default=a}),define("hotline-web/models/participant",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.hasMany,a=t.default.Model.extend({appId:s("number"),clientType:s("number"),clientVersionCode:s("number"),createdMillis:s("number"),email:s("string"),agentId:s("number"),name:s("string"),notificationId:s("string"),notificationType:s("number"),type:s("number"),updatedMillis:s("number"),roleId:s("number"),groups:n("identifier")})
e.default=a}),define("hotline-web/models/pic-file",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.Model.extend({dataUrl:s("string")})
e.default=n}),define("hotline-web/models/properties",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.Model.extend({name:Ember.computed("firstName","lastName",{get:function(){var e=Ember.get(this,"firstName"),t=Ember.get(this,"lastName")
return e?t?"".concat(e," ").concat(t).trim():e.trim():"Unknown"}}),firstName:s("string"),lastName:s("string"),nameChanged:s("boolean"),email:s("string"),phone:s("string"),phoneCountry:s("string"),locale:s("string")})
e.default=n}),define("hotline-web/models/response-time",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.Model.extend({responseTime:s("string")})
e.default=n}),define("hotline-web/models/response",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.Model.extend({success:s("boolean")})
e.default=n}),define("hotline-web/models/rts-token",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.Model.extend({accountId:s("string"),channelName:s("string")})
e.default=n}),define("hotline-web/models/rule-command-value",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.Model.extend({channelId:s("number"),agentId:s("number"),message:s(),link:s("string"),picUrl:s("string")})
e.default=n}),define("hotline-web/models/rule-command",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.Model.extend({commandType:s("string"),commandValue:t.default.belongsTo("ruleCommandValue")})
e.default=n}),define("hotline-web/models/rule-condition",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.Model.extend({conditionId:s("number"),conditionType:s("string"),dataType:s("string"),key:s("string"),value:s("string")})
e.default=n}),define("hotline-web/models/rule-event-condition",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.Model.extend({segmentId:s("number"),eventConditionId:s("number"),eventName:s("string"),occurrenceConditions:t.default.hasMany("ruleCondition"),propertyConditions:t.default.hasMany("ruleCondition")})
e.default=n}),define("hotline-web/models/rule-segment",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.Model.extend({ruleId:s("number"),segmentId:s("number"),conditionMatchType:s("string"),userConditions:t.default.hasMany("ruleCondition"),eventConditions:t.default.hasMany("ruleEventCondition")})
e.default=n}),define("hotline-web/models/rule",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.Model.extend({appId:s("number"),ruleId:s("number"),enabled:s("boolean"),ruleName:s("string"),ruleDescription:s("string"),ruleType:s("string"),isScheduled:s("boolean"),sendAt:s("string"),triggerType:s("string"),segment:t.default.belongsTo("segment"),command:t.default.belongsTo("ruleCommand"),created:s("date"),updated:s("date")})
e.default=n}),define("hotline-web/models/user-behaviour",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.hasMany,a=t.default.Model.extend({locations:n("userLocation"),events:n("event"),eventConditions:n("eventCondition"),firstLocationMillis:s("number"),lastLocationMillis:s("number"),visitsCount:s("number"),viewsCount:s("number"),executedRules:n("executedRule"),hasLocationRule:s("boolean"),locationRuleFetchMillis:s("number"),userGeolocation:s()})
e.default=a}),define("hotline-web/models/user-location",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.Model.extend({pageUrl:s("string"),viewCount:s("number")})
e.default=n}),define("hotline-web/models/widget-info",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.Model.extend({channelResponse:s(),operatingHoursResponse:s(),responseTimeHolder:s(),userRules:s(),webChatConfig:s(),requestsWhiteListedDomains:s()})
e.default=n}),define("hotline-web/models/working",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.Model.extend({day:s("number"),enabled:s("boolean")})
e.default=n}),define("hotline-web/resolver",["exports","ember-resolver"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default
e.default=s}),define("hotline-web/router",["exports","hotline-web/config/environment"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=Ember.Router.extend({location:t.default.locationType})
s.map(function(){this.route("channels",{path:"/channels"},function(){this.route("channel",{path:"/:channelId"})}),this.route("faqs",{path:"/faqs"}),this.route("widget",{path:"/widget",queryParams:["token","referrer"]}),this.route("access-denied",{path:"/error/403"},function(){}),this.route("503",{path:"/error/503"},function(){}),this.route("404",{path:"*path"})})
var n=s
e.default=n}),define("hotline-web/routes/404",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.Route.extend({templateName:"error/404"})
e.default=t}),define("hotline-web/routes/503",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.Route.extend({templateName:"error/503"})
e.default=t}),define("hotline-web/routes/access-denied",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.Route.extend({templateName:"error/access-denied"})
e.default=t}),define("hotline-web/routes/application",["exports","hotline-web/mixins/message","hotline-web/mixins/localstorage"],function(e,t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var n=Ember.Route.extend(t.default,s.default,{router:Ember.inject.service(),beforeModel:function(e){var t=this.get("session.token"),s=this.get("session.siteId"),n=s?"hop-".concat(t,"-").concat(s):"hop-".concat(t)
!this.getItemLS("hop",n)&&t&&this.setItemLS("hop",this.get("hotline.ui.hop"),n,!1),Ember.set(this,"transition",e)},afterModel:function(){var e=this.routeName,t=this.get("transition"),s=t&&t.targetName,n=this.get("session"),a=n&&n.token,i=n&&n.referrer
s&&-1!==s.indexOf(e)&&(a&&i||this.unauthorizedRoute(t)),"application"===e&&"index"===s&&this.unauthorizedRoute(t)},unauthorizedRoute:function(e){e.abort(),this.replaceWith("access-denied")}})
e.default=n}),define("hotline-web/routes/channels",["exports","hotline-web/routes/application","hotline-web/utils/constants","hotline-web/utils/utils","hotline-web/mixins/activity","hotline-web/mixins/window-listener-mixin","hotline-web/mixins/datastore","hotline-web/mixins/message","hotline-web/mixins/subscription","hotline-web/mixins/article-load","hotline-web/mixins/conversation-load","hotline-web/mixins/locale","hotline-web/mixins/data-dog-mixin","hotline-web/mixins/user-reset","hotline-web/mixins/jwt","moment","hotline-web/helpers/polling"],function(e,t,s,n,a,i,o,r,l,u,c,d,m,h,f,g,p){function b(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var v=s.default.CONVERSATION.MESSAGE_TYPE.IMAGE,E=t.default.extend(a.default,i.default,o.default,r.default,l.default,c.default,u.default,m.default,d.default,h.default,f.default,{ruleEngine:Ember.inject.service(),notification:Ember.inject.service(),fetchFaqs:!1,model:function(){var e=s.default.EmberModelUrl,t=Ember.get(this,"session"),n=Ember.get(this,"lfds"),a=t&&t.user,i=t&&t.siteId,o=t&&t.token,r=n.get("messageAfter")||t&&t.didMessage,l=Ember.get(this,"hotline.ui"),u=l&&l.userBehaviour,c=l&&l.channels,d=l&&l.hours,m=u&&u.eventRules,h=l&&l.rspTime,f=e.conversations,g=f.url.replace("{token}",o).replace("{userAlias}",a.alias),p={src:s.default.CONVERSATION.FETCH.CHANNELS_LOADED}
return r&&(p.messageAfter=r),i&&(g+="?siteId=".concat(i)),Ember.RSVP.hash({channels:c,hours:d,rspTime:h,eventRules:m,conversations:a.alias?this.store.getRequest(f.model,g,p):[]})},afterModel:function(e){this.bindNetworkEvents(),e&&(this.setupModel(e),this.getAgentsInformationForRules(e)),this._super()},getAgentsInformationForRules:function(e){var t=e&&e.eventRules
if(t&&t.length>0)for(var s=t.length-1;s>=0;s--){var n=t[s]
n.agent&&this.get("store").pushPayload("agent",{agent:n.agent})}},setupModel:function(e){this.postModel(e),this.loadFAQS()},postModel:function(e){var t,s=Ember.get(this,"hotline.ui")
e.hours&&(e.hours.operatingHours&&(e.hours.operatingHours.clientTimeInMillis=(new Date).getTime()),Ember.set(s,"hours",e.hours),this.processOperatingHours(),this.get("pollster")||((t=p.default.create({onPoll:this.processOperatingHours.bind(this),interval:6e4})).start(),this.set("pollster",t))),e.rspTime&&Ember.set(s,"rspTime",e.rspTime),Ember.set(s,"userBehaviour",{eventRules:e.eventRules}),e.conversations&&this.loadConversation(e.conversations.conversations),-1!==this.get("transition.targetName").indexOf("channels.index")&&this.openChannel(),this.connectSocket(),this.get("isJWTStrictMode")&&this.jwt.on("didAuthenticateUser",Ember.get(this,"didAuthUserCB")),s.dsLoaded||(Ember.set(s,"dsLoaded",!0),this.postMessage({action:"datastore_loaded"}))},didAuthUserCB:Ember.computed({get:function(){return this.didAuthenticateUser.bind(this)}}),didAuthenticateUser:function(){this.jwt.auth.expired?this.disconnectSocket(!1):this.jwt.auth.user&&this.connectSocket()},processOperatingHours:function(){var e=this.get("hotline.ui.hours"),t=e&&e.operatingHours
Ember.set(this.get("hotline.ui"),"awayMessage",[])
for(var s=0,n=t.length;s<n;s++){var a=t[s],i=(new Date).getTime(),o=void 0,r=void 0,l=void 0,u=!0,c=void 0
if(Ember.set(a,"clientTimeInMillis",(new Date).getTime()),a)if(a.enabled)if(o=i-a.clientTimeInMillis,l=((r=g.default.tz(a.serverTimeInMillis+o,a.timezone.replace(" - ","/"))).day()+6)%7,"true"!==a.working[l])u=!0
else for(var d=0,m=(c=this.workingHours(a.days[l])).length;d<m;d++){var h=c[d],f=parseInt(h[0],10),p=parseInt(h[1],10),b=r.clone().startOf("day").add(f,"s"),v=r.clone().startOf("day").add(p,"s")
if(r.isAfter(b)&&r.isBefore(v)){u=!1
break}}else u=!1
else u=!1
var E={operatingHoursId:a.operatingHoursId,awayMessage:u?a.awayMessage:"",defaultBhr:a.defaultBhr,enabled:a.enabled}
this.get("hotline.ui.awayMessage").push(E)}},workingHours:function(e){return e.substr(0,e.length-1).split(";").reduce(function(e,t,s){var n=Math.floor(s/2)
return e[n]=[].concat(e[n]||[],t),e},[])},onAdvicePullCB:Ember.computed({get:function(){return this.onAdvicePull.bind(this)}}),onMessageCB:Ember.computed({get:function(){return this.onMessage.bind(this)}}),disconnectSocket:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0]
!this.rts.connection||this.rts.connecting||this.rts.reconnecting||(this.rts.off("didUserMessage",Ember.get(this,"onMessageCB")),this.rts.off("didAdvicePull",Ember.get(this,"onAdvicePullCB")),e&&this.rts.connection.destroy(),this.rts.close())},connectSocket:function(){if(this.rts.connection||this.rts.connecting||this.rts.reconnecting||!Ember.get(this,"session.user.id")){if(this.rts.connection&&this.rts.didDisconnect&&!this.rts.connecting&&!this.rts.reconnecting&&Ember.get(this,"session.user.id")){var e=s.default.DataDog.events.connectionDropped
this.increment({evt:e,tags:b({},e.tags.dropStatus.key,e.tags.dropStatus.value.connection_retried)}),this.rts.close(),this.rts.create()}}else this.rts.on("didUserMessage",Ember.get(this,"onMessageCB")),this.rts.on("didAdvicePull",Ember.get(this,"onAdvicePullCB")),this.rts.create()},sessionUserObserver:function(){this.get("session.user.id")?this.connectSocket():this.disconnectSocket()}.observes("session.user.id"),onMessage:function(e,t,a){var i,o,r=this.get("hotline.ui"),l=this.get("session"),u=l&&l.config,c=u&&u.agent,d=c&&c.hideName,m=l&&l.appDisplayName||l.appName,h=this.get("store"),f=this.get("lfds"),g=f.get("seq"),p=this.get("conversations"),b=this.get("displayChannels"),E=e&&e.type,y=e&&e.conversation,w=y&&y.messages&&y.messages.length&&y.messages[0],_=y&&y.channelId,T=p.findBy("channelId",_),M=n.default.findObjectByValueProperty(b,_,"channelId")
if(w&&w.messageType===s.default.CONVERSATION.MESSAGE_TYPE.SCREEN_SHARING.ENDED&&window.parent&&this.postMessage({event_id:"cobrowsingStop"}),this.get("isJWTStrictMode")){if(this.jwt.auth.expiredAt||this.jwt.auth.scheduled||this.jwt.auth.expired)return void this.disconnectSocket(!1)
if(this.isJwtExpired())return this.disconnectSocket(!1),void this.initiateSendingMode()}if((this.send("ackMessageInRTS",w,t),"MESSAGE_RECEIVED"===E)&&(o=(w&&w.messageUserType)===s.default.CONVERSATION.USER_TYPE.USER?"message_from_user":"message_from_agent",w)){var I=w.messageUserName
s.default.CONVERSATION.MESSAGE_TYPE.BOT!==w.messageType&&(I=d||!I?m:I.split(" ")[0]),this.postMessage({action:o,data:{message:{messageFragments:w.messageFragments,messageUserName:I,appName:m,createdMillis:w.createdMillis}}})}if(1===a||0===g.id||a===g.id+1){if("MESSAGE_RECEIVED"===E||"COBOROWSING_STATUS_UPDATED"===E){if(y){var S,x,A,C,O=w&&w.messageId,N=w&&w.marketingId,j=w&&w.msgHopId,k=w&&w.messageUserType,P=T&&T.get("messages"),R=this.get("notification")
if(-1!==v.indexOf(w.messageType)&&n.default.resizeImage(w),_&&Ember.set(w,"channelId",_),Ember.set(w,"delivered",!0),P)if(S=O&&P.findBy("messageId",O)||N&&P.findBy("marketingId",N)||j&&P.findBy("msgHopId",j),w&&w.ruleId&&0!==w.messageUserType&&(x=(C=(A=P.filter(function(e){return e.get("autoRuleId")===w.ruleId&&0!==e.get("messageUserType")&&e.get("needsUpdation")}))&&A.length)?A[C-1]:null),S)"COBOROWSING_STATUS_UPDATED"===E?S.set("messageType",w.messageType):h.cloneRecord(S,w),this.logger.log("Updating Message")
else if(x){Ember.set(x,"messageUserAlias",w.messageUserAlias),h.cloneRecord(x,w),x.set("needsUpdation",!1)
for(var U=0;U<C-1;U++)A[U].set("needsUpdation",!1)
this.logger.log("Updated automessage")}else P.pushObject(h.createRecord("message",w)),this.logger.log("Adding Message")
else{var D,L=Ember.A([])
if(L.pushObject(h.createRecord("message",w)),D=h.createRecord("conversation",{conversationId:y.conversationId,channelId:y.channelId,messages:L}),p)p.pushObject(D)
else{var F=Ember.A([])
F.pushObject(D),f.set("conversations",F)}}i=w.createdMillis,f.set("messageAfter",i),this.send("save",M&&!S),M&&(k&&!w.ruleId?(r.lastAgentMessage&&r.lastAgentMessage.channelId===w.channelId?Ember.setProperties(r,{lastAgentMessage:w,lockAgentMessage:!0}):r.lockAgentMessage||Ember.setProperties(r,{lastAgentMessage:w,lockAgentMessage:void 0}),Ember.run.later(function(){R.playSound()},0)):r.lockAgentMessage||Ember.setProperties(r,{lastAgentMessage:void 0,lockAgentMessage:void 0}))}}else"CONVERSATION_RESOLVED"===E&&y.hasPendingCsat?(T.set("csat",h.createRecord("csat",y.csat)),T.set("hasPendingCsat",y.hasPendingCsat),this.send("save")):"CSAT_RESPONSE_RECEIVED"===E?T.get("csat")&&(Ember.set(T,"hasPendingCsat",!1),this.send("save")):"GDPR_USER_DELETED"===E&&this.deleteUser()
f.set("seq",{id:a,millis:i}),this.send("save")}else this.populateConversation(s.default.CONVERSATION.FETCH.RTS_SEQ_ID_MISMATCH,null,g.millis)},onAdvicePull:function(e){var t=e&&e.src
if(t===s.default.CONVERSATION.FETCH.RTS_ADVICE_PULL){var n=s.default.DataDog.events.advicePull
this.increment({evt:n,tags:b({},n.tags.pullStatus.key,n.tags.pullStatus.value.called)})}var a=this.get("router").currentRouteName,i=a&&"faqs"!==a
this.populateConversation(t,e.channel&&i?this.openChannel:null,e&&e.reset?0:null)},openChannel:function(){var e=this.get("displayChannels"),t=e&&e.length
t&&1===t&&(this.get("transition").abort(),this.replaceWith("channels.channel",e[0].channelId))},populateConversation:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=s.default.EmberModelUrl.conversations,o=this.get("session"),r=o&&o.user,l=i.url.replace("{token}",o.token).replace("{userAlias}",r.alias),u=o&&o.siteId,c=null!==a?a:o&&o.didMessage,d=t?{src:t}:{src:s.default.CONVERSATION.FETCH.DEFAULT}
c&&(d.messageAfter=c),u&&(l+="?siteId=".concat(u)),this.store.getRequest(i.model,l,d).then(function(i){var o=i&&i.errorCode,r=e.get("hotline.ui"),l=t===s.default.CONVERSATION.FETCH.RTS_ADVICE_PULL,u=s.default.DataDog.events.advicePull
if(r&&r.helpNote&&Ember.set(r,"helpNote",void 0),o)l&&e.increment({evt:u,tags:b({},u.tags.pullStatus.key,u.tags.pullStatus.value.readError)})
else{l&&e.increment({evt:u,tags:b({},u.tags.pullStatus.key,u.tags.pullStatus.value.read)})
var c=e.get("conversations"),d=[]
if(0===a&&c){c.forEach(function(e){var t=[]
if(e.get("messages").forEach(function(e){0===e.get("messageUserType")&&e.get("status")===s.default.MESSAGE_STATUS.PENDING&&t.push(e)}),t.length){var n=e.serialize()
e.messages=t,d.push(n)}})
var m=i&&i.conversations
m&&m.forEach(function(e){var t=c.findBy("channelId",e.channelId)
c.removeObject(t)}),e.send("save",!1)}e.loadConversation(i.conversations||[]),e.loadConversation(d)}n&&n.call(e)})},actions:{restoreConversation:function(){this.populateConversation(s.default.CONVERSATION.FETCH.CONVERSATION_RESTORED,this.openChannel)},updateChannels:function(){var e=this,t=s.default.EmberModelUrl.channels,n=this.get("currentLocale"),a=this.get("session.token")
this.store.getRequest(t.model,t.url.replace("{token}",a).replace("{locale}",n)).then(function(t){Ember.set(e.currentModel,"channels",t.channels),e.populateConversation(s.default.CONVERSATION.FETCH.CONVERSATION_RELOADED,e.openChannel)})},gotoFAQ:function(e,t){var s=this.get("hotline.ui")
Ember.set(s,"modal",e),this.transitionTo("faqs",{queryParams:{isDeepLinkFAQ:!0,fromChannelId:t}})}}})
e.default=E}),define("hotline-web/routes/channels/channel",["exports","hotline-web/routes/application"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.extend({model:function(e){return{channelId:e.channelId}},afterModel:function(e){var t=this.getParentRouteName(),s=t?this.modelFor(t):null
s&&(e.channels=s.channels,e.operatingHours=s.hours),this._super()}})
e.default=s}),define("hotline-web/routes/faqs",["exports","hotline-web/routes/application","hotline-web/mixins/datastore","hotline-web/mixins/data-dog-mixin","hotline-web/mixins/conversation-load","hotline-web/mixins/faq"],function(e,t,s,n,a,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var o=t.default.extend(s.default,n.default,a.default,i.default,{queryParams:{isDeepLinkFAQ:{refreshModel:!1}},model:function(){return this.get("lfds.dsFaq")?Ember.Object.create({status:304}):this.fetchFaqData()},afterModel:function(e,t){e=this.buildFaqDataObject(e)
var s=t.queryParams
s&&s.isDeepLinkFAQ&&JSON.parse(s.isDeepLinkFAQ)?(Ember.set(e,"isDeepLinkFAQ",!0),s.fromChannelId&&Ember.set(e,"fromChannelId",s.fromChannelId)):Ember.set(this.get("hotline.ui"),"modal",void 0)
var n=e.get("contentLocale.direction")
return n&&document.body.setAttribute("dir",n),e},actions:{gotoChannel:function(){var e=this.get("displayChannels"),t=e&&e.length
if(t&&1===t&&this.replaceWith("channels.channel",e[0].channelId),t&&t>1){var s=this.modelFor(this.routeName)
s&&s.fromChannelId?this.replaceWith("channels.channel",s.fromChannelId):this.replaceWith("channels")}}}})
e.default=o})
define("hotline-web/routes/widget",["exports","hotline-web/utils/constants","hotline-web/mixins/datastore","hotline-web/mixins/data-dog-mixin","hotline-web/mixins/conversation-load","hotline-web/routes/application","hotline-web/mixins/message"],function(e,t,s,n,a,i,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var r=i.default.extend(s.default,a.default,n.default,o.default,{model:function(e,s){var n=s.queryParams.token&&s.queryParams.token.trim(),a=s.queryParams.referrer,i=t.default.EmberModelUrl.config,o=i.url.replace("{token}",n).replace("{domainName}",a),r=Ember.get(this,"session")
return n&&n.toUpperCase()===t.default.SAMPLE_TOKEN?null:n&&a&&r?(Ember.set(r,"token",n),Ember.set(r,"referrer",a),Ember.set(r,"config",{}),this.store.getRequest(i.model,o)):null},afterModel:function(e){var t=Ember.get(this,"session"),s=Ember.get(this,"hotlineUI"),n=e&&e.appId,a=e&&e.appName,i=e&&e.userAuthConfig
e&&(this.jwt.enable(i&&i.jwtAuthEnabled||!1),this.jwt.strict(i&&i.strictModeEnabled||!1),this.jwt.isEnabled&&(this.jwt.auth.timeoutInterval=i&&i.authTimeOutInterval),Ember.set(s,"config",e),this.setTag({key:"accountId",value:e.accountId}),Ember.set(t,"appId",n),Ember.set(t,"appName",a),Ember.set(t,"appDisplayName",a))}})
e.default=r}),define("hotline-web/sanitizer/strict",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default={elements:["h1","h2","a","b","i","u"],attributes:{a:["href","target"]}}}),define("hotline-web/serializers/agent",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.RESTSerializer.extend(t.default.EmbeddedRecordsMixin,{primaryKey:"alias"})
e.default=s}),define("hotline-web/serializers/application",["exports","ember-data","hotline-web/mixins/payload"],function(e,t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var n=t.default.RESTSerializer.extend(t.default.EmbeddedRecordsMixin,s.default,{attrs:{}})
e.default=n}),define("hotline-web/serializers/article",["exports","hotline-web/serializers/application"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.extend({primaryKey:"articleId"})
e.default=s}),define("hotline-web/serializers/category",["exports","hotline-web/serializers/application"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.extend({primaryKey:"categoryId",attrs:{articles:{embedded:"always"}}})
e.default=s}),define("hotline-web/serializers/conversation",["exports","ember-data","hotline-web/serializers/datastore"],function(e,t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var n=s.default.extend(t.default.EmbeddedRecordsMixin,{attrs:{messages:{embedded:"always"},csat:{embedded:"always"}}})
e.default=n}),define("hotline-web/serializers/datastore",["exports","ember-data","ember-localforage-adapter/serializers/localforage"],function(e,t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var n=s.default.extend(t.default.EmbeddedRecordsMixin,{attrs:{conversations:{embedded:"always"},properties:{embedded:"always"},userBehaviour:{embedded:"always"},dsFaq:{embedded:"always"}}})
e.default=n}),define("hotline-web/serializers/ds-article",["exports","ember-data","hotline-web/serializers/datastore"],function(e,t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var n=s.default.extend(t.default.EmbeddedRecordsMixin,{attrs:{}})
e.default=n}),define("hotline-web/serializers/ds-category",["exports","ember-data","hotline-web/serializers/datastore"],function(e,t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var n=s.default.extend(t.default.EmbeddedRecordsMixin,{attrs:{dsArticles:{embedded:"always"}}})
e.default=n}),define("hotline-web/serializers/ds-faq",["exports","ember-data","hotline-web/serializers/datastore"],function(e,t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var n=s.default.extend(t.default.EmbeddedRecordsMixin,{attrs:{dsCategories:{embedded:"always"}}})
e.default=n}),define("hotline-web/serializers/event",["exports","ember-data","ember-localforage-adapter/serializers/localforage"],function(e,t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var n=s.default.extend(t.default.EmbeddedRecordsMixin,{attrs:{eventProperties:{embedded:"always"}}})
e.default=n}),define("hotline-web/serializers/faq",["exports","hotline-web/serializers/application"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.extend({attrs:{categories:{embedded:"always"}}})
e.default=s}),define("hotline-web/serializers/localforage",["exports","ember-localforage-adapter/serializers/localforage"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default
e.default=s}),define("hotline-web/serializers/user-behaviour",["exports","ember-data","ember-localforage-adapter/serializers/localforage"],function(e,t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var n=s.default.extend(t.default.EmbeddedRecordsMixin,{attrs:{locations:{embedded:"always"},events:{embedded:"always"},eventConditions:{embedded:"always"},executedRules:{embedded:"always"}}})
e.default=n}),define("hotline-web/services/agent",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.Service.extend({store:Ember.inject.service(),getAgentInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:""
return!Ember.isBlank(e)&&this.get("store").findRecord("agent",e.toString())}})
e.default=t}),define("hotline-web/services/ajax",["exports","ember-ajax/services/ajax"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hotline-web/services/batch",["exports","hotline-web/utils/constants","hotline-web/mixins/transaction-mixin"],function(e,t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var n=t.default.Batch.errors,a=Ember.Service.extend(Ember.Evented,s.default,{init:function(){this._transactions=[],this._interval=3e4,this._timer=null,this._size=200,this._runner=null,this._runnerCB=null,this._types=[t.default.Batch.transactions.types.dd.id,t.default.Batch.transactions.types.events.id],this._registers()},_registers:function(){this._timer=setInterval(this.execute.bind(this),this._interval),Ember.$(window).on("beforeunload",this._deregisters.bind(this))},_deregisters:function(){var e=this
!1===this.paused()&&this._types.forEach(function(t){return e.processTransaction(t)}),this._timer&&clearInterval(this._timer),Ember.$(window).off("beforeunload")},enter:function(e){var t=this
return new Ember.RSVP.Promise(function(s,a){var i=e&&e.type,o=e&&e.payload
if(t.isValid(i)&&o){var r=t.paused(),l=function(){this.push(i,o),s()}
r?r.then(l.bind(t)):l.call(t)}else a(n.ERR_TRANS_INVALID)})},push:function(e,t){var s=e&&e.id
this._transactions[s]||(this._transactions[s]=[]),2!==s||t.occTime||(t.occTime=(new Date).getTime()),this._transactions[s].push(t)},execute:function(){var e=this
this._runner=new Ember.RSVP.Promise(function(t,s){e._runnerCB=function(e){e?t():s()}}),this.run().then(function(){e._runnerCB&&"function"==typeof e._runnerCB&&(e._runnerCB(!0),e._runnerCB=void 0,e._runner=void 0)})},run:function(){var e=this
return new Ember.RSVP.Promise(function(t){e._types.forEach(function(t){return e.processTransaction(t)}),t()})},paused:function(){return!!this._runner&&this._runner},isValid:function(e){var t=e&&e.id
return!(!t||!this._types.includes(t))}})
e.default=a}),define("hotline-web/services/cache",["exports"],function(e){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=Ember.Service.extend({init:function(){this._cache={}},encache:function(e,s){void 0===this._cache[e]&&(this._cache[e]=[]),"object"===t(s)?this._cache[e].push(s):this._cache[e].addObject(s)},clearAll:function(){this._cache={}},clear:function(e){this._cache[e]=void 0},decache:function(e){var t=this._cache[e]
return this.clear(e),t},findBy:function(e,t){return this._cache[e]?this._cache[e].findBy("action",t):null}})
e.default=s}),define("hotline-web/services/flash",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.Service.extend({init:function(){this.set("message","")},showMessage:function(e){var t=this
this.set("message",e),setTimeout(function(){t.set("message",void 0)},4e3)}})
e.default=t}),define("hotline-web/services/hotline",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t,s,n=Ember.Service.extend({isMobile:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},isIOS:function(){return/iPhone|iPad|iPod/i.test(navigator.userAgent)},isIPhone:function(){return/iPhone/i.test(navigator.userAgent)},isAndroid:function(){return/Android/i.test(navigator.userAgent)},init:function(){this._super.apply(this,arguments),this.set("ui",{hop:(new Date).getTime().toString(),sockets:{},onLine:!0,pushPermission:"default",parentTitle:"",parentLocation:"",widgetFocussed:!1,awayMessage:"",expandCollapse:!0,loading:!1,widget:window!==window.parent,isDesktop:!this.isMobile(),isIPhone:this.isIPhone(),isIOS:this.isIOS(),isAndroid:this.isAndroid(),browser:this.getBrowserInfo(),isFirefoxMobile:this.isFirefoxMobile(),storageAvailable:this.storageAvailable("localStorage")})},md:(t=window.navigator.userAgent,function(){return s||(s=new window.MobileDetect(t))}),storageAvailable:function(e){var t,s="__storage_test__"
try{return(t=window[e]).setItem(s,s),t.removeItem(s),!0}catch(n){return n instanceof window.DOMException&&(22===n.code||1014===n.code||"QuotaExceededError"===n.name||"NS_ERROR_DOM_QUOTA_REACHED"===n.name)&&0!==t.length}},device:function(){var e=this.md()
return e.phone()?"phone":e.tablet()?"tablet":"desktop"},isFirefoxMobile:function(){var e=this.md()
return!("Firefox"!==this.getBrowserInfo().name||!e.phone()&&!e.tablet())},getBrowserInfo:function(){var e,t,s,n=navigator.appVersion,a=navigator.userAgent,i=navigator.appName,o=""+parseFloat(n),r=parseInt(n,10)
return-1!==(t=a.indexOf("Opera"))?(i="Opera",o=a.substring(t+6),-1!==(t=a.indexOf("Version"))&&(o=a.substring(t+8))):-1!==(t=a.indexOf("MSIE"))?(i="Microsoft Internet Explorer",o=a.substring(t+5)):-1!==(t=a.indexOf("Edge"))?(i="Edge",o=a.substring(t+5)):-1!==(t=a.indexOf("Trident"))?(i="Trident",o=a.substring(t+8)):-1!==(t=a.indexOf("Chrome"))?(i="Chrome",o=a.substring(t+7)):-1!==(t=a.indexOf("Safari"))?(i="Safari",o=a.substring(t+7),-1!==(t=a.indexOf("Version"))&&(o=a.substring(t+8))):-1!==(t=a.indexOf("Firefox"))?(i="Firefox",o=a.substring(t+8)):(e=a.lastIndexOf(" ")+1)<(t=a.lastIndexOf("/"))&&(i=a.substring(e,t),o=a.substring(t+1),i.toLowerCase()===i.toUpperCase()&&(i=navigator.appName)),-1!==(s=o.indexOf(";"))&&(o=o.substring(0,s)),-1!==(s=o.indexOf(" "))&&(o=o.substring(0,s)),r=parseInt(""+o,10),isNaN(r)&&(o=""+parseFloat(n),r=parseInt(n,10)),{name:i,version:r,versionx:o,os:this.device()}}})
e.default=n}),define("hotline-web/services/intl",["exports","ember-intl/services/intl"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hotline-web/services/jwt",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.Service.extend(Ember.Evented,{init:function(){this.isEnabled=!1,this.isStrict=!1,this.auth={app:null,user:null,timer:null,timeoutInterval:null,expiredAt:null,expired:!1,scheduled:null}},enable:function(e){this.isEnabled=!0===e},strict:function(e){this.isStrict=!0===e},isJWTStrictMode:function(){return this.isEnabled&&this.isStrict},authenticateApp:function(e){this.auth.app=!0===e,this.trigger("didAuthenticateApp")},authenticateUser:function(e){this.auth.user=!0===e,this.trigger("didAuthenticateUser")},authenticateToken:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null
e?(this.setExpiry(e),this.setAuthTimer(),this.authenticateUser(this.auth.user)):(this.unsetExpiry(),this.resetAuthTimer())},setAuthTimer:function(){var e=this
this.resetAuthTimer(),this.auth.timer=setTimeout(function(){e.setExpiry(),e.resetAuthTimer(),e.auth.expired=!0,e.authenticateUser(!1)},this.auth.timeoutInterval||3e4)},resetAuthTimer:function(){this.auth.timer&&clearTimeout(this.auth.timer)},setExpiry:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null
this.auth.expiredAt=e||parseInt((new Date).getTime()/1e3,10)},unsetExpiry:function(){this.auth.expiredAt=null},validateJWT:function(e){var t=this
return new Ember.RSVP.Promise(function(s,n){if(t.auth.scheduled)n({status:429,success:!1})
else{t.authenticateToken(),t.auth.scheduled=!0
var a=function(e){t.auth.scheduled=!1,e.validToken?(t.unsetExpiry(),t.auth.expired=!1,s(e)):(t.setExpiry(),t.auth.expired=!0,n())}
Ember.$.ajax({type:"POST",url:e.url,data:JSON.stringify(e.payload),dataType:"json",contentType:"application/json",success:a,error:a})}})}})
e.default=t}),define("hotline-web/services/logger",["exports","hotline-web/config/environment"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=Ember.Service.extend({log:function(e){"development"===t.default.environment&&console.log(e)}})
e.default=s}),define("hotline-web/services/moment",["exports","ember-moment/services/moment","hotline-web/config/environment"],function(e,t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var n=Ember.get,a=t.default.extend({defaultFormat:n(s.default,"moment.outputFormat")})
e.default=a}),define("hotline-web/services/notification",["exports","hotline-web/utils/utils","hotline-web/utils/constants","hotline-web/config/environment","hotline-web/mixins/message","hotline-web/mixins/localstorage"],function(e,t,s,n,a,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var o=Ember.Service.extend(a.default,i.default,{init:function(){this.set("isPushEventsBound",!1),this.set("lastAction",null)},requestPermission:function(){this.postMessage({action:"ask_permission"})},clearPermission:function(){this.postMessage({action:"clear_subscription"})},subscribeCB:Ember.computed({get:function(){return this.sendSubscriptionToServer.bind(this)}}),unsubscribeCB:Ember.computed({get:function(){return this.sendUnsubscribeToServer.bind(this)}}),unloadCB:Ember.computed({get:function(){return this.sendSubscribeOnUnload.bind(this)}}),bindPushEvents:function(){if(!this.get("isPushEventsBound")){var e=Ember.$(window)
this.set("isPushEventsBound",!0),this.unbindPushEvents(),e.on("focus",Ember.get(this,"unsubscribeCB")),e.on("blur",Ember.get(this,"subscribeCB")),e.on("beforeunload",Ember.get(this,"unloadCB"))}},unbindPushEvents:function(){var e=Ember.$(window)
e.unbind("focus",Ember.get(this,"unsubscribeCB")),e.unbind("blur",Ember.get(this,"subscribeCB")),e.unbind("beforeunload",Ember.get(this,"unloadCB"))},sendSubscribeOnUnload:function(e){t.default.setResetAsync(!1),this.sendSubscriptionToServer(e)},sendSubscriptionToServer:function(e){var t=this.get("hotline.ui.push.subscription"),n=this.get("hotline.ui.config.appSubDomain"),a=this.get("session"),i=a&&a.user,o=a&&a.siteId,r=i&&i.alias
if(t&&(t.appSubDomain=n,r)){if("subscribe"===this.get("lastAction"))return
e&&e.type?this.logger.log("Webchat:subscribe"):this.logger.log("Widget:subscribe"),this.set("lastAction","subscribe")
var l=s.default.EmberModelUrl.subscribePush.url.replace("{token}",a.token).replace("{userAlias}",r)
o&&(l+="?siteId=".concat(o)),Ember.$.ajax({type:"POST",url:l,data:JSON.stringify(t),cache:!1,contentType:"application/json; charset=UTF-8"}).then(function(){},function(){})}},sendUnsubscribeToServer:function(e){var t=this,n=this.get("hotline.ui.push.subscription"),a=this.get("hotline.ui.config.appSubDomain"),i=this.get("session"),o=i&&i.user,r=i&&i.siteId,l=o&&o.alias
n&&(n.appSubDomain=a,l&&setTimeout(function(){if("unsubscribe"!==t.get("lastAction")){e&&e.type?t.logger.log("Webchat:unsubscribe"):t.logger.log("Widget:unsubscribe"),t.set("lastAction","unsubscribe")
var a=s.default.EmberModelUrl.subscribePush.url.replace("{token}",i.token).replace("{userAlias}",o.alias)
r&&(a+="?siteId=".concat(r)),Ember.$.ajax({type:"DELETE",url:a,data:JSON.stringify(n),cache:!1,contentType:"application/json; charset=UTF-8"})}},300))},playEmptySound:function(){if("Audio"in window)try{var e=new Audio
return e.canPlayType&&e.canPlayType("audio/mpeg;").replace(/no/,"")&&(e.volume=0,e.src=n.default.EmberENV.cdnUrl+"assets/audio/notif.mp3"),void(e.autoplay=!0)}catch(t){this.logger.log("Media Feature Pack may not been installed")}},playSound:function(){var e=this.get("hotline.ui.hop"),t=this.get("session.token"),s=this.get("session.siteId"),a=s?"hop-".concat(t,"-").concat(s):"hop-".concat(t)
if(e===this.getItemLS("hop",a)&&"Audio"in window)try{var i=new Audio
return i.canPlayType&&i.canPlayType("audio/mpeg;").replace(/no/,"")&&(i.src=n.default.EmberENV.cdnUrl+"assets/audio/notif.mp3"),void(i.autoplay=!0)}catch(o){this.logger.log("Media Feature Pack may not been installed")}},isPushSupportedByBrowser:function(){var e,t,s,n,a,i,o,r,l=!1,u=!1
n=window.chrome,a=window.navigator,i=a.vendor,o=a.userAgent.indexOf("OPR")>-1,r=a.userAgent.indexOf("Edge")>-1,null!=n&&"Google Inc."===i&&!1===o&&!1===r&&(e=!!(s=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./))&&parseInt(s[2],10))&&(l=e>=50),navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&(t=function(){var e=navigator.userAgent,t=e.indexOf("Firefox"),s=e.substring(t+8).split(".")
return!(!s||!s.length)&&parseInt(s[0],10)}())&&(u=t>=44)
var c="serviceWorker"in navigator,d=function(){var e=!1
try{window.ServiceWorkerRegistration&&"showNotification"in window.ServiceWorkerRegistration.prototype&&(e=!0)}catch(t){this.logger.log(t)}return e}(),m="PushManager"in window
return c&&d&&m&&(l||u)}})
e.default=o}),define("hotline-web/services/queue",["exports","hotline-web/utils/constants"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=Ember.Service.extend(Ember.Evented,{init:function(){this.queue={},this.fired={}},enque:function(e,s){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2]
if(-1===e.indexOf(t.default.EventType.TIMER)&&this.fired[e]&&n)return s()
void 0===this.queue[e]&&(this.queue[e]=[]),this.queue[e].push(s)},clear:function(e){-1!==e.indexOf(t.default.EventType.TIMER)&&(this.queue[e]?(this.queue[e]=void 0,this.trigger("didClear",e)):this.trigger("didFail",e))},deque:function(e){var s=this.queue[e]
if(void 0!==s){for(;s.length;)s.shift()();-1===e.indexOf(t.default.EventType.TIMER)&&(this.fired[e]=!0),this.queue[e]=void 0,this.trigger("didTrigger",e)}}})
e.default=s}),define("hotline-web/services/rts",["exports","hotline-web/utils/constants","hotline-web/mixins/datastore","hotline-web/mixins/data-dog-mixin","hotline-web/config/environment","hotline-web/helpers/polling","hotline-web/utils/utils"],function(e,t,s,n,a,i,o){function r(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var l=Ember.Service.extend(Ember.Evented,s.default,n.default,{init:function(){var e=a.default.socket
this.url=e.protocol+e.domain[a.default.hotlineEnv.type],this.connection=void 0,this._setDefaults()},getSocketId:function(){return this.connection&&this.connection.socket&&this.connection.socket.id},resetFlags:function(){this.connecting=!1,this.reconnecting=!1,this.didReconnect=!1,this.didConnect=!1,this.didDisconnect=!1,this.retryCounter=0},resetTimers:function(){this.stopPing(),this.stopConnectionTimer()},_setDefaults:function(){this.clientId=void 0,this.connectionError=null,this.resetFlags(),this.resetTimers()},_create:function(){var e=this.get("user"),t=Ember.get(this,"userToken"),s=e&&e.id,n=t&&t.accountId,a=t&&t.channelName,i=t&&t.privateToken
this.connecting||(this.close(),this.connecting=!0,this.trigger("willConnect"),this.onBeforeConnect(),n&&s&&a&&i&&(this.clientId=s,this._createConnection(n,s,i)))},_createConnection:function(e,t,s){this.connection=new window.RTS({accId:e,userId:t,token:s,origin:this.url,webURL:this.url,nocookie:!this.get("hotline.ui.storageAvailable"),onConnect:this.onConnect.bind(this),onConnectError:this.onConnectError.bind(this),onReconnect:this.onConnect.bind(this),onReconnecting:this.onReconnecting.bind(this),onDisconnect:this.onDisconnect.bind(this),onMessage:this.onMessage.bind(this),isHealthCheckEnabled:!0}),Ember.$(window).on("beforeunload",Ember.get(this,"onUnloadRTSCB"))},user:Ember.computed("session.user",{get:function(){return Ember.get(this,"session.user")}}),onUnloadRTSCB:Ember.computed({get:function(){return this.close.bind(this)}}),userToken:Ember.computed("user.token",{get:function(){},set:function(e,t){return t}}),create:function(){var e=this
if(Ember.get(this,"userToken")||!Ember.get(this,"session.user.id"))this._create()
else{var s=Ember.get(this,"session.token"),n=Ember.get(this,"session.siteId"),a=t.default.EmberModelUrl.webSocket,i=a.url.replace("{token}",s),o=Ember.get(this,"store")
n&&(i+="?siteId=".concat(n)),o.getRequest(a.model,i).then(function(t){t&&t.errorCode||(Ember.set(e,"userToken",t),e._create())})}},close:function(){this.stopPing(),Ember.$(window).unbind("beforeunload",Ember.get(this,"onUnloadRTSCB")),this.connection&&(this.connection.close(),this.connection.disconnect()),this.connection=void 0,this._setDefaults()},onConnect:function(e){e||(this.stopConnectionTimer(),this.didDisconnect=!1,this.connectionError=null,this.connecting?(this.connecting=!1,this.didConnect=!0,this.trigger("didConnect"),this.logger.log("Connected")):(this.reconnecting=!1,this.didReconnect=!0,this.trigger("didReconnect"),this.logger.log("Reconnected")),this.connectVisitorChannel(),this.get("user")&&this.connectUserChannel())},onConnectError:function(e){if(this.connectionError)this.removeSocketListener("connect_error")
else{this.logger.log("Connection Error")
var s=e&&e.type
if(s){this.connectionError=e
var n=t.default.DataDog.events.connection
this.increment({evt:n,tags:r({},n.tags.errFlag.key,s)}),this.onAfterDisconnect(0)}}},removeSocketListener:function(e){this.connection&&this.connection.removeSocketListeners(e)},onBeforeConnect:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e4
this.resetTimers(),this.notConnected=setInterval(function(){e.onAfterDisconnect(t)},s)},stopConnectionTimer:function(){this.notConnected&&(clearInterval(this.notConnected),this.notConnected=null)},onAfterDisconnect:function(e){if(this.logger.log("Unable to connect"),this.logger.log("Flag => ".concat(e)),this.resetFlags(),this.resetTimers(),this.didDisconnect=!0,this.trigger("didDisconnect"),Ember.get(this,"hotline.ui.onLine")){var s,n=t.default.DataDog.events.connection
this.increment({evt:n,tags:(s={},r(s,n.tags.connStatus.key,3===e?n.tags.connStatus.value.pong_failed:n.tags.connStatus.value.timeout),r(s,n.tags.connFlag.key,0===e?n.tags.connFlag.value.created:1===e?n.tags.connFlag.value.disconnected:2===e?n.tags.connFlag.value.reconnected:3===e?n.tags.connFlag.value.connected:n.tags.connFlag.value.subscribed),s)})}},onDisconnect:function(e,t){t&&parseInt(t.userId,10)!==parseInt(this.clientId,10)||this.clientId&&(this.logger.log("Disconnected"),this.resetFlags(),this.resetTimers(),this.connecting=!0,this.trigger("willConnect"),this.onBeforeConnect(1,5e3))},onReconnecting:function(){this.logger.log("Reconnecting"),this.trigger("didConnect"),this.resetFlags(),this.resetTimers(),this.reconnecting=!0,this.trigger("willReconnect"),this.onBeforeConnect(2,5e3)},onMessage:function(e){"PONG"===e.event&&this.onPong()},connectVisitorChannel:function(){var e=Ember.get(this,"hotline.ui.config.publicChannelName")
e&&this.open(e,this.onPublic,null,512)},connectUserChannel:function(){if(this.connection){var e=this.get("userToken")
e&&this.open(e.channelName,this.onPrivate,this.onSubscription,0)}},open:function(e,s){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3?arguments[3]:void 0
this.connection&&this.connection.subscribe(e,function(e){var a=e&&2===e.mtyp
if(e&&"ADVICE_PULL"===e.event){var i=t.default.DataDog.events.advicePull
n.increment({evt:i,tags:r({},i.tags.pullStatus.key,i.tags.pullStatus.value.triggered)}),n.trigger("didAdvicePull",{channel:e.channel,reset:!0,src:t.default.CONVERSATION.FETCH.RTS_ADVICE_PULL})}else a&&s&&"function"==typeof s&&s.call(n,e.msg,e.id,e.seq)},function(o,l){if(o)if(n.get("logger").log("Not Subscribed 🙁"),n.retryCounter++,1===n.retryCounter)n.open(e,s,a,i)
else{n.onAfterDisconnect(4)
var u=t.default.DataDog.events.subscription
n.increment({evt:u,tags:r({},u.tags.subTimeout.key,e)})}else n.get("logger").log("Subscribed 👍🏾"),n.executeConnectionHandler(a,l)},{opt:i})},executeConnectionHandler:function(e,t){e&&"function"==typeof e&&(e.call(this,t),this.startPing())},sendMessage:function(e){this.connection&&this.connection.publish({channelName:Ember.get(this,"userToken.channelName"),message:e})},sendAck:function(e,t,s){if(this.connection){var n=e&&e.messageId?{messageId:e.messageId,millis:e.createdMillis}:{}
this.connection.sendAck(Ember.get(this,"userToken.channelName"),t.toString(),this.clientId.toString(),s,n)}},onPrivate:function(e,t,s){var n=o.default.safelyParseJSON(e)||{}
n.userId?this.trigger("didMessage",n,t,s):this.trigger("didUserMessage",n,t,s)},onSubscription:function(e){this.didReconnect?(this.didReconnect=!1,this.trigger("didAdvicePull",{channel:e.channel,reset:!1,src:t.default.CONVERSATION.FETCH.RTS_RECONNECT_SUCCESS})):this.trigger("didAdvicePull",{channel:this.get("session.config.showFAQOnOpen")?null:e.channel,reset:!1,src:t.default.CONVERSATION.FETCH.RTS_CONNECT_SUCCESS})},startPing:function(){this.timer||(this.timer=i.default.create({onPoll:this.onPing.bind(this),interval:12e4}),this.timer.start())},onPing:function(){var e=this
this.notPong||(this.notPong=setInterval(function(){e.onAfterDisconnect(3)},5e3),this.connection.ping(this.get("user.id").toString()))},onPong:function(){this.notPong&&(clearInterval(this.notPong),this.notPong=null)},stopPing:function(){this.onPong(),this.timer&&(this.timer.stop(),this.timer=null)},healthCheck:function(){if(this.get("user")&&this.get("user.id")&&Ember.get(this,"hotline.ui.onLine")&&!this.connecting&&!this.reconnecting&&this.didDisconnect){var e=t.default.DataDog.events.connectionDropped
this.connection?this.timer||(this.increment({evt:e,tags:r({},e.tags.dropStatus.key,e.tags.dropStatus.value.no_ping_pong)}),this.close(),this.create()):(this.increment({evt:e,tags:r({},e.tags.dropStatus.key,e.tags.dropStatus.value.no_connection)}),this.create())}},reset:function(){Ember.get(this,"hotline.ui.onLine")?this.logger.log("Online"):(this.resetFlags(),this.resetTimers(),this.logger.log("Offline"))}.observes("hotline.ui.onLine")})
e.default=l}),define("hotline-web/services/rule-engine",["exports","hotline-web/utils/utils","hotline-web/mixins/datastore","hotline-web/mixins/jwt","moment"],function(e,t,s,n,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var i=Ember.Service.extend(s.default,n.default,{getUserMetaGivenKey:function(e){var t,s=this.get("lfds"),n=this.get("session.user.meta")||{},a=this.get("session.prop.meta")||{},i=s&&s.get("meta")||{},o=this.isJWTEnabled()&&this.getJWTMeta()||{},r=this.get("session.siteId")
return t=i[e]||n[e]||a[e]||o[e],"siteId"===e&&(t=t||r),t},checkPageViewsCondition:function(e){var s,n=this.get("userBehaviour"),a=n&&n.get("locations"),i=JSON.parse(e),o=i.pageUrl,r=i.viewCount,l=!1
return(s=a&&a.findBy("pageUrl",o.value))&&(l=t.default.checkCondition(r.dataType,r.conditionType,s.get("viewCount"),t.default.convertOperand(r.dataType,r.value))),l},checkLocationCondition:function(e){var s,n=this.get("lfds"),a=n&&n.get("userBehaviour"),i=a&&a.get("userGeolocation"),o=i&&i.country||"",r=i&&i.state||"",l=t.default.safelyParseJSON(e.value)||{}
return s=t.default.checkCondition("STRING",e.conditionType,o,l.countryCode),l.region&&"All Regions"!==l.region&&(s=s&&t.default.checkCondition("STRING",e.conditionType,r,l.region)),s},checkBrowserLanguageCondition:function(e){var s=this.get("lfds"),n=s&&s.get("properties"),a=this.get("session.prop.locale")||n&&n.get("locale")||this.get("session.user.locale")||t.default.getNavigatorLanguage()
return-1===e.value.indexOf("-")&&(a=a.substring(0,2)),t.default.checkCondition(e.dataType,e.conditionType,a,e.value)},evaluateUserConditions:function(e,s){var n,a=this,i=this.get("userBehaviour"),o=i&&i.get("firstLocationMillis")||0,r=i&&i.get("lastLocationMillis")||0,l=i&&i.get("visitsCount"),u=this.get("hotline.ui.browser"),c=this.get("hotline.ui.userBehaviour"),d=i&&i.get("userGeolocation"),m=d&&d.city||"",h=c&&c.currentUrl&&c.currentUrl.toLowerCase()||"",f=0
return m="N/A"===m?"":m,n=e.reduce(function(e,n){var i=!1
switch(n.keyRaw){case"CURRENT_PAGE_URL":i=t.default.checkCondition(n.dataType,n.conditionType,h,n.value)
break
case"NUMBER_OF_PAGE_VIEWS":i=a.checkPageViewsCondition(n.value)
break
case"TIME_ON_CURRENT_PAGE":f=t.default.convertOperand(n.dataType,n.value),i=!0
break
case"NUMBER_OF_VISITS":i=t.default.checkCondition(n.dataType,n.conditionType,l,n.value)
break
case"LOCATION":i=a.checkLocationCondition(n)
break
case"CITY":i=t.default.checkCondition(n.dataType,n.conditionType,m,n.value)
break
case"BROWSER_LANGUAGE":i=a.checkBrowserLanguageCondition(n)
break
case"BROWSER":i=t.default.checkCondition(n.dataType,n.conditionType,u.name,n.value)
break
case"BROWSER_VERSION":i=t.default.checkCondition(n.dataType,n.conditionType,u.versionx,n.value)
break
case"OS":i=t.default.checkCondition(n.dataType,n.conditionType,u.os,n.value)
break
case"FIRST_SEEN":i=a.checkDaterelativeCondition(n,o)
break
case"LAST_SEEN":i=a.checkDaterelativeCondition(n,r)
break
case"TIMEZONE":i=t.default.checkCondition(n.dataType,n.conditionType,jstz.determine().name(),n.value)
break
default:i=t.default.checkCondition(n.dataType,n.conditionType,a.getUserMetaGivenKey(n.keyRaw),n.value,!0)}return s?e&&i:e||i},s),{isMatch:e.length?n:s,delay:f}},checkDaterelativeCondition:function(e,s){var n,i=e.value,o=!0
return"NUMBER"===e.dataType?(o=(n=t.default.convertOperand(e.dataType,e.value))%86400==0,i=(0,a.default)().subtract(n,"seconds").valueOf()):"STRING"===e.dataType&&(i=(0,a.default)(i).valueOf()),t.default.checkCondition("DATE",e.conditionType,s,i,o)},evaluateOccurrenceConditions:function(e,s){var n,a=this,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=this.get("userBehaviour"),r=(o&&o.get("eventConditions")).findBy("eventConditionId",e),l=!!r
return r||(r=Ember.Object.create({occurrenceCount:0})),s=s||[],r&&(n=s.reduce(function(e,s){var n=!1
switch(s.key){case"LAST_OCCURRED":n=a.checkDaterelativeCondition(s,r.get("lastOccurredMillis"))
break
case"FIRST_OCCURRED":n=a.checkDaterelativeCondition(s,r.get("firstOccurredMillis"))
break
case"COUNT":n=t.default.checkCondition(s.dataType,s.conditionType,r.get("occurrenceCount"),s.value)}return i?e&&n:e||n},i)),s.length?n:l},evaluateEventConditions:function(e,t){var s,n=this
return s=(e=e||[]).reduce(function(e,s){var a=n.evaluateOccurrenceConditions(s.eventConditionId,s.occurrenceConditions,!0)
return t?e&&a:e||a},t),e.length?s:t},processSegment:function(e){var t,s,n=e.userConditions||[],a=e.eventConditions||[],i="ALL"===e.conditionMatchType,o=i
return t=this.evaluateUserConditions(n,i),s=this.evaluateEventConditions(a,i),{isMatch:o=i?(o=o&&t.isMatch)&&s:(o=o||t.isMatch)||s,delay:t.delay}},processRule:function(e){for(var t=e&&e.segments||[],s="ALL"===e.segmentMatchType,n=s,a=0,i=0,o=t.length;i<o;i++){var r=t[i],l=this.processSegment(r)
if(s)n=n&&l.isMatch,a=l.delay>a?l.delay:a
else if(n=n||l.isMatch){a=l.delay||0
break}}return{isMatch:n,delay:a}},canTriggerEventForRule:function(e,t,s){var n=!1
switch(s.triggerType){case"PAGE":n="fc_page"===e||!!t[s.ruleId]
break
case"EVENT":n="fc_page"!==e&&!!t[s.ruleId]
break
default:n=!0}return n},maxTriggerCheck:function(e){var t=this.get("userBehaviour"),s=t&&t.get("executedRules"),n=s&&s.findBy("ruleId",e.ruleId),a=n&&n.get("sentCount")||0,i=n&&n.get("sentCountSession")||0,o=e.command.commandValue
return!o.hasMaxTrigger||!o.maxTriggerCount||(a&&"FOREVER"===o.maxTriggerType?a<o.maxTriggerCount:!i||"SESSION"!==o.maxTriggerType||i<o.maxTriggerCount)},getAwayMessage:function(e){var t=e&&e.command&&e.command.commandValue&&e.command.commandValue.operatingHoursId,s=this.get("hotline.ui.awayMessage")
if(t){var n=s.findBy("operatingHoursId",t[0])
return n&&n.awayMessage}return null},processRules:function(e,t){var s=this,n=this.get("hotline.ui.userBehaviour"),a=n&&n.eventRules||[]
return new Ember.RSVP.Promise(function(n){var i=[]
a.forEach(function(n){var a=!1
if(s.getAwayMessage(n)&&n&&n.command&&n.command.commandValue&&n.command.commandValue.skipBusinessHours&&(a=!0),n.enabled&&s.maxTriggerCheck(n)&&s.canTriggerEventForRule(e,t,n)&&!a){var o=s.processRule(n.segment)
o.isMatch&&(n.command.delay=o.delay,n.command.ruleId=n.ruleId,i.push(n))}}),n(i)})}})
e.default=i}),define("hotline-web/services/screenshare",["exports","hotline-web/utils/constants"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=Ember.Service.extend({CONVERSATION:t.default.CONVERSATION,rts:Ember.inject.service(),session:Ember.inject.service(),logger:Ember.inject.service(),init:function(){var e=this
window.addEventListener("message",function(s){var n=e.get("session.token")
if(s&&s.data&&"startScreenShare"===s.data.event_id){if(s.data.cb_data){var a=s.data.cb_data,i=a.room,o=a.conversationId,r=a.messageId,l=a.name,u=a.role,c=a.sdata,d=a.app_alias,m=a.viewerId,h=a.messageUserId,f=a.cobrowsingId,g=a.startTime
Ember.$.ajax({url:"/app/services/app/webchat/".concat(n,"/cbstatus"),contentType:"application/json; charset=UTF-8",method:"PUT",data:JSON.stringify({conversationId:o,messageId:r,messageType:t.default.CONVERSATION.MESSAGE_TYPE.SCREEN_SHARING.ACCEPTED,room:i,name:l,role:u,sdata:c,app_alias:d,messageUserId:h,viewerId:m,cobrowsingId:f}),success:function(){e.sendMessage("".concat(d,"-cobrowse-").concat(o),{event:"coBrowsingAccepted",room:i,conversationId:o,messageId:r,name:l,role:u,sdata:c,app_alias:d,viewerId:m,messageUserId:h,startTime:g})},error:function(){this.sendMessage("".concat(d,"-cobrowse-").concat(o),{event:"coBrowsingError"})}})}}else if(s&&s.data&&"endScreenShare"===s.data.event_id){var p=(new Date).getTime(),b=sessionStorage.getItem("_fc_ongoing_cb_id"),v={msgHopId:p+"_"+e.get("hotline.ui.hop"),messageType:t.default.CONVERSATION.MESSAGE_TYPE.SCREEN_SHARING.ENDED,messageUserType:t.default.CONVERSATION.USER_TYPE.USER,channelId:s.data.channelId,createdMillis:(new Date).getTime(),cobrowsingId:b,messageFragments:[{fragmentType:t.default.CONVERSATION.FRAGMENT_TYPE.TEXT,contentType:"text/html",content:"SCREEN SHARING ENDED"}]}
e.createMessage(v)}})},accept:function(e){window.parent.postMessage({event_id:"startScreenShare",cbData:e},"*")},startCoBrowsing:function(e){var s=this,n=this.get("session.token"),a=e.room,i=e.conversationId,o=e.messageId,r=e.name,l=e.role,u=e.sdata,c=e.app_alias,d=e.viewerId,m=e.messageUserId,h=e.cobrowsingId,f=e.startTime
Ember.$.ajax({url:"/app/services/app/webchat/".concat(n,"/cbstatus"),contentType:"application/json; charset=UTF-8",method:"PUT",data:JSON.stringify({conversationId:i,messageId:o,messageType:t.default.CONVERSATION.MESSAGE_TYPE.SCREEN_SHARING.ACCEPTED,room:a,name:r,role:l,sdata:u,app_alias:c,messageUserId:m,viewerId:d,cobrowsingId:h}),success:function(){s.sendMessage("".concat(c,"-cobrowse-").concat(i),{event:"coBrowsingAccepted",room:a,conversationId:i,messageId:o,name:r,role:l,sdata:u,app_alias:c,viewerId:d,messageUserId:m,startTime:f})},error:function(){this.sendMessage("".concat(c,"-cobrowse-").concat(i),{event:"coBrowsingError"})}})},endCoBrowsing:function(e){var s=(new Date).getTime(),n=sessionStorage.getItem("_fc_ongoing_cb_id"),a={msgHopId:s+"_"+this.get("hotline.ui.hop"),messageType:t.default.CONVERSATION.MESSAGE_TYPE.SCREEN_SHARING.ENDED,messageUserType:t.default.CONVERSATION.USER_TYPE.USER,channelId:e.channelId,createdMillis:(new Date).getTime(),cobrowsingId:n,messageFragments:[{fragmentType:t.default.CONVERSATION.FRAGMENT_TYPE.TEXT,contentType:"text/html",content:"SCREEN SHARING ENDED"}]}
this.createMessage(a)},deny:function(e){var s=this
Ember.$.ajax({url:"/app/services/app/webchat/".concat(e.token,"/cbstatus"),contentType:"application/json; charset=UTF-8",method:"PUT",data:JSON.stringify({conversationId:e.conversationId,messageId:e.messageId,messageType:t.default.CONVERSATION.MESSAGE_TYPE.SCREEN_SHARING.DENIED}),success:function(){s.logger.log("Successfully denied the cobrowsing"),s.sendMessage("".concat(e.app_alias,"-cobrowse-").concat(e.conversationId),{event:"coBrowsingDenied"})},error:function(){s.sendMessage("".concat(e.app_alias,"-cobrowse-").concat(e.conversationId),{event:"coBrowsingDenied"})}})},createMessage:function(e){var s=this,n=this.get("session"),a=n&&n.user,i=n&&n.siteId,o=t.default.EmberModelUrl.message.url.replace("{token}",n.token).replace("{userAlias}",a.alias)
i&&(o+="?siteId=".concat(i)),Ember.$.ajax({type:"POST",url:o,data:JSON.stringify(e),cache:!1,dataType:"json",contentType:"application/json; charset=utf-8",processData:!1}).then(function(){s.logger.log("message created successfully")},function(){s.logger.log("Error in creating the messages")})},sendMessage:function(e,t){var s=this,n=this.get("rts")
n.connection._isChannelSubscribed(e)?Ember.run.later(function(){n.connection.publish({channelName:e,message:t})},3e3):n.connection.subscribe(e,function(){},function(a){a&&s.logger.log("Error in subscribing to the channel",a),Ember.run.later(function(){n.connection.publish({channelName:e,message:t})},3e3)})}})
e.default=s})
define("hotline-web/services/session",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.Service.extend({init:function(){this.set("user",{})}})
e.default=t}),define("hotline-web/services/timer",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.Service.extend(Ember.Evented,{init:function(){this.queue.on("didTrigger",this.done.bind(this)),this.queue.on("didClear",this.cancel.bind(this)),this.queue.on("didFail",this.error.bind(this))},push:function(e){var t=this
e.delay&&e.handler&&(this.queue.enque(e.type,e.handler),e.trigger=setTimeout(function(){t.queue.deque(e.type)},e.delay))},done:function(e){this.trigger("didTrigger",e)},cancel:function(e){this.trigger("didClear",e)},error:function(e){this.trigger("didFail",e)},clear:function(e){var t=e&&e.trigger
t&&(clearTimeout(t),this.queue.clear(e.type))},clearAll:function(e){var t=this
e.forEach(function(e){t.clear(e)})}})
e.default=t}),define("hotline-web/snippets",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default={"chat-style.html":'<style type="text/css">\n\n  @import url(\'{{FONT_URL}}\');\n\n  html, body {\n    font-family: {{FONT_NAME}} !important;\n  }\n  .h-chat-custom .h-channel .h-header, .h-chat-custom .h-conv .h-header,\n  .h-chat-custom .h-conv .h-chat .h-comment,\n  .h-chat-custom .h-conv .h-chat .h-fc-cobrowse,\n  .h-chat-custom .h-conv div.body div.message-container.odd span.chat-msg,\n  .preview-bubble, .notification-container .btn-container .btn-left,\n  .iframe-modal .h-modal-notes .modal-header,\n  .h-reply-wrapper .h-reply-button .h-img-button {\n    background-color: {{HD_BG_COLOR}} !important;\n  }\n  .h-chat-custom .h-channel .h-header .icon, .h-chat-custom .h-conv .h-header .icon,\n  .h-chat-custom .h-channel .h-header .conv-title, .h-chat-custom .h-conv .h-header .conv-title,\n  .h-chat-custom .h-channel .h-header .ic-back, .h-chat-custom .h-conv .h-header .ic-back,\n  .h-chat-custom .h-channel .h-header .title, .h-chat-custom .h-conv .h-header .title,\n  .h-chat-custom .h-conv .h-chat .h-comment,\n  .h-chat-custom .h-conv .h-chat .h-fc-cobrowse,\n  .h-chat-custom .h-conv div.body div.message-container.odd span.chat-msg,\n  .iframe-modal .h-modal-notes .modal-header .frame-title,\n  .iframe-modal .h-modal-notes .modal-header .h-close i,\n  .preview-bubble, .h-reply-wrapper .h-reply-button .h-img-button {\n    color: {{HD_FG_COLOR}} !important;\n  }\n\n  .h-chat-custom .h-conv div.body div.message-container.odd span.arrow.right {\n    border-left-color: {{HD_BG_COLOR}} !important;\n  }\n\n  .h-chat-custom .h-conv .h-chat .h-fc-cobrowse .sc-visitor-footer a{\n    color: {{HD_FG_COLOR}} !important;\n  }\n\n  .h-chat-custom .h-conv .h-chat .h-fc-cobrowse .sc-visitor-tailer-control .sc-accept-btn{\n    color: {{HD_BG_COLOR}} !important;\n    background-color: {{HD_FG_COLOR}} !important;\n  }\n\n\n  .h-chat-custom .h-conv .h-chat .h-fc-cobrowse .sc-visitor-tailer-control .sc-deny-btn{\n    color: {{HD_FG_COLOR}} !important;\n  }\n\n  .h-chat-custom div.h-conv div.body {\n    background-image: url("{{ICON_URL}}");\n    background-color: #f4f5f6;\n  }\n\n  .d-hotline {\n    background-color: {{HD_BG_COLOR}} !important;\n    color: {{HD_FG_COLOR}} !important;\n    border-color: transparent {{HD_BG_COLOR}} transparent transparent;\n  }\n  .loader {\n    border-top: 1em solid rgba({{HD_BG_COLOR}}, 0.4);\n    border-right: 1.05em solid {{HD_BG_COLOR}};\n    border-bottom: 1.05em solid {{HD_BG_COLOR}};\n    border-left: 1.05em solid {{HD_BG_COLOR}};\n  }\n\n  .article-modal .modal-footer .h-message-us-btn {\n    background-color: {{HD_BG_COLOR}} !important;\n  }\n  .article-content .modal-footer .h-message-us-btn {\n    background-color: {{HD_BG_COLOR}} !important;\n  }\n\n  .tabs .tabs-inner:after{\n    background-color: {{HD_BG_COLOR}} !important;\n  }\n\n  .btn-csat-yes {\n    background-color: {{HD_BG_COLOR}} !important;\n    color: {{HD_FG_COLOR}} !important;\n    border: 0.5px solid {{HD_BG_COLOR}} !important;\n  }\n\n  .submit-rating .submit.btn {\n    background-color: {{HD_BG_COLOR}} !important;\n    color: {{HD_FG_COLOR}} !important;\n  }\n\n  .h-comment.h-wrapped-article .articles-listview .article-showmore,\n  .preview-container .h-reply-button .h-button-area button span{\n    color: {{HD_BG_COLOR}} !important;\n  }\n\n  .preview-container .h-reply-button .h-button-area button{\n    border-color: {{HD_BG_COLOR}} !important;\n  }\n\n  .h-header .jwt-error-message {\n    color: {{JWT_FG_COLOR}} !important;\n    background-color: {{JWT_BG_COLOR}} !important;\n  }\n\n</style>\n'}}),define("hotline-web/templates/application",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"UNXG/Oyg",block:'{"symbols":[],"statements":[[4,"if",[[23,["hotline","ui","modalOpen"]]],null,{"statements":[[0,"\\t"],[1,[27,"ui-modal",null,[["home"],[[27,"action",[[22,0,[]],"gotoHome"],null]]]],false],[0,"\\n"]],"parameters":[]},null],[1,[27,"content-viewport",null,[["config","reloadRoute","restore","home","gotoChannel"],[[23,["hotline","ui","config"]],[27,"action",[[22,0,[]],"reloadRoute"],null],[27,"action",[[22,0,[]],"restoreConversation"],null],[27,"action",[[22,0,[]],"gotoHome"],null],[27,"action",[[22,0,[]],"gotoChannel"],null]]]],false],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"hotline-web/templates/application.hbs"}})
e.default=t}),define("hotline-web/templates/channels",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"YOYmCvxJ",block:'{"symbols":[],"statements":[[1,[21,"outlet"],false],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"hotline-web/templates/channels.hbs"}})
e.default=t}),define("hotline-web/templates/channels/channel",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"iwJu3maY",block:'{"symbols":[],"statements":[[1,[27,"app-conversation",null,[["model","gotoHome"],[[23,["model"]],[27,"action",[[22,0,[]],"gotoHome"],null]]]],false],[0,"\\n"],[1,[27,"ui-tabs",null,[["active"],["chat"]]],false],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"hotline-web/templates/channels/channel.hbs"}})
e.default=t}),define("hotline-web/templates/channels/index",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"CTUz0H1U",block:'{"symbols":[],"statements":[[1,[27,"app-chat",null,[["model"],[[23,["model"]]]]],false],[0,"\\n"],[1,[27,"ui-tabs",null,[["active"],["chat"]]],false],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"hotline-web/templates/channels/index.hbs"}})
e.default=t}),define("hotline-web/templates/components/code-snippet",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"aWreiVF0",block:'{"symbols":[],"statements":[[1,[21,"source"],false],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"hotline-web/templates/components/code-snippet.hbs"}})
e.default=t}),define("hotline-web/templates/error/404",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"3cSuSuMl",block:'{"symbols":[],"statements":[[7,"div"],[11,"class","error-page-wrap"],[9],[0,"\\n  "],[7,"h3"],[9],[1,[27,"t",["status_messages.not_found.heading"],null],false],[10],[0,"\\n  "],[7,"h4"],[9],[1,[27,"t",["status_messages.not_found.status"],null],false],[10],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"hotline-web/templates/error/404.hbs"}})
e.default=t}),define("hotline-web/templates/error/503",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"luM4C1my",block:'{"symbols":[],"statements":[[7,"div"],[11,"class","error-page-wrap"],[9],[0,"\\n  "],[7,"h3"],[9],[1,[27,"t",["status_messages.service_unavailable.heading"],null],false],[10],[0,"\\n  "],[7,"h4"],[9],[1,[27,"t",["status_messages.service_unavailable.status"],null],false],[10],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"hotline-web/templates/error/503.hbs"}})
e.default=t}),define("hotline-web/templates/error/access-denied",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"nDhiumKZ",block:'{"symbols":[],"statements":[[7,"div"],[11,"class","error-page-wrap"],[9],[0,"\\n  "],[7,"h3"],[9],[1,[27,"t",["status_messages.access_denied.heading"],null],false],[10],[0,"\\n  "],[7,"div"],[9],[1,[27,"t",["status_messages.access_denied.line1"],null],false],[10],[0,"\\n  "],[7,"div"],[9],[1,[27,"t",["status_messages.access_denied.line2"],null],false],[10],[0,"\\n  "],[7,"div"],[9],[1,[27,"t",["status_messages.access_denied.line3"],null],false],[10],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"hotline-web/templates/error/access-denied.hbs"}})
e.default=t}),define("hotline-web/templates/faqs",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"+7HljCv4",block:'{"symbols":[],"statements":[[1,[27,"app-categories-list",null,[["model","gotoChannel"],[[23,["model"]],[23,["gotoChannel"]]]]],false],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"hotline-web/templates/faqs.hbs"}})
e.default=t}),define("hotline-web/templates/widget",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"LfyO8viZ",block:'{"symbols":[],"statements":[[1,[21,"app-widget"],false],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"hotline-web/templates/widget.hbs"}})
e.default=t}),define("hotline-web/translations/en-us",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default={by_in_powered_by:"by",channel:{away_message:"We’re currently away. Please leave us a message!",heading_title:"Message Us",picture_label:"[Picture Message]",welcome_message:"Hi there! We'd love to help you out!"},common:{button:{submitting:"Submitting..."},numbers:{nine:"9"}},conversation:{ce:{activity:"Activities",flag:"Flags",food:"Food",nature:"Nature",no_results:"No Search Results",object:"Objects",people:"People",placeholders:{default:"Reply here...",email:"Enter email",mobile:"Enter phone number",name:"Enter name",url:"Enter URL"},recent:"Recently Used",results:"Search Results",search:"Search...",symbol:"Symbols",travel:"Travel & Places",view:"View"},chat_headers:{new:"New Messages",sending:"Sending...",today:"Today",yesterday:"Yesterday"},fragment:{securityStatus:{AV_PENDING:{desc:"Download at your discretion.",title:"Malware Check In Progress"},MALWARE_FILE:{desc:"This file contains malware. Downloading this attachment is disabled.",title:"Blocked"}},showmore:"Show more"},push_notification:{message:"Don't miss out on any replies! Allow push notifications?",no:"No",yes:"Yes"},response_time:{hours:"{count,plural, =1 {Currently replying in under an hour} other { Currently replying in under {count} hours}}",minutes:"{count,plural, =1 {Currently replying in under a minute} other { Currently replying in under {count} minutes}}",more:"Currently replying in a few hours"},response_time_7days:{hours:"{count,plural, =1 {Typically replies within an hour} other { Typically replies within {count} hours}}",minutes:"{count,plural, =1 {Typically replies within a minute} other { Typically replies within {count} minutes}}",more:"Typically replies within few hours"}},csat:{csat_no_comment:"How could we have helped better?",csat_question:"Did we address your concerns?",enter_comments:"Enter your comments here",rate_here:"Rate here",skip:"skip",submit:"Submit",thank_you:"Thanks for your feedback!",yes:"Yes!"},faqSearchResults:{resultsFrom:"result(s) from",resultsFromCategory:"result(s) from other categories"},faqs:{faq_help_text:"Browse through answers to common queries",faq_link_text:"Frequently Asked Questions",faq_search:"Search FAQs",message_us_link:"Message Us",no_faqs:"There are no FAQs available.",no_search_results:"No articles found for <b>'{query}'</b>",thank_you_for_feedback:"Thank you for your Feedback!",useful_question:"Was this article useful?"},fileAttachmentErrors:{errorUploadingFile:"Error uploading file",invalidFileExtension:"File extension is not supported",invalidFileSize:"Attachment exceeded maximum file size: {attributeSize} MB",invalidImageResolution:"Maximum resolution supported for image is {width} X {height}"},help_text:{connect:"Connecting...",error:"Something went wrong. You're not connected.",loading:"Loading...",offline:"You're offline. Please check your internet connection.",reconnect:"Reconnecting...",reconnecting:{one:"Reconnecting in a second",other:"Reconnecting in {count} seconds"},refresh:"Refresh",sync:"Synchronizing Conversation"},jwt:{invalid:"Oops, Something went wrong. Please reload the page..."},message:{not_authenticated:"Message not delivered authentication failure",pending:"Sending..."},screenShare:{allow:"Allow",approved:"Allowed",denied:"Denied",deny:"Deny",footer:"{agentName} will not be able to perform any action or move to another tab.",footer_vc:"{agentName} will not be able to move to another tab.",header:"{agentName} requests to view your current tab.",header_vc:"{agentName} requests to view & control your current tab.",muteAudio:"Mute Audio",readmorelink:"Read more",reqCancelled:"Request for Co-browsing cancelled",screenShareCompare:"...requests to view your current tab",sessionEnd:"Co-browsing session ended"},size_exceeded_msg:{infoMsg:"Uh oh, this message is too long and will be sent as a <strong>.txt</strong> file instead.",infoMsgSprout:"Uh oh, this message is too long and cannot be sent."},status_messages:{access_denied:{heading:"Access Denied",line1:"Uh oh! Something went wrong",line2:"Looks like you don't have permission to access this page.",line3:"Contact your administrator for more details."},not_found:{heading:"Page Not Found",status:"The page you are looking for could not found."},service_unavailable:{heading:"Service Is Unavailable",status:"The page you are looking for is currently unavailable. Please try again."}},uiTabs:{chat:"CHAT",faq:"FAQ"}}}),define("hotline-web/translations/fr",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default={by_in_powered_by:"par",channel:{away_message:"Nous sommes absents pour le moment. Veuillez nous laisser un message !",heading_title:"Envoyez-nous un message",picture_label:"[MMS]",welcome_message:"Bonjour ! Nous serions ravis de vous aider!"},common:{button:{submitting:"Submitting..."},numbers:{nine:"9"}},conversation:{ce:{activity:"Activités",flag:"Drapeaux",food:"Alimentation",nature:"Nature",no_results:"Aucun résultat de recherche",object:"Objets",people:"Personnes",placeholders:{default:"Répondre ici...",email:"Saisir l'e-mail",mobile:"Saisir le numéro de téléphone",name:"Saisir le nom",url:"Entrer une URL"},recent:"Utilisés récemment",results:"Résultats de recherche",search:"Recherche...",symbol:"Symboles",travel:"Voyage & lieux",view:"View"},chat_headers:{new:"Nouveaux messages",sending:"Envoi...",today:"Aujourd'hui",yesterday:"Hier"},fragment:{securityStatus:{AV_PENDING:{desc:"Télécharger à votre discrétion.",title:"Vérification de logiciels malveillants en cours"},MALWARE_FILE:{desc:"Ce fichier contient un logiciel malveillant. Le téléchargement de cette pièce jointe est désactivé.",title:"Bloqués"}},showmore:"Show more"},push_notification:{message:"Ne manquez plus aucune réponse ! Autoriser les notifications push ?",no:"Non",yes:"Oui"},response_time:{hours:"{count,plural, =1 {Actuellement, réponse en moins d'une heure} other { Actuellement, réponse en moins de {count} heures }}",minutes:"{count,plural, =1 {Actuellement, réponse en moins d'une minute} other { Actuellement, réponse en moins de {count} minutes}}",more:"Actuellement, réponse en quelques heures"},response_time_7days:{hours:"{count,plural, =1 {Réponse généralement en moins d'une heure} other { Réponse généralement en moins de {count} heures }}",minutes:"{count,plural, =1 {Réponse généralement en moins d'une minute} other { Réponse généralement en moins de {count} minutes }}",more:"Réponse généralement en quelques heures"}},csat:{csat_no_comment:"Comment aurions-nous pu mieux vous aider ?",csat_question:"Avons-nous répondu à vos questions ?",enter_comments:"Saisir vos commentaires ici",rate_here:"Donnez une note ici",skip:"ignorer",submit:"Soumettre",thank_you:"Merci pour vos commentaires !",yes:"Oui!"},faqSearchResults:{resultsFrom:"résultat(s) pour",resultsFromCategory:"résultat(s) d'autres catégories"},faqs:{faq_help_text:"Parcourez les réponses aux questions courantes",faq_link_text:"Foire aux Questions",faq_search:"Recherche FAQ",message_us_link:"Envoyez-nous un message",no_faqs:"Aucune FAQ disponible.",no_search_results:"Aucun article trouvé pour <b>'{query}'</b>",thank_you_for_feedback:"Merci pour vos commentaires !",useful_question:"Cet article a-t-il été utile ?"},fileAttachmentErrors:{errorUploadingFile:"Error uploading file",invalidFileExtension:"L'extension de fichier n'est pas prise en charge",invalidFileSize:"La pièce jointe dépasse la taille maximale autorisée : {attributeSize} Mo",invalidImageResolution:"La résolution maximale d'image prise en charge est {width} X {height}"},help_text:{connect:"Connexion en cours...",error:"Une erreur s'est produite. Vous n'êtes pas connecté.",loading:"Chargement...",offline:"Vous n'êtes pas en ligne. Veuillez vérifier votre connexion Internet.",reconnect:"Reconnexion...",reconnecting:{one:"Reconnexion dans une seconde",other:"Reconnexion dans {count} secondes"},refresh:"Actualiser",sync:"Synchronisation de la conversation"},jwt:{invalid:"Oops, Something went wrong. Please reload the page..."},message:{not_authenticated:"Echec de l'authentification du message non remis",pending:"Envoi..."},screenShare:{allow:"Permettre",approved:"Autorisé",denied:"Refusé",deny:"Refuser",footer:"{agentName} ne pourra effectuer aucune action ni se déplacer vers un autre onglet.",footer_vc:"{agentName} ne pourra pas se déplacer vers un autre onglet.",header:"{agentName} demande à voir votre onglet actif.",header_vc:"{agentName} demande à voir & contrôler votre onglet actif.",muteAudio:"Couper le son",readmorelink:"En savoir plus",reqCancelled:"Demande de co-navigation annulée",screenShareCompare:"...demandes pour voir votre onglet actif",sessionEnd:"Session de co-navigation terminée"},size_exceeded_msg:{infoMsg:"Euh oh, ce message est trop long et sera envoyé à la place sous forme de fichier <strong>.txt</strong>",infoMsgSprout:"Euh oh, ce message est trop long et ne peut pas être envoyé."},status_messages:{access_denied:{heading:"Accès refusé",line1:"Oh-oh ! Une erreur s'est produite",line2:"On dirait que vous n’avez pas l’autorisation d’accéder à cette page.",line3:"Contactez votre administrateur pour plus d'informations."},not_found:{heading:"Page introuvable",status:"La page que vous cherchez est introuvable."},service_unavailable:{heading:"Le service est indisponible",status:"La page que vous cherchez n'est pas disponible pour le moment. Veillez réessayer."}},uiTabs:{chat:"CHATTER",faq:"FAQ"}}}),define("hotline-web/translations/pt-br",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default={by_in_powered_by:"para",channel:{away_message:"Não estamos online no momento. Por favor, deixe uma mensagem!",heading_title:"Nos mande uma mensagem",picture_label:"[Mensagem de imagem]",welcome_message:"Oi! Gostaríamos de ajudá-lo!"},common:{button:{submitting:"Submitting..."},numbers:{nine:"9"}},conversation:{ce:{activity:"Atividades",flag:"Marcações",food:"Comida",nature:"Natureza",no_results:"Pesquisa sem resultados",object:"Objetos",people:"Pessoas",placeholders:{default:"Responda aqui...",email:"Insira o e-mail",mobile:"Insira um número de telefone",name:"Insira o Nome",url:"Digite uma URL"},recent:"Usados recentemente",results:"Resultados da pesquisa",search:"Pesquisar...",symbol:"Símbolos",travel:"Viagens e lugares",view:"View"},chat_headers:{new:"Novas mensagens",sending:"Enviando...",today:"Hoje",yesterday:"Ontem"},fragment:{securityStatus:{AV_PENDING:{desc:"Baixe a seu critério.",title:"Verificação de malware em andamento"},MALWARE_FILE:{desc:"Este arquivo contém um malware. O download deste anexo foi desabilitado.",title:"Bloqueado"}},showmore:"Mostre mais"},push_notification:{message:"Não perca nenhuma resposta! Permitir notificações push?",no:"Não",yes:"Sim"},response_time:{hours:"{count,plural, =1 {Tempo de resposta atual: menos de uma hora} other { Tempo de resposta atual: menos de {count} horas}}",minutes:"{count,plural, =1 {Tempo de resposta atual: menos de um minuto} other {Tempo de resposta atual: menos de {count} minutos}}",more:"Tempo de resposta atual: algumas horas"},response_time_7days:{hours:"{count,plural, =1 {Normalmente responde dentro de uma hora} other { Normalmente responde dentro de {count} horas}}",minutes:"{count,plural, =1 {Normalmente responde dentro de um minuto} other { Normalmente responde dentro de {count} minutos}}",more:"Normalmente responde dentro de algumas horas"}},csat:{csat_no_comment:"Como nós poderíamos ter ajudado melhor?",csat_question:"Nós resolvemos as suas preocupações?",enter_comments:"Deixe seus comentários aqui",rate_here:"Avalie aqui",skip:"pular",submit:"Enviar",thank_you:"Obrigado pelo seu feedback!",yes:"Sim!"},faqSearchResults:{resultsFrom:"resultados de",resultsFromCategory:"resultado(s) de outras categorias"},faqs:{faq_help_text:"Navegar através de respostas a consultas comuns",faq_link_text:"Perguntas frequentes",faq_search:"Procurar em perguntas frequentes",message_us_link:"Nos mande uma mensagem",no_faqs:"Nenhuma pergunta frequente disponível.",no_search_results:"Nenhum artigo encontrado para <b>'{query}'</b>",thank_you_for_feedback:"Obrigado pelo seu feedback!",useful_question:"Este artigo foi útil?"},fileAttachmentErrors:{errorUploadingFile:"Error uploading file",invalidFileExtension:"Extensão de arquivo não suportada",invalidFileSize:"O anexo excedeu o tamanho máximo de arquivo: {attributeSize} MB",invalidImageResolution:"Resolução máxima suportada para imagem é {width} X {height}"},help_text:{connect:"Conectando...",error:"Algo deu errado. Você não está conectado.",loading:"Carregando...",offline:"Você está off-line. Por favor, verifique sua conexão com a internet.",reconnect:"Reconectando...",reconnecting:{one:"Reconectando em um segundo",other:"Reconectando em {count} segundos"},refresh:"Atualizar",sync:"Sincronizando a conversa"},jwt:{invalid:"Oops, Something went wrong. Please reload the page..."},message:{not_authenticated:"Message not delivered authentication failure",pending:"Enviando..."},screenShare:{allow:"Permitir",approved:"Permitida",denied:"Negada",deny:"Negar",footer:"{agentName} não será capaz de executar qualquer ação ou mover para outra guia.",footer_vc:"{agentName} não será capaz de mover para outra guia.",header:"{agentName} solicita a exibição de sua guia atual.",header_vc:"{agentName} solicita a exibição e controle da sua guia atual.",muteAudio:"Silenciar áudio",readmorelink:"Leia mais",reqCancelled:"Solicitação para navegação compartilhada cancelada",screenShareCompare:"...solicita a exibição de sua guia atual",sessionEnd:"Sessão de navegação compartilhada encerrada"},size_exceeded_msg:{infoMsg:"Uh, esta mensagem é muito longa e será enviada como um arquivo <strong>.txt</strong>",infoMsgSprout:"Uh, esta mensagem é muito longa e não pode ser enviada."},status_messages:{access_denied:{heading:"Acesso negado",line1:"Opa! Algo deu errado",line2:"Parece que você não tem permissão para acessar essa página.",line3:"Contate o administrador para mais detalhes."},not_found:{heading:"Página não encontrada",status:"A página que você está procurando não pôde ser encontrada."},service_unavailable:{heading:"Serviço indisponível",status:"A página que você está procurando está indisponível no momento. Por favor, tente novamente mais tarde."}},uiTabs:{chat:"CHAT",faq:"FAQ"}}}),define("hotline-web/utils/constants",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default={DownloadFileIframeId:"downloadFile",MaxFileAttachments:1,SAMPLE_TOKEN:"WEB_CHAT_TOKEN",DOM_ID:{appReplyEditor:"app-reply-dialog-editor",appReplyComposerEditor:"app-reply-composer-editor",appConversationEditor:"app-conversation-editor"},FILETYPE:{INVALID:0,IMAGE:1,FILE:2},FileUrlValidityTimeout:3e5,FileSecurityStatus:{SafeFile:"SAFE_FILE",AVPending:"AV_PENDING",MalwareFile:"MALWARE_FILE",LargeFile:"TOO_LARGE_FOR_MALWARE_CHECK"},ExcludedFileExtensions:".cmd,.msi,.com,.exe,.hta,.html,.htm,.js,.jar,.vbs,.vb,.sfx,.bat",SupportedImageFileExtensions:{".jpg":"image",".png":"image",".jpeg":"image",".gif":"image"},MessageSpecs:{maxLength:2e3},GeolocationCacheDuration:864e5,freshchatblue:"#45A4EC",Keys:{socket_msgs:"socket_messages"},RuleMetricKeys:{sent:"sent",uniqueSent:"unique_sent",clicked:"clicked",uniqueClicked:"unique_clicked"},EventState:{SENT:"sent",OPENED:"opened",CLICKED:"clicked",REPLIED:"replied",CLEARED:"cleared",ERROR:"error"},EventType:{CLICK:"click",LOAD:"load",TIMER:"timer"},FrameState:{INITIALIZED:"initialized",LOADED:"loaded",AUTHENTICATED:"authenticated",NOT_AUTHENTICATED:"not_authenticated",BLOCKED:"blocked"},UserState:{CREATED:"created",NOT_CREATED:"not_created",LOADED:"loaded",NOT_LOADED:"not_loaded",IDENTIFIED:"identified",RESTORED:"restored",AUTHENTICATED:"authenticated",NOT_AUTHENTICATED:"not_authenticated",AUTH_EXPIRED:"auth_expired",AUTH_INVALID:"auth_invalid",UUID_GENERATED:"uuid_generated",UNLOADED:"unloaded"},DialogState:{OPEN:"open",CLOSE:"close"},ImageAttr:{size:5242880},FileAttr:{size:36700160},CONVERSATION:{FETCH:{DEFAULT:100,USER_CREATED:101,CHANNELS_LOADED:102,CONVERSATION_RESTORED:103,CONVERSATION_RELOADED:104,RTS_CONNECT_SUCCESS:110,RTS_RECONNECT_SUCCESS:111,RTS_USER_CREATED:112,RTS_SEQ_ID_MISMATCH:113,RTS_ADVICE_PULL:114},MESSAGE_TYPE:{NORMAL:1,BOT:2,SCREEN_SHARING:{REQUESTED:8001,ACCEPTED:8002,DENIED:8003,CANCELLD:8004,ENDED:8005},IMAGE:[3,5]},USER_TYPE:{AGENT:1,USER:0,CHANNEL:9},FRAGMENT_TYPE:{TEXT:1,IMAGE:2,AUDIO:3,VIDEO:4,BUTTON:5,FILE:6,QUICKREPLY:51,INPUT:201,COLLECTION:1e3},PLACEHOLDERS:{EMAIL:"email",MOBILE:"mobile",NAME:"name",URL:"url"}},MESSAGE_STATUS:{PENDING:0,READY_TO_SEND:1,SENT:2,UNAUTHENTICATED:3},LunrLanguage:{da:"assets/lunr-languages/lunr.da.min.js",de:"assets/lunr-languages/lunr.de.min.js",du:"assets/lunr-languages/lunr.du.min.js",es:"assets/lunr-languages/lunr.es.min.js",fi:"assets/lunr-languages/lunr.fi.min.js",fr:"assets/lunr-languages/lunr.fr.min.js",hu:"assets/lunr-languages/lunr.hu.min.js",it:"assets/lunr-languages/lunr.it.min.js",no:"assets/lunr-languages/lunr.no.min.js",pt:"assets/lunr-languages/lunr.pt.min.js",ro:"assets/lunr-languages/lunr.ro.min.js",ru:"assets/lunr-languages/lunr.ru.min.js",sv:"assets/lunr-languages/lunr.sv.min.js",tr:"assets/lunr-languages/lunr.tr.min.js"},Browsers:["Chrome","Firefox","Safari","Trident","WebView","Edge"],EmberModelUrl:{agent:{model:"agent",url:"/app/services/app/webchat/{token}/agents/{id}"},agentPictures:{model:"agentPictures",url:"/app/services/app/webchat/{token}/agent_pictures"},botConfig:{model:"bot",url:"/app/services/app/webchat/{token}/bot_config"},channels:{model:"channel",url:"/app/services/app/webchat/{token}/channels?locales={locale}"},config:{model:"config",url:"/app/services/app/webchat/{token}/config?domain={domainName}"},widgetInfo:{model:"widget-info",url:"/app/services/app/webchat/{token}/widget_info_v2?locales={locale}"},conversations:{model:"conversations",url:"/app/services/app/webchat/{token}/user/{userAlias}/messages"},csatRating:{model:"csat",url:"/app/services/app/webchat/{token}/conversation/{conversationId}/csat/{csatId}/response"},fileDownload:{model:"",url:"/app/services/app/webchat/{token}/user/{userAlias}/file/{fileHash}/download"},newEvent:{model:"",url:"/app/services/app/webchat/{token}/events/new"},newMultiEvent:{model:"",url:"/app/services/app/webchat/{token}/events/new/multi"},newSBMultiEvent:{model:"",url:"/app/services/app/webchat/{token}/events/v2/new/multi"},newRecentEvent:{model:"",url:"/app/services/app/webchat/{token}/events/recent"},newSession:{model:"",url:"/app/services/app/webchat/{token}/session"},dataDog:{model:"",url:"/app/services/app/webchat/{token}/track/dd/multi"},dataDogSBMulti:{model:"",url:"/app/services/app/webchat/{token}/track/dd/v2/multi"},faqCategories:{model:"faqs",url:"/app/services/app/webchat/{token}/faq/category"},faqContent:{model:"",url:"https://faq-{host}/app/services/app/webchat/{token}/faq/category/{categoryId}/article/{articleId}/locale/{localeId}"},geolocation:{model:"geolocation",url:"/app/services/app/webchat/{token}/geolocation"},heartbeat:{model:"heartbeat",url:"/app/services/app/webchat/{token}/user/{userAlias}/heartbeat"},imageUpload:{model:"",url:"/app/services/app/webchat/{token}/user/{userAlias}/picture"},message:{model:"messages",url:"/app/services/app/webchat/{token}/user/{userAlias}/message"},messageACK:{model:"messages",url:"/app/services/app/webchat/{token}/user/{userAlias}/delivered"},read:{model:"response",url:"/app/services/app/webchat/{token}/user/{userAlias}/conversation/read"},reset:{model:"response",url:"/app/services/app/webchat/{token}/logout"},subscribePush:{model:"",url:"/app/services/app/webchat/{token}/user/{userAlias}/register_push"},tattletale:{model:"",url:"/app/services/app/webchat/{token}/rules/metrics?ruleId={ruleId}&keys={keys}"},trackActivity:{model:"",url:"/app/services/app/webchat/{token}/user/{userAlias}/activity"},updateCampaign:{model:"response",url:"/app/services/app/webchat/{token}/user/{userAlias}/message/marketing/{marketingId}/status"},updateUser:{model:"user",url:"/app/services/app/webchat/{token}/user/{userAlias}/update"},updateUserJWT:{model:"user",url:"/app/services/app/webchat/{token}/user/{userAlias}/update/update-with-jwt"},upvoteDownvote:{model:"",url:"/app/services/app/webchat/{token}/faq/category/{categoryId}/article/{articleId}?localeId={localeId}&platform=web"},user:{model:"user",url:"/app/services/app/webchat/{token}/user"},userToken:{model:"user",url:"/app/services/app/webchat/{token}/user/token"},verifyJWT:{model:"jwt",url:"/app/services/app/webchat/{token}/jwt/validate"},renewJWT:{model:"jwt",url:"/app/services/app/webchat/{token}/user/renew-by-jwt"},webSocket:{model:"rtsToken",url:"/app/services/app/webchat/{token}/token"},fileUpload:{model:"",url:"/app/services/app/webchat/{token}/user/{userAlias}/file/upload"}},EmberModelQueryParams:{SiteId:"siteId",IdentifyByReferenceId:"identifyByReferenceId"},EmberModelPathParams:{Token:"{token}",UserAlias:"{userAlias}"},DataDog:{tags:["accountId"],events:{connection:{key:"fe.track.user.ws.connection",tags:{connStatus:{key:"conn_status",value:{timeout:"1",pong_failed:"2"}},connFlag:{key:"conn_flag",value:{created:"0",disconnected:"1",reconnected:"2",connected:"3",subscribed:"4"}},errFlag:{key:"err_flag"}}},connectionDropped:{key:"fe.track.user.ws.connectionDropped",tags:{dropStatus:{key:"drop_status",value:{no_ping_pong:"1",no_connection:"2",connection_retried:"3"}}}},subscription:{key:"fe.track.user.ws.subscription",tags:{subTimeout:{key:"sub_timeout"}}},dropEvent:{key:"fe.track.user.ws.dropEvent",tags:{eventStorePayload:{key:"event_store_payload"}}},advicePull:{key:"fe.track.user.ws.advicePull",tags:{pullStatus:{key:"adv_pull_status",value:{triggered:"0",called:"1",read:"2",readError:"3"}}}}}},AcceptedLocalizations:["en","en-en","en-au","en-ca","en-gb","en-ie","en-nz","en-us","pt-br","fr","fr-fr","fr-be","fr-ca","fr-lu","fr-ch"],Locales:{EN_US:"en-us",AR:"ar",EN:"en",FR:"fr",EN_LIST:["en","en-en","en-au","en-ca","en-gb","en-ie","en-nz","en-us"],AR_LIST:["ar","ar-ar","ar-ae","ar-bh","ar-dz","ar-eg","ar-iq","ar-jo","ar-kw","ar-lb","ar-ly","ar-ma","ar-om","ar-qa","ar-sa","ar-sy","ar-tn","ar-ye"],FR_LIST:["fr","fr-fr","fr-be","fr-ca","fr-lu","fr-ch"]},Batch:{transactions:{types:{dd:{id:1,label:"Data Dog"},events:{id:2,label:"Event Store"}}},errors:{ERR_LOCKED:{code:1,message:"BATCH SERVICE IS FULL"},ERR_TRANS_INVALID:{code:2,message:"TRANSACTION IS INVALID"}}}}}),define("hotline-web/utils/countrycodes",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default={BD:"Bangladesh",BE:"Belgium",BF:"Burkina Faso",BG:"Bulgaria",BA:"Bosnia and Herzegovina",BB:"Barbados",WF:"Wallis and Futuna",BL:"Saint Barthelemy",BM:"Bermuda",BN:"Brunei",BO:"Bolivia",BH:"Bahrain",BI:"Burundi",BJ:"Benin",BT:"Bhutan",JM:"Jamaica",BV:"Bouvet Island",BW:"Botswana",WS:"Samoa",BQ:"Bonaire, Saint Eustatius and Saba ",BR:"Brazil",BS:"Bahamas",JE:"Jersey",BY:"Belarus",BZ:"Belize",RU:"Russia",RW:"Rwanda",RS:"Serbia",TL:"East Timor",RE:"Reunion",TM:"Turkmenistan",TJ:"Tajikistan",RO:"Romania",TK:"Tokelau",GW:"Guinea-Bissau",GU:"Guam",GT:"Guatemala",GS:"South Georgia and the South Sandwich Islands",GR:"Greece",GQ:"Equatorial Guinea",GP:"Guadeloupe",JP:"Japan",GY:"Guyana",GG:"Guernsey",GF:"French Guiana",GE:"Georgia",GD:"Grenada",GB:"United Kingdom",GA:"Gabon",SV:"El Salvador",GN:"Guinea",GM:"Gambia",GL:"Greenland",GI:"Gibraltar",GH:"Ghana",OM:"Oman",TN:"Tunisia",JO:"Jordan",HR:"Croatia",HT:"Haiti",HU:"Hungary",HK:"Hong Kong",HN:"Honduras",HM:"Heard Island and McDonald Islands",VE:"Venezuela",PR:"Puerto Rico",PS:"Palestinian Territory",PW:"Palau",PT:"Portugal",SJ:"Svalbard and Jan Mayen",PY:"Paraguay",IQ:"Iraq",PA:"Panama",PF:"French Polynesia",PG:"Papua New Guinea",PE:"Peru",PK:"Pakistan",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PM:"Saint Pierre and Miquelon",ZM:"Zambia",EH:"Western Sahara",EE:"Estonia",EG:"Egypt",ZA:"South Africa",EC:"Ecuador",IT:"Italy",VN:"Vietnam",SB:"Solomon Islands",ET:"Ethiopia",SO:"Somalia",ZW:"Zimbabwe",SA:"Saudi Arabia",ES:"Spain",ER:"Eritrea",ME:"Montenegro",MD:"Moldova",MG:"Madagascar",MF:"Saint Martin",MA:"Morocco",MC:"Monaco",UZ:"Uzbekistan",MM:"Myanmar",ML:"Mali",MO:"Macao",MN:"Mongolia",MH:"Marshall Islands",MK:"Macedonia",MU:"Mauritius",MT:"Malta",MW:"Malawi",MV:"Maldives",MQ:"Martinique",MP:"Northern Mariana Islands",MS:"Montserrat",MR:"Mauritania",IM:"Isle of Man",UG:"Uganda",TZ:"Tanzania",MY:"Malaysia",MX:"Mexico",IL:"Israel",FR:"France",IO:"British Indian Ocean Territory",SH:"Saint Helena",FI:"Finland",FJ:"Fiji",FK:"Falkland Islands",FM:"Micronesia",FO:"Faroe Islands",NI:"Nicaragua",NL:"Netherlands",NO:"Norway",NA:"Namibia",VU:"Vanuatu",NC:"New Caledonia",NE:"Niger",NF:"Norfolk Island",NG:"Nigeria",NZ:"New Zealand",NP:"Nepal",NR:"Nauru",NU:"Niue",CK:"Cook Islands",XK:"Kosovo",CI:"Ivory Coast",CH:"Switzerland",CO:"Colombia",CN:"China",CM:"Cameroon",CL:"Chile",CC:"Cocos Islands",CA:"Canada",CG:"Republic of the Congo",CF:"Central African Republic",CD:"Democratic Republic of the Congo",CZ:"Czech Republic",CY:"Cyprus",CX:"Christmas Island",CR:"Costa Rica",CW:"Curacao",CV:"Cape Verde",CU:"Cuba",SZ:"Swaziland",SY:"Syria",SX:"Sint Maarten",KG:"Kyrgyzstan",KE:"Kenya",SS:"South Sudan",SR:"Suriname",KI:"Kiribati",KH:"Cambodia",KN:"Saint Kitts and Nevis",KM:"Comoros",ST:"Sao Tome and Principe",SK:"Slovakia",KR:"South Korea",SI:"Slovenia",KP:"North Korea",KW:"Kuwait",SN:"Senegal",SM:"San Marino",SL:"Sierra Leone",SC:"Seychelles",KZ:"Kazakhstan",KY:"Cayman Islands",SG:"Singapore",SE:"Sweden",SD:"Sudan",DO:"Dominican Republic",DM:"Dominica",DJ:"Djibouti",DK:"Denmark",VG:"British Virgin Islands",DE:"Germany",YE:"Yemen",DZ:"Algeria",US:"United States",UY:"Uruguay",YT:"Mayotte",UM:"United States Minor Outlying Islands",LB:"Lebanon",LC:"Saint Lucia",LA:"Laos",TV:"Tuvalu",TW:"Taiwan",TT:"Trinidad and Tobago",TR:"Turkey",LK:"Sri Lanka",LI:"Liechtenstein",LV:"Latvia",TO:"Tonga",LT:"Lithuania",LU:"Luxembourg",LR:"Liberia",LS:"Lesotho",TH:"Thailand",TF:"French Southern Territories",TG:"Togo",TD:"Chad",TC:"Turks and Caicos Islands",LY:"Libya",VA:"Vatican",VC:"Saint Vincent and the Grenadines",AE:"United Arab Emirates",AD:"Andorra",AG:"Antigua and Barbuda",AF:"Afghanistan",AI:"Anguilla",VI:"U.S. Virgin Islands",IS:"Iceland",IR:"Iran",AM:"Armenia",AL:"Albania",AO:"Angola",AQ:"Antarctica",AS:"American Samoa",AR:"Argentina",AU:"Australia",AT:"Austria",AW:"Aruba",IN:"India",AX:"Aland Islands",AZ:"Azerbaijan",IE:"Ireland",ID:"Indonesia",UA:"Ukraine",QA:"Qatar",MZ:"Mozambique"}}),define("hotline-web/utils/error-utils",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.findErrorField=function(){return document.querySelector(".has-error")}}),define("hotline-web/utils/flatten-query-params",["exports","ember-data-url-templates/utils/flatten-query-params"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hotline-web/utils/intl/missing-message",["exports","ember-intl/utils/missing-message"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hotline-web/utils/languages",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default={ab:"assets/moment-locales/ab.js",aa:"assets/moment-locales/aa.js",af:"assets/moment-locales/af.js",ak:"assets/moment-locales/ak.js",sq:"assets/moment-locales/sq.js",am:"assets/moment-locales/am.js",ar:"assets/moment-locales/ar.js",an:"assets/moment-locales/an.js",hy:"assets/moment-locales/hy.js",as:"assets/moment-locales/as.js",av:"assets/moment-locales/av.js",ae:"assets/moment-locales/ae.js",ay:"assets/moment-locales/ay.js",az:"assets/moment-locales/az.js",bm:"assets/moment-locales/bm.js",ba:"assets/moment-locales/ba.js",eu:"assets/moment-locales/eu.js",be:"assets/moment-locales/be.js",bn:"assets/moment-locales/bn.js",bh:"assets/moment-locales/bh.js",bi:"assets/moment-locales/bi.js",bs:"assets/moment-locales/bs.js",br:"assets/moment-locales/br.js",bg:"assets/moment-locales/bg.js",my:"assets/moment-locales/my.js",ca:"assets/moment-locales/ca.js","ca-es":"assets/moment-locales/ca.js",ch:"assets/moment-locales/ch.js",ce:"assets/moment-locales/ce.js",ny:"assets/moment-locales/ny.js",zh:"assets/moment-locales/zh-cn.js","zh-cn":"assets/moment-locales/zh-cn.js","zh-sg":"assets/moment-locales/zh-cn.js","zh-hk":"assets/moment-locales/zh-hk.js","zh-mo":"assets/moment-locales/zh-hk.js","zh-tw":"assets/moment-locales/zh-tw.js",cv:"assets/moment-locales/cv.js",kw:"assets/moment-locales/kw.js",co:"assets/moment-locales/co.js",cr:"assets/moment-locales/cr.js",hr:"assets/moment-locales/hr.js",cs:"assets/moment-locales/cs.js","cs-cz":"assets/moment-locales/cs.js",da:"assets/moment-locales/da.js","da-dk":"assets/moment-locales/da.js",dv:"assets/moment-locales/dv.js",nl:"assets/moment-locales/nl.js","nl-nl":"assets/moment-locales/nl.js","nl-be":"assets/moment-locales/nl-be.js",en:"assets/moment-locales/en.js",eo:"assets/moment-locales/eo.js",et:"assets/moment-locales/et.js","et-ee":"assets/moment-locales/et.js",ee:"assets/moment-locales/ee.js",fo:"assets/moment-locales/fo.js",fj:"assets/moment-locales/fj.js",fi:"assets/moment-locales/fi.js","fi-fi":"assets/moment-locales/fi.js",fr:"assets/moment-locales/fr.js","fr-fr":"assets/moment-locales/fr.js","fr-be":"assets/moment-locales/fr.js","fr-lu":"assets/moment-locales/fr.js","fr-mc":"assets/moment-locales/fr.js","fr-ca":"assets/moment-locales/fr-ca.js","fr-ch":"assets/moment-locales/fr-ch.js",ff:"assets/moment-locales/ff.js",gl:"assets/moment-locales/gl.js",ka:"assets/moment-locales/ka.js",de:"assets/moment-locales/de.js","de-de":"assets/moment-locales/de.js","de-li":"assets/moment-locales/de.js","de-lu":"assets/moment-locales/de.js","de-at":"assets/moment-locales/de-at.js","de-ch":"assets/moment-locales/de-ch.js",el:"assets/moment-locales/el.js",gn:"assets/moment-locales/gn.js",gu:"assets/moment-locales/gu.js",ht:"assets/moment-locales/ht.js",ha:"assets/moment-locales/ha.js",he:"assets/moment-locales/he.js",hz:"assets/moment-locales/hz.js",hi:"assets/moment-locales/hi.js","hi-in":"assets/moment-locales/hi.js",ho:"assets/moment-locales/ho.js",hu:"assets/moment-locales/hu.js","hu-hu":"assets/moment-locales/hu.js",ia:"assets/moment-locales/ia.js",id:"assets/moment-locales/id.js","id-id":"assets/moment-locales/id.js",ie:"assets/moment-locales/ie.js",ga:"assets/moment-locales/ga.js",ig:"assets/moment-locales/ig.js",ik:"assets/moment-locales/ik.js",io:"assets/moment-locales/io.js",is:"assets/moment-locales/is.js",it:"assets/moment-locales/it.js","it-it":"assets/moment-locales/it.js","it-ch":"assets/moment-locales/it.js",iu:"assets/moment-locales/iu.js",ja:"assets/moment-locales/ja.js","ja-jp":"assets/moment-locales/ja.js",jv:"assets/moment-locales/jv.js",kl:"assets/moment-locales/kl.js",kn:"assets/moment-locales/kn.js",kr:"assets/moment-locales/kr.js",ks:"assets/moment-locales/ks.js",kk:"assets/moment-locales/kk.js",km:"assets/moment-locales/km.js",ki:"assets/moment-locales/ki.js",rw:"assets/moment-locales/rw.js",ky:"assets/moment-locales/ky.js",kv:"assets/moment-locales/kv.js",kg:"assets/moment-locales/kg.js",ko:"assets/moment-locales/ko.js","ko-kr":"assets/moment-locales/ko.js",ku:"assets/moment-locales/ku.js",kj:"assets/moment-locales/kj.js",la:"assets/moment-locales/la.js",lb:"assets/moment-locales/lb.js",lg:"assets/moment-locales/lg.js",li:"assets/moment-locales/li.js",ln:"assets/moment-locales/ln.js",lo:"assets/moment-locales/lo.js",lt:"assets/moment-locales/lt.js",lu:"assets/moment-locales/lu.js",lv:"assets/moment-locales/lv.js","lv-lv":"assets/moment-locales/lv.js",gv:"assets/moment-locales/gv.js",mk:"assets/moment-locales/mk.js",mg:"assets/moment-locales/mg.js",ms:"assets/moment-locales/ms.js",ml:"assets/moment-locales/ml.js",mt:"assets/moment-locales/mt.js",mi:"assets/moment-locales/mi.js",mr:"assets/moment-locales/mr.js",mh:"assets/moment-locales/mh.js",mn:"assets/moment-locales/mn.js",na:"assets/moment-locales/na.js",nv:"assets/moment-locales/nv.js",nb:"assets/moment-locales/nb.js","nb-no":"assets/moment-locales/nb.js",nd:"assets/moment-locales/nd.js",ne:"assets/moment-locales/ne.js",ng:"assets/moment-locales/ng.js",nn:"assets/moment-locales/nn.js",no:"assets/moment-locales/no.js",ii:"assets/moment-locales/ii.js",nr:"assets/moment-locales/nr.js",oc:"assets/moment-locales/oc.js",oj:"assets/moment-locales/oj.js",cu:"assets/moment-locales/cu.js",om:"assets/moment-locales/om.js",or:"assets/moment-locales/or.js",os:"assets/moment-locales/os.js",pa:"assets/moment-locales/pa-in.js","pa-in":"assets/moment-locales/pa-in.js",pi:"assets/moment-locales/pi.js",fa:"assets/moment-locales/fa.js",pl:"assets/moment-locales/pl.js","pl-pl":"assets/moment-locales/pl.js",ps:"assets/moment-locales/ps.js",pt:"assets/moment-locales/pt.js","pt-pt":"assets/moment-locales/pt.js","pt-br":"assets/moment-locales/pt-br.js",qu:"assets/moment-locales/qu.js",rm:"assets/moment-locales/rm.js",rn:"assets/moment-locales/rn.js",ro:"assets/moment-locales/ro.js","ro-ro":"assets/moment-locales/ro.js",ru:"assets/moment-locales/ru.js","ru-ru":"assets/moment-locales/ru.js",sa:"assets/moment-locales/sa.js",sc:"assets/moment-locales/sc.js",sd:"assets/moment-locales/sd.js",se:"assets/moment-locales/se.js",sm:"assets/moment-locales/sm.js",sg:"assets/moment-locales/sg.js",sr:"assets/moment-locales/sr.js",gd:"assets/moment-locales/gd.js",sn:"assets/moment-locales/sn.js",si:"assets/moment-locales/si.js",sk:"assets/moment-locales/sk.js","sk-sk":"assets/moment-locales/sk.js",sl:"assets/moment-locales/sl.js","sl-si":"assets/moment-locales/sl.js",so:"assets/moment-locales/so.js",st:"assets/moment-locales/st.js",es:"assets/moment-locales/es.js","es-do":"assets/moment-locales/es-do.js","es-us":"assets/moment-locales/es-us.js","es-la":"assets/moment-locales/es-us.js",su:"assets/moment-locales/su.js",sw:"assets/moment-locales/sw.js",ss:"assets/moment-locales/ss.js",sv:"assets/moment-locales/sv.js","sv-fi":"assets/moment-locales/sv.js","sv-se":"assets/moment-locales/sv.js",ta:"assets/moment-locales/ta.js",te:"assets/moment-locales/te.js",tg:"assets/moment-locales/tg.js",th:"assets/moment-locales/th.js","th-th":"assets/moment-locales/th.js",ti:"assets/moment-locales/ti.js",bo:"assets/moment-locales/bo.js",tk:"assets/moment-locales/tk.js",tl:"assets/moment-locales/tl-ph.js","tl-ph":"assets/moment-locales/tl-ph.js","tl-tl":"assets/moment-locales/tl-ph.js",tn:"assets/moment-locales/tn.js",to:"assets/moment-locales/to.js",tr:"assets/moment-locales/tr.js","tr-tr":"assets/moment-locales/tr.js",ts:"assets/moment-locales/ts.js",tt:"assets/moment-locales/tt.js",tw:"assets/moment-locales/tw.js",ty:"assets/moment-locales/ty.js",ug:"assets/moment-locales/ug.js",uk:"assets/moment-locales/uk.js","uk-ua":"assets/moment-locales/uk.js",ur:"assets/moment-locales/ur.js",uz:"assets/moment-locales/uz.js",ve:"assets/moment-locales/ve.js",vi:"assets/moment-locales/vi.js","vi-vn":"assets/moment-locales/vi.js",vo:"assets/moment-locales/vo.js",wa:"assets/moment-locales/wa.js",cy:"assets/moment-locales/cy.js",wo:"assets/moment-locales/wo.js",fy:"assets/moment-locales/fy.js",xh:"assets/moment-locales/xh.js",yi:"assets/moment-locales/yi.js",yo:"assets/moment-locales/yo.js",za:"assets/moment-locales/za.js"}}),define("hotline-web/utils/moment",["exports","moment","hotline-web/config/environment","hotline-web/utils/languages","hotline-web/utils/constants"],function(e,t,s,n,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var i={locale:{},momentShortDate:function(e,s,n){return(0,t.default)().subtract(e,n.slice(0,1)).format("Do MMM")},setLocaleToEN:function(){t.default.locale("en"),t.default.updateLocale("en",{relativeTime:{future:"%s",past:"%s",s:function(){return"now"},m:"a minute ago",mm:"%d minutes ago",h:"an hour ago",hh:"%d hours ago",d:this.momentShortDate,dd:this.momentShortDate,M:this.momentShortDate,MM:this.momentShortDate,y:this.momentShortDate,yy:this.momentShortDate}})},addScript:function(e){var n=this
return new Ember.RSVP.Promise(function(a,i){n.locale[e.locale]&&n.locale[e.locale].isLoading?i({status:429}):(n.locale[e.locale]={isLoading:!0},-1===t.default.locales().indexOf(e.locale)?Ember.$.ajax({method:"GET",url:s.default.EmberENV.cdnUrl+e.scriptUrl,dataType:"script"}).then(function(t,s){a({locale:e.locale,status:s})},function(){i({status:100,locale:e.locale})}):i({status:101,locale:e.locale}))})},setLocale:function(e){e&&t.default.locale()!==e&&t.default.locale(e)},updateLocaleWith:function(e){var t=this
e=e&&e.toLowerCase()||a.default.Locales.EN
var s=a.default.Locales.EN_LIST,i=a.default.Locales.FR_LIST,o=a.default.Locales.AR_LIST
if(s.includes(e))return this.setLocaleToEN(),!0
o.includes(e)?e=a.default.Locales.AR:i.includes(e)&&(e=a.default.Locales.FR)
var r=n.default[e]
if(Ember.isBlank(r))return this.setLocaleToEN(),!0
this.addScript({scriptUrl:r,locale:e}).then(function(e){"success"===e.status&&t.setLocale(e.locale),t.locale[e.locale].isLoading=!1},function(e){var s=e&&e.status
100===s?(t.setLocaleToEN(),t.locale[e.locale].isLoading=!1):101===s&&(t.setLocale(e.locale),t.locale[e.locale].isLoading=!1)})}}
e.default=i}),define("hotline-web/utils/regex-utils",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t={_EMAIL_REGEX:/^[-a-zA-Z0-9.'’&_%+]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,10}$/,_PHONE_REGEX:/^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/,_DOMAIN_REGEX:/^https?\:\/\/([^\/:?#]+)(?:[\/:?#]|$)/i,_HTTPS_REGEX:/^((https):\/\/)/gim,get:function(e){return this["_"+e]},emailCheck:function(e){return!!e&&e.match(this._EMAIL_REGEX)},phoneCheck:function(e){return!!e&&e.match(this._PHONE_REGEX)},replaceText:function(e,t,s){return e.replace(t,s)},getDomainName:function(e){var t=e&&e.match(this._DOMAIN_REGEX)
return t&&t[1]},checkHTTPSurl:function(e){return!!e&&e.match(this._HTTPS_REGEX)},maskTextUsingSingleCharacter:function(e,t,s){var n=e.match(t),a=n&&n.length
if(a)for(var i=0;i<a;i++){var o=n[i],r=o.length
"$"===s&&(r*=2)
var l=s.repeat(r)
e=e.replace(o,l)}return e}}
e.default=t}),define("hotline-web/utils/sanitize",["exports"],function(e){function t(e,t){var s=new Sanitize(t),n=document.implementation.createHTMLDocument("sanitizerdoc").body
return n.appendChild(s.clean_node(e)),n.innerHTML}Object.defineProperty(e,"__esModule",{value:!0}),e.sanitize=function(e,s){var n=document.implementation.createHTMLDocument("sanitizerdoc").body
return n.innerHTML=e,t(n,s)},e.sanitizeElement=t}),define("hotline-web/utils/send-request",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e,t,s){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=e.adapterFor(t),i=n.params||{},o=n.requestType||"GET"
return a.ajax(s,o,{data:i})}}),define("hotline-web/utils/utils",["exports","moment","hotline-web/config/environment","hotline-web/utils/regex-utils"],function(e,t,s,n){function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,s){var n,a
switch(e){case"STRING":n="string"==typeof(n=s&&s.toString().trim().toLowerCase())?n:""
break
case"DATE":n=(a=(0,t.default)(s)).isValid()?a.valueOf():0
break
case"NUMBER":n="number"!=typeof(n=parseInt(s,10))||isNaN(n)?0:n
break
case"BOOLEAN":n="boolean"==typeof s?s:"string"==typeof s?"true"===s:!!s}return n}Object.defineProperty(e,"__esModule",{value:!0}),e.formatBytes=function(e,t){if(!e)return"0 Bytes"
var s=t||2,n=Math.floor(Math.log(e)/Math.log(1024))
return parseFloat((e/Math.pow(1024,n)).toFixed(s))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][n]},e.setWCFC=function(e){e=e||""
Ember.$.ajaxPrefilter(function(t,s,n){return n.setRequestHeader("x-wc-fc-token",e)})},e.convertOperand=i,e.checkCondition=function(e,s,n,a){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=i(e,n),l=i(e,a),u=!1,c=o?"day":"second"
switch(s){case"CONDITION_EQUAL":"DATE"===e?r&&l&&(u=(0,t.default)(r).isSame((0,t.default)(l),c)):u=r===l
break
case"CONDITION_NOT_EQUAL":u=r!==l
break
case"CONDITION_GREATER_THAN":"DATE"===e?r&&l&&(u=(0,t.default)(r).isAfter(l,c)):u=r>l
break
case"CONDITION_LESS_THAN":"DATE"===e?r&&l&&(u=(0,t.default)(r).isBefore(l,c)):u=r<l
break
case"CONDITION_IS_UNKNOWN":case"CONDITION_NOT_SET":u=!r
break
case"CONDITION_HAS_ANY_VALUE":case"CONDITION_SET":u=!!r
break
case"CONDITION_CONTAINS":u=-1!==r.indexOf(l)
break
case"CONDITION_DOES_NOT_CONTAIN":u=-1===r.indexOf(l)
break
case"CONDITION_STARTS_WITH":u=r.startsWith(l)
break
case"CONDITION_ENDS_WITH":u=r.endsWith(l)}return u},e.safelyParseJSON=function(e){var t
try{t=JSON.parse(e)}catch(s){}return t},e.setResetAsync=function(e){e=!!e,Ember.$.ajaxSettings.async=e},e.resizeImage=function(e){var t=e.picThumbWidth||225,s=e.picThumbHeight||225
t>200&&(s*=200/t,t=200)
s>200&&(t*=200/s,s=200)
Ember.set(e,"picThumbWidth",Math.round(t)),Ember.set(e,"picThumbHeight",Math.round(s))},e.setAppHead=function(e){Ember.$.ajaxPrefilter(function(t,n,a){var i=t.url,o=s.default&&s.default.cdn&&s.default.cdn.enabled&&s.default.cdn.enabled.forApi;-1!==i.indexOf("response_time")&&o?t.url=e.replace("//","//"+s.default.cdn.api)+i:-1!==i.indexOf("moment-locales")||-1!==i.indexOf("lunr-languages")?t.url=i:t.url=e+i
return a.setRequestHeader("withCredentials",!0)})},e.getKeys=function(e){var t=[]
for(var s in e)e.hasOwnProperty(s)&&t.push(s)
return t},e.findIndexByValueProperty=function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id",n=0
for(var a in e)if(e.hasOwnProperty(a)){var i=e[a]
if(i&&i[s]===t)return n
n++}return-1},e.findObjectByValueProperty=function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id"
for(var n in e)if(e.hasOwnProperty(n)){var a=e[n]
if(a&&a[s]===t)return a}return null},e.sortArray=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"position"
e&&e.sort(function(e,s){var n=e[t],a=s[t]
return"position"!==t&&(n=n.toLowerCase(),a=a.toLowerCase()),n>a?1:n<a?-1:0})},e.matchArray=function(e,t){if(e&&t){var s=e.filter(function(e){return e.toLowerCase()===t.toLowerCase()})
return!(!s||!s.length)}return!1},e.getNavigatorLanguage=function(){return window.navigator.languages&&window.navigator.languages.length&&window.navigator.languages[0]||window.navigator.language},e.coercer=function(e){var t=a(e)
if("number"===t)return e.toString()
if("string"===t)return e
if("object"===t&&e)return e.join(",")
return null},e.addQueryParams=function(e,t){if(e&&t&&Object.keys(t).length>0){var s=e.indexOf("#"),n=-1===s?"":e.substr(s),a=-1!==(e=-1===s?e:e.substr(0,s)).indexOf("?")?"&":"?",i=Object.keys(t).map(function(e){return"".concat(e,"=").concat(t[e])})
return"".concat(e).concat(a).concat(i.join("&")).concat(n)}return e},e.checkReplyValidation=function(e,t){if(e)switch(e){case"email":return n.default.emailCheck(t)
case"phone":return n.default.phoneCheck(t)
case"number":return!isNaN(Number(t))}return!1},e.singleMessageFromTextFragments=function(e){var t=""
if(e&&e.length)for(var s=0,n=e.length;s<n;s++)0!==s?"\r\n"===e[s].content?t+=e[s].content:t=t+" \r\n"+e[s].content:t=e[s].content
return t},e.getParameterByName=function(e,t){e=e.replace(/[\[\]]/g,"\\$&")
var s=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t)
if(!s)return null
if(!s[2])return""
return decodeURIComponent(s[2].replace(/\+/g," "))},e.getArticleToShow=function(e,t){var s,n,a=this.getParameterByName("category_id",t),i=this.getParameterByName("article_id",t)
if(e&&(s=e.filter(function(e){return a===e.categoryId.toString()}))[0]&&s[0].dsArticles)return n=s[0].dsArticles,n.filter(function(e){return i===e.articleId.toString()})[0]},e.isTrustedDomain=function(e,t){var s=t&&t.filter(function(t){return t&&t.toLowerCase()===e&&e.toLowerCase()})
return s&&s.length>0}}),define("hotline-web/utils/uuid-generator",["exports","ember-uuid/utils/uuid-generator"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"v4",{enumerable:!0,get:function(){return t.v4}}),Object.defineProperty(e,"v1",{enumerable:!0,get:function(){return t.v1}}),Object.defineProperty(e,"parse",{enumerable:!0,get:function(){return t.parse}}),Object.defineProperty(e,"unparse",{enumerable:!0,get:function(){return t.unparse}})}),define("hotline-web/config/environment",[],function(){try{var e="hotline-web/config/environment",t=document.querySelector('meta[name="'+e+'"]').getAttribute("content"),s={default:JSON.parse(unescape(t))}
return Object.defineProperty(s,"__esModule",{value:!0}),s}catch(n){throw new Error('Could not read config from meta tag with name "'+e+'".')}}),runningTests||require("hotline-web/app").default.create({name:"hotline-web",version:"freshchat_5_1_8_0+89f096ff"})
